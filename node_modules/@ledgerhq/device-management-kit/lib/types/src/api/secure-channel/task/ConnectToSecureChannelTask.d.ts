import WebSocket from "isomorphic-ws";
import { type Either } from "purify-ts";
import { Observable } from "rxjs";
import { type InternalApi } from "../../device-action/DeviceAction";
import { type ApduResponse } from "../../device-session/ApduResponse";
import { type InMessageType, type SecureChannelEvent } from "../../secure-channel/task/types";
import { type CryptoService } from "../../../internal/crypto/CryptoService";
import { SecureChannelError, type WebSocketConnectionError } from "../../../internal/secure-channel/model/Errors";
export type ConnectToSecureChannelTaskArgs = {
    connection: Either<WebSocketConnectionError, WebSocket>;
    cryptoService?: CryptoService;
};
export declare class ConnectToSecureChannelTask {
    private readonly _api;
    private readonly _args;
    private readonly _connection;
    private readonly _cryptoService;
    private _deviceIdCaptured;
    constructor(_api: InternalApi, _args: ConnectToSecureChannelTaskArgs);
    run(): Observable<SecureChannelEvent>;
    /**
     * Determines if a secure connection is already allowed based on the current device session state.
     *
     * @returns {boolean} `true` if a secure connection is allowed, otherwise `false`.
     */
    isSecureConnectionAllowed(): boolean;
    isInMessageType(data: unknown): data is InMessageType;
    mapDeviceError(apduResponse: ApduResponse): SecureChannelError | null;
}
//# sourceMappingURL=ConnectToSecureChannelTask.d.ts.map