import { type StateMachine, type StateSchema } from "xstate";
import { type DeviceAction, type DeviceActionIntermediateValue, type ExecuteDeviceActionReturnType, type InternalApi } from "../../device-action/DeviceAction";
import { type DmkError } from "../../Error";
import { type StateMachineTypes } from "./StateMachineTypes";
export type DeviceActionStateMachine<Output, Input, Error extends DmkError, IntermediateValue extends DeviceActionIntermediateValue, InternalState> = StateMachine<StateMachineTypes<Output, Input, Error, IntermediateValue, InternalState>["context"], // context
/**
 * The following usages `any` are OK because this is just a wrapper around the
 * state machine and we are not directly going to use these types.
 */
any, // event
any, // children
any, // actor
any, // action
any, // guard
any, // delay
any, // state value
any, // tag
StateMachineTypes<Output, Input, Error, IntermediateValue, InternalState>["input"], StateMachineTypes<Output, Input, Error, IntermediateValue, InternalState>["output"], any, any, StateSchema>;
/**
 * A DeviceAction that uses an XState state machine to execute.
 * It maps the state machine snapshots to the DeviceActionState.
 * This class is abstract and should be extended to implement the state machine.
 */
export declare abstract class XStateDeviceAction<Output, Input, Error extends DmkError, IntermediateValue extends DeviceActionIntermediateValue, InternalState> implements DeviceAction<Output, Input, Error, IntermediateValue> {
    readonly input: Input;
    readonly inspect: boolean;
    /**
     *
     * @param input The input for the DeviceAction
     * @param inspect If true, the state machine will be inspected in the browser
     */
    constructor(args: {
        input: Input;
        inspect?: boolean;
    });
    protected abstract makeStateMachine(internalAPI: InternalApi): DeviceActionStateMachine<Output, Input, Error, IntermediateValue, InternalState>;
    _execute(internalApi: InternalApi): ExecuteDeviceActionReturnType<Output, Error, IntermediateValue>;
    protected _subscribeToStateMachine(stateMachine: DeviceActionStateMachine<Output, Input, Error, IntermediateValue, InternalState>): ExecuteDeviceActionReturnType<Output, Error, IntermediateValue>;
    private _exhaustiveMatchingGuard;
}
//# sourceMappingURL=XStateDeviceAction.d.ts.map