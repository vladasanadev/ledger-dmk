import { type Either } from "purify-ts";
import { type Observable } from "rxjs";
import { type DeviceId } from "../../device/DeviceModel";
import { type DeviceModelDataSource } from "../../device-model/data/DeviceModelDataSource";
import { type ApduReceiverServiceFactory } from "../../device-session/service/ApduReceiverService";
import { type ApduSenderServiceFactory } from "../../device-session/service/ApduSenderService";
import { type DmkConfig } from "../../DmkConfig";
import { type DmkError } from "../../Error";
import { type LoggerPublisherService } from "../../logger-publisher/service/LoggerPublisherService";
import { type ConnectError } from "../../transport/model/Errors";
import { type TransportDiscoveredDevice } from "../../transport/model/TransportDiscoveredDevice";
import { type TransportIdentifier } from "../../transport/model/TransportIdentifier";
import { type TransportConnectedDevice } from "./TransportConnectedDevice";
export type DisconnectHandler = (deviceId: DeviceId) => void;
/**
 * Transport interface
 */
export interface Transport {
    /**
     * Get the transport identifier, which is a string to uniquely identify that transport.
     */
    getIdentifier(): TransportIdentifier;
    isSupported(): boolean;
    startDiscovering(): Observable<TransportDiscoveredDevice>;
    stopDiscovering(): void | Promise<void>;
    listenToAvailableDevices(): Observable<TransportDiscoveredDevice[]>;
    /**
     * Enables communication with the device by connecting to it.
     *
     * @param params containing
     *  - id: the device id from the DTO discovered device
     */
    connect(params: {
        deviceId: DeviceId;
        onDisconnect: DisconnectHandler;
    }): Promise<Either<ConnectError, TransportConnectedDevice>>;
    disconnect(params: {
        connectedDevice: TransportConnectedDevice;
    }): Promise<Either<DmkError, void>>;
}
export type TransportArgs = {
    deviceModelDataSource: DeviceModelDataSource;
    loggerServiceFactory: (tag: string) => LoggerPublisherService;
    config: DmkConfig;
    apduSenderServiceFactory: ApduSenderServiceFactory;
    apduReceiverServiceFactory: ApduReceiverServiceFactory;
};
export type TransportFactory = (args: TransportArgs) => Transport;
//# sourceMappingURL=Transport.d.ts.map