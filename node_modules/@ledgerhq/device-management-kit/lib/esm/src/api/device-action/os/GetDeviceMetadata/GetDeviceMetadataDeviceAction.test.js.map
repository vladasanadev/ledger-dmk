{
  "version": 3,
  "sources": ["../../../../../../../src/api/device-action/os/GetDeviceMetadata/GetDeviceMetadataDeviceAction.test.ts"],
  "sourcesContent": ["import { concat, of, throwError } from \"rxjs\";\n\nimport { CommandResultFactory } from \"@api/command/model/CommandResult\";\nimport { DeviceStatus } from \"@api/device/DeviceStatus\";\nimport { BTC_APP } from \"@api/device-action/__test-utils__/data\";\nimport { makeDeviceActionInternalApiMock } from \"@api/device-action/__test-utils__/makeInternalApi\";\nimport { setupGoToDashboardMock } from \"@api/device-action/__test-utils__/setupTestMachine\";\nimport { setupListAppsMock } from \"@api/device-action/__test-utils__/setupTestMachine\";\nimport { testDeviceActionStates } from \"@api/device-action/__test-utils__/testDeviceActionStates\";\nimport { DeviceActionStatus } from \"@api/device-action/model/DeviceActionState\";\nimport { UserInteractionRequired } from \"@api/device-action/model/UserInteractionRequired\";\nimport { UnknownDAError } from \"@api/device-action/os/Errors\";\nimport {\n  type Catalog,\n  type CustomImage,\n  type DeviceSessionState,\n  type FirmwareUpdateContext,\n  type FirmwareVersion,\n  type InstalledLanguagePackage,\n} from \"@api/device-session/DeviceSessionState\";\nimport { DeviceSessionStateType } from \"@api/device-session/DeviceSessionState\";\nimport { UnknownDeviceExchangeError } from \"@api/Error\";\nimport {\n  type SecureChannelEventPayload,\n  SecureChannelEventType,\n} from \"@api/secure-channel/task/types\";\nimport { type Application } from \"@internal/manager-api/model/Application\";\nimport { type DeviceVersion } from \"@internal/manager-api/model/Device\";\nimport { type FinalFirmware } from \"@internal/manager-api/model/Firmware\";\n\nimport { GetDeviceMetadataDeviceAction } from \"./GetDeviceMetadataDeviceAction\";\nimport { type GetDeviceMetadataDAState } from \"./types\";\n\nvi.mock(\"@api/device-action/os/GoToDashboard/GoToDashboardDeviceAction\");\nvi.mock(\"@api/device-action/os/ListApps/ListAppsDeviceAction\");\n\ndescribe(\"GetDeviceMetadataDeviceAction\", () => {\n  const apiMock = makeDeviceActionInternalApiMock();\n  const getDeviceMetadataMock = vi.fn();\n  const getFirmwareMetadataMock = vi.fn();\n  const getApplicationsMetadataMock = vi.fn();\n  const listAppsSecureChannelMock = vi.fn();\n\n  const DEVICE_VERSION = \"device_version\" as unknown as DeviceVersion;\n  const FIRMWARE = \"firmware\" as unknown as FinalFirmware;\n  const FIRMWARE_VERSION = \"firmware_version\" as unknown as FirmwareVersion;\n  const FIRMWARE_UPDATE = \"fm_update\" as unknown as FirmwareUpdateContext;\n  const CUSTOM_IMAGE = \"image\" as unknown as CustomImage;\n  const APPS = \"apps\" as unknown as Application[];\n  const APPS_UPDATE = \"apps_update\" as unknown as Application[];\n  const LANGUAGES = \"lang\" as unknown as InstalledLanguagePackage[];\n  const CATALOG = \"catalog\" as unknown as Catalog;\n\n  function extractDependenciesMock() {\n    return {\n      getDeviceMetadata: getDeviceMetadataMock,\n      getFirmwareMetadata: getFirmwareMetadataMock,\n      getApplicationsMetadata: getApplicationsMetadataMock,\n      listAppsSecureChannel: listAppsSecureChannelMock,\n    };\n  }\n\n  beforeEach(() => {\n    vi.clearAllMocks();\n    apiMock.getDeviceSessionState.mockReturnValue({\n      sessionStateType: DeviceSessionStateType.Connected,\n      deviceStatus: DeviceStatus.CONNECTED,\n    } as DeviceSessionState);\n  });\n\n  describe(\"success cases\", () => {\n    it(\"get metadata from device state\", () =>\n      new Promise<void>((resolve, reject) => {\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: {},\n        });\n\n        getDeviceMetadataMock.mockResolvedValueOnce({\n          firmwareVersion: FIRMWARE_VERSION,\n          firmwareUpdateContext: FIRMWARE_UPDATE,\n          customImage: CUSTOM_IMAGE,\n          applications: APPS,\n          applicationsUpdates: APPS_UPDATE,\n          installedLanguages: LANGUAGES,\n          catalog: CATALOG,\n        });\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Success\n          {\n            output: {\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n              applications: APPS,\n              applicationsUpdates: APPS_UPDATE,\n              installedLanguages: LANGUAGES,\n              catalog: CATALOG,\n            },\n            status: DeviceActionStatus.Completed,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n\n    it(\"fetch metadata without secure channel\", () =>\n      new Promise<void>((resolve, reject) => {\n        setupGoToDashboardMock();\n        setupListAppsMock([BTC_APP]);\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: {},\n        });\n\n        getDeviceMetadataMock.mockResolvedValueOnce(null);\n        getFirmwareMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              deviceVersion: DEVICE_VERSION,\n              firmware: FIRMWARE,\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n            },\n          }),\n        );\n        getApplicationsMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              applications: APPS,\n              applicationsUpdates: APPS_UPDATE,\n              installedLanguages: LANGUAGES,\n              catalog: CATALOG,\n            },\n          }),\n        );\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GoToDashboard\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetFirmwareMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // ListApps\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.AllowListApps,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetApplicationsMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Success\n          {\n            output: {\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n              applications: APPS,\n              applicationsUpdates: APPS_UPDATE,\n              installedLanguages: LANGUAGES,\n              catalog: CATALOG,\n            },\n            status: DeviceActionStatus.Completed,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n\n    it(\"fetch metadata with forced update\", () =>\n      new Promise<void>((resolve, reject) => {\n        setupGoToDashboardMock();\n        setupListAppsMock([BTC_APP]);\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: { forceUpdate: true },\n        });\n\n        getFirmwareMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              deviceVersion: DEVICE_VERSION,\n              firmware: FIRMWARE,\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n            },\n          }),\n        );\n        getApplicationsMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              applications: APPS,\n              applicationsUpdates: APPS_UPDATE,\n              installedLanguages: LANGUAGES,\n              catalog: CATALOG,\n            },\n          }),\n        );\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GoToDashboard\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetFirmwareMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // ListApps\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.AllowListApps,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetApplicationsMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Success\n          {\n            output: {\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n              applications: APPS,\n              applicationsUpdates: APPS_UPDATE,\n              installedLanguages: LANGUAGES,\n              catalog: CATALOG,\n            },\n            status: DeviceActionStatus.Completed,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n\n    it(\"fetch metadata with secure channel\", () =>\n      new Promise<void>((resolve, reject) => {\n        setupGoToDashboardMock();\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: { useSecureChannel: true },\n        });\n\n        getDeviceMetadataMock.mockResolvedValueOnce(null);\n        getFirmwareMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              deviceVersion: DEVICE_VERSION,\n              firmware: FIRMWARE,\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n            },\n          }),\n        );\n        listAppsSecureChannelMock.mockReturnValue(\n          of(\n            {\n              type: SecureChannelEventType.Exchange,\n            },\n            {\n              type: SecureChannelEventType.PermissionRequested,\n            },\n            {\n              type: SecureChannelEventType.PermissionGranted,\n            },\n            {\n              type: SecureChannelEventType.Result,\n              payload: [\n                {\n                  flags: 123456,\n                  hash: \"hash_test\",\n                  hash_code_data: \"hash_code_data_test\",\n                  name: \"Bitcoin\",\n                },\n              ],\n            },\n          ),\n        );\n        getApplicationsMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              applications: APPS,\n              applicationsUpdates: APPS_UPDATE,\n              installedLanguages: LANGUAGES,\n              catalog: CATALOG,\n            },\n          }),\n        );\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GoToDashboard\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetFirmwareMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // ListAppsSecureChannel\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction:\n                UserInteractionRequired.AllowSecureConnection,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetApplicationsMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Success\n          {\n            output: {\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n              applications: APPS,\n              applicationsUpdates: APPS_UPDATE,\n              installedLanguages: LANGUAGES,\n              catalog: CATALOG,\n            },\n            status: DeviceActionStatus.Completed,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n\n    it(\"get metadata from device state with external dependencies\", () =>\n      new Promise<void>((resolve, reject) => {\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: {},\n        });\n\n        apiMock.getDeviceSessionState.mockReturnValue({\n          sessionStateType: DeviceSessionStateType.ReadyWithoutSecureChannel,\n          deviceStatus: DeviceStatus.CONNECTED,\n          firmwareVersion: {\n            metadata: FIRMWARE_VERSION,\n          } as unknown as FirmwareVersion,\n          firmwareUpdateContext: FIRMWARE_UPDATE,\n          customImage: CUSTOM_IMAGE,\n          installedApps: [APPS] as unknown as Application[],\n          appsUpdates: APPS_UPDATE,\n          installedLanguages: LANGUAGES,\n          catalog: CATALOG,\n        } as DeviceSessionState);\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Success\n          {\n            output: {\n              firmwareVersion: {\n                metadata: FIRMWARE_VERSION,\n              } as unknown as FirmwareVersion,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n              applications: [APPS] as unknown as Application[],\n              applicationsUpdates: APPS_UPDATE,\n              installedLanguages: LANGUAGES,\n              catalog: CATALOG,\n            },\n            status: DeviceActionStatus.Completed,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n  });\n\n  describe(\"Error cases\", () => {\n    it(\"error during GoToDashboard\", () =>\n      new Promise<void>((resolve, reject) => {\n        setupGoToDashboardMock(true);\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: {},\n        });\n\n        getDeviceMetadataMock.mockResolvedValueOnce(null);\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GoToDashboard\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Error\n          {\n            error: new UnknownDAError(\"GoToDashboard failed\"),\n            status: DeviceActionStatus.Error,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n\n    it(\"error during GetFirmwareMetadata\", () =>\n      new Promise<void>((resolve, reject) => {\n        setupGoToDashboardMock();\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: {},\n        });\n\n        getDeviceMetadataMock.mockResolvedValueOnce(null);\n        getFirmwareMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            error: new UnknownDeviceExchangeError(\"GetFirmwareMetadata failed\"),\n          }),\n        );\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GoToDashboard\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetFirmwareMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Error\n          {\n            error: new UnknownDeviceExchangeError(\"GetFirmwareMetadata failed\"),\n            status: DeviceActionStatus.Error,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n\n    it(\"error during ListApps\", () =>\n      new Promise<void>((resolve, reject) => {\n        setupGoToDashboardMock();\n        setupListAppsMock([], true);\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: {},\n        });\n\n        getDeviceMetadataMock.mockResolvedValueOnce(null);\n        getFirmwareMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              deviceVersion: DEVICE_VERSION,\n              firmware: FIRMWARE,\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n            },\n          }),\n        );\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GoToDashboard\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetFirmwareMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // ListApps\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.AllowListApps,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Error\n          {\n            error: new UnknownDAError(\"ListApps failed\"),\n            status: DeviceActionStatus.Error,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n\n    it(\"error during GetApplicationsMetadata\", () =>\n      new Promise<void>((resolve, reject) => {\n        setupGoToDashboardMock();\n        setupListAppsMock([BTC_APP]);\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: {},\n        });\n\n        getDeviceMetadataMock.mockResolvedValueOnce(null);\n        getFirmwareMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              deviceVersion: DEVICE_VERSION,\n              firmware: FIRMWARE,\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n            },\n          }),\n        );\n        getApplicationsMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            error: new UnknownDeviceExchangeError(\n              \"GetApplicationsMetadata failed\",\n            ),\n          }),\n        );\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GoToDashboard\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetFirmwareMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // ListApps\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.AllowListApps,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetApplicationsMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Error\n          {\n            error: new UnknownDeviceExchangeError(\n              \"GetApplicationsMetadata failed\",\n            ),\n            status: DeviceActionStatus.Error,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n\n    it(\"error during ListAppsSecureChannel\", () =>\n      new Promise<void>((resolve, reject) => {\n        setupGoToDashboardMock();\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: { useSecureChannel: true },\n        });\n\n        getDeviceMetadataMock.mockResolvedValueOnce(null);\n        getFirmwareMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              deviceVersion: DEVICE_VERSION,\n              firmware: FIRMWARE,\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n            },\n          }),\n        );\n        listAppsSecureChannelMock.mockReturnValue(\n          concat(\n            of({\n              type: SecureChannelEventType.Exchange,\n              payload: {\n                data: new Uint8Array([0x00, 0x01, 0x02, 0x03]),\n              } as SecureChannelEventPayload[\"Exchange\"],\n            }),\n            throwError(() => new UnknownDAError(\"Secure channel error\")),\n          ),\n        );\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GoToDashboard\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetFirmwareMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // ListAppsSecureChannel\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Error\n          {\n            error: new UnknownDAError(\"Secure channel error\"),\n            status: DeviceActionStatus.Error,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n  });\n});\n"],
  "mappings": "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",
  "names": ["concat", "of", "throwError", "CommandResultFactory", "DeviceStatus", "BTC_APP", "makeDeviceActionInternalApiMock", "setupGoToDashboardMock", "setupListAppsMock", "testDeviceActionStates", "DeviceActionStatus", "UserInteractionRequired", "UnknownDAError", "DeviceSessionStateType", "UnknownDeviceExchangeError", "SecureChannelEventType", "GetDeviceMetadataDeviceAction", "apiMock", "getDeviceMetadataMock", "getFirmwareMetadataMock", "getApplicationsMetadataMock", "listAppsSecureChannelMock", "DEVICE_VERSION", "FIRMWARE", "FIRMWARE_VERSION", "FIRMWARE_UPDATE", "CUSTOM_IMAGE", "APPS", "APPS_UPDATE", "LANGUAGES", "CATALOG", "extractDependenciesMock", "resolve", "reject", "deviceAction", "expectedStates"]
}
