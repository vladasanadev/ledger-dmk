import{CommandResultFactory as n,isSuccessCommandResult as u}from"../../command/model/CommandResult";import{ApduResponse as r}from"../../device-session/ApduResponse";import{BatteryStatusType as e,ChargingMode as R,GetBatteryStatusCommand as s}from"./GetBatteryStatusCommand";const d=Uint8Array.from([224,16,0,0,0]),i=Uint8Array.from([224,16,0,1,0]),x=Uint8Array.from([224,16,0,2,0]),S=Uint8Array.from([224,16,0,3,0]),m=Uint8Array.from([224,16,0,4,0]),o=Uint8Array.from([55,144,0]),T=Uint8Array.from([15,255,144,0]),c=Uint8Array.from([16,144,0]),A=Uint8Array.from([0,0,0,15,144,0]),p=Uint8Array.from([103,0]);describe("GetBatteryStatus",()=>{describe("name",()=>{it("should be 'getBatteryStatus'",()=>{const t=new s({statusType:e.BATTERY_PERCENTAGE});expect(t.name).toBe("getBatteryStatus")})}),describe("getApdu",()=>{it("should return the GetBatteryStatus APDU",()=>{expect(new s({statusType:e.BATTERY_PERCENTAGE}).getApdu().getRawApdu()).toStrictEqual(d),expect(new s({statusType:e.BATTERY_VOLTAGE}).getApdu().getRawApdu()).toStrictEqual(i),expect(new s({statusType:e.BATTERY_TEMPERATURE}).getApdu().getRawApdu()).toStrictEqual(x),expect(new s({statusType:e.BATTERY_CURRENT}).getApdu().getRawApdu()).toStrictEqual(S),expect(new s({statusType:e.BATTERY_FLAGS}).getApdu().getRawApdu()).toStrictEqual(m)})}),describe("parseResponse",()=>{it("should parse the response when querying percentage",()=>{const t=new r({statusCode:o.slice(-2),data:o.slice(0,-2)}),a=new s({statusType:e.BATTERY_PERCENTAGE}).parseResponse(t);expect(a).toStrictEqual(n({data:55}))}),it("should parse the response when querying voltage",()=>{const t=new r({statusCode:T.slice(-2),data:T.slice(0,-2)}),a=new s({statusType:e.BATTERY_VOLTAGE}).parseResponse(t);expect(a).toStrictEqual(n({data:4095}))}),it("should parse the response when querying temperature",()=>{const t=new r({statusCode:c.slice(-2),data:c.slice(0,-2)}),a=new s({statusType:e.BATTERY_TEMPERATURE}).parseResponse(t);expect(a).toStrictEqual(n({data:16}))}),it("should parse the response when querying flags",()=>{const t=new r({statusCode:A.slice(-2),data:A.slice(0,-2)}),a=new s({statusType:e.BATTERY_FLAGS}).parseResponse(t);expect(a).toStrictEqual(n({data:{charging:R.USB,issueCharging:!1,issueTemperature:!1,issueBattery:!1}}))}),it("should return an error if the response returned unsupported format",()=>{const t=new r({statusCode:p.slice(-2),data:p.slice(0,-2)}),a=new s({statusType:e.BATTERY_PERCENTAGE}).parseResponse(t);expect(u(a)).toBeFalsy()})})});
//# sourceMappingURL=GetBatteryStatusCommand.test.js.map
