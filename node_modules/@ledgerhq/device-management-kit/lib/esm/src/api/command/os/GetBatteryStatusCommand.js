import{ApduBuilder as u}from"../../apdu/utils/ApduBuilder";import{ApduParser as p}from"../../apdu/utils/ApduParser";import{InvalidBatteryDataError as a,InvalidBatteryStatusTypeError as E}from"../../command/Errors";import{CommandResultFactory as r}from"../../command/model/CommandResult";var A=(t=>(t[t.BATTERY_PERCENTAGE=0]="BATTERY_PERCENTAGE",t[t.BATTERY_VOLTAGE=1]="BATTERY_VOLTAGE",t[t.BATTERY_TEMPERATURE=2]="BATTERY_TEMPERATURE",t[t.BATTERY_CURRENT=3]="BATTERY_CURRENT",t[t.BATTERY_FLAGS=4]="BATTERY_FLAGS",t))(A||{}),i=(e=>(e[e.NONE=0]="NONE",e[e.USB=1]="USB",e[e.QI=2]="QI",e))(i||{});class c{name="getBatteryStatus";args;constructor(n){this.args=n}getApdu(){const n={cla:224,ins:16,p1:0,p2:this.args.statusType};return new u(n).build()}parseResponse(n){const s=new p(n);switch(this.args.statusType){case 0:{const e=s.extract8BitUInt();return e===void 0?r({error:new a("Cannot parse APDU response")}):r({data:e>100?-1:e})}case 1:{const e=s.extract16BitUInt();return e===void 0?r({error:new a("Cannot parse APDU response")}):r({data:e})}case 2:case 3:{const e=s.extract8BitUInt();return e===void 0?r({error:new a("Cannot parse APDU response")}):r({data:e<<24>>24})}case 4:{const e=s.extract32BitUInt();if(e===void 0)return r({error:new a("Cannot parse APDU response")});const o=!!(e&8),t=!o&&!!(e&1);return r({data:{charging:t?2:o?1:0,issueCharging:!!(e&16),issueTemperature:!!(e&32),issueBattery:!!(e&128)}})}default:return r({error:new E("One or some case(s) not covered")})}}}export{A as BatteryStatusType,i as ChargingMode,c as GetBatteryStatusCommand};
//# sourceMappingURL=GetBatteryStatusCommand.js.map
