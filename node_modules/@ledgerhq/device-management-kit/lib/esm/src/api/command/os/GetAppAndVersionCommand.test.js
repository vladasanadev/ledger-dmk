import{CommandResultFactory as r,isSuccessCommandResult as a}from"../../command/model/CommandResult";import{ApduResponse as o}from"../../device-session/ApduResponse";import{GetAppAndVersionCommand as i}from"./GetAppAndVersionCommand";const m=Uint8Array.from([176,1,0,0,0]),x=Uint8Array.from([1,5,66,79,76,79,83,9,49,46,52,46,48,45,114,99,50,144,0]),p=Uint8Array.from([1,7,66,105,116,99,111,105,110,11,50,46,49,46,53,45,97,108,112,104,97,1,2,144,0]),c=Uint8Array.from([103,0]),d=Uint8Array.from([4,144,0]);describe("GetAppAndVersionCommand",()=>{let t;beforeEach(()=>{t=new i}),describe("name",()=>{it("should be 'getAppAndVersion'",()=>{expect(t.name).toBe("getAppAndVersion")})}),describe("getApdu",()=>{it("should return the GetAppAndVersion APDU",()=>{const e=t.getApdu();expect(e.getRawApdu()).toStrictEqual(m)})}),describe("parseResponse",()=>{it("should parse the response when launching OS (dashboard)",()=>{const e=new o({statusCode:x.slice(-2),data:x.slice(0,-2)}),s=t.parseResponse(e),n=r({data:{name:"BOLOS",version:"1.4.0-rc2"}});expect(s).toStrictEqual(n)}),it("should parse the response when launching App",()=>{const e=new o({statusCode:p.slice(-2),data:p.slice(0,-2)}),s=t.parseResponse(e),n=r({data:{name:"Bitcoin",version:"2.1.5-alpha",flags:Uint8Array.from([2])}});expect(s).toStrictEqual(n)}),it("should throw an error if the command failed",()=>{const e=new o({statusCode:c.slice(-2),data:c.slice(0,-2)}),s=t.parseResponse(e);expect(a(s)).toBeFalsy()}),it("should return an error if the response returned unsupported format",()=>{const e=new o({statusCode:d.slice(-2),data:d.slice(0,-2)}),s=t.parseResponse(e);expect(a(s)).toBeFalsy()})})});
//# sourceMappingURL=GetAppAndVersionCommand.test.js.map
