{
  "version": 3,
  "sources": ["../../../../../../src/api/command/utils/CommandUtils.test.ts"],
  "sourcesContent": ["import { CloseAppCommand } from \"@api/command/os/CloseAppCommand\";\nimport { GetAppAndVersionCommand } from \"@api/command/os/GetAppAndVersionCommand\";\nimport { OpenAppCommand } from \"@api/command/os/OpenAppCommand\";\nimport { ApduResponse } from \"@api/device-session/ApduResponse\";\n\nimport { CommandUtils } from \"./CommandUtils\";\n\ndescribe(\"CommandUtils\", () => {\n  describe(\"static isSuccessResponse\", () => {\n    it(\"should return true if the status code is 0x9000\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x90, 0x00]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isSuccessResponse(response)).toBe(true);\n    });\n\n    it(\"should return false if the status code is not 0x9000\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x6e, 0x80]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isSuccessResponse(response)).toBe(false);\n    });\n\n    it(\"should return false if the status code is not 2 bytes long\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x55]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isSuccessResponse(response)).toBe(false);\n    });\n  });\n\n  describe(\"static isValidStatusCode\", () => {\n    it(\"should return true if the status code is 2 bytes long\", () => {\n      const statusCode = Uint8Array.from([0x90, 0x00]);\n\n      expect(CommandUtils.isValidStatusCode(statusCode)).toBe(true);\n    });\n\n    it(\"should return false if the status code is not 2 bytes long\", () => {\n      const statusCode = Uint8Array.from([0x90]);\n\n      expect(CommandUtils.isValidStatusCode(statusCode)).toBe(false);\n    });\n  });\n\n  describe(\"static isLockedDeviceResponse\", () => {\n    it(\"should return true if the status code is 0x5515\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x55, 0x15]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isLockedDeviceResponse(response)).toBe(true);\n    });\n\n    it(\"should return true if the status code is 0x6982\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x69, 0x82]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isLockedDeviceResponse(response)).toBe(true);\n    });\n\n    it(\"should return true if the status code is 0x5303\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x53, 0x03]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isLockedDeviceResponse(response)).toBe(true);\n    });\n\n    it(\"should return false if the status code is not 0x5515\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x90, 0x00]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isLockedDeviceResponse(response)).toBe(false);\n    });\n\n    it(\"should return false if the status code is not 2 bytes long\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x90]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isLockedDeviceResponse(response)).toBe(false);\n    });\n  });\n\n  describe(\"static isRefusedByUser\", () => {\n    it(\"should return true if the status code is 0x5501\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x55, 0x01]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isRefusedByUser(response)).toBe(true);\n    });\n\n    it(\"should return true if the status code is 0x6985\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x69, 0x85]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isRefusedByUser(response)).toBe(true);\n    });\n\n    it(\"should return false if the status code is not 0x5501\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x90, 0x00]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isRefusedByUser(response)).toBe(false);\n    });\n  });\n\n  describe(\"static isAppAlreadyInstalled\", () => {\n    it(\"should return true if the status code is 0x6a80\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x6a, 0x80]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isAppAlreadyInstalled(response)).toBe(true);\n    });\n\n    it(\"should return true if the status code is 0x6a81\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x6a, 0x81]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isAppAlreadyInstalled(response)).toBe(true);\n    });\n\n    it(\"should return true if the status code is 0x6a8e\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x6a, 0x8e]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isAppAlreadyInstalled(response)).toBe(true);\n    });\n\n    it(\"should return true if the status code is 0x6a8f\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x6a, 0x8f]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isAppAlreadyInstalled(response)).toBe(true);\n    });\n\n    it(\"should return false if the status code is not 0x6a80\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x90, 0x00]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isAppAlreadyInstalled(response)).toBe(false);\n    });\n  });\n\n  describe(\"static isOutOfMemory\", () => {\n    it(\"should return true if the status code is 0x6a84\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x6a, 0x84]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isOutOfMemory(response)).toBe(true);\n    });\n\n    it(\"should return true if the status code is 0x6a85\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x6a, 0x85]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isOutOfMemory(response)).toBe(true);\n    });\n\n    it(\"should return true if the status code is 0x5102\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x51, 0x02]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isOutOfMemory(response)).toBe(true);\n    });\n\n    it(\"should return true if the status code is 0x5103\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x51, 0x03]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isOutOfMemory(response)).toBe(true);\n    });\n\n    it(\"should return false if the status code is not 0x6a84\", () => {\n      const response = new ApduResponse({\n        statusCode: Uint8Array.from([0x90, 0x00]),\n        data: Uint8Array.from([]),\n      });\n\n      expect(CommandUtils.isOutOfMemory(response)).toBe(false);\n    });\n  });\n\n  describe(\"static isApduThatTriggersDisconnection\", () => {\n    it(\"should return true if the APDU is openApp\", () => {\n      const apdu = new OpenAppCommand({ appName: \"test\" })\n        .getApdu()\n        .getRawApdu();\n\n      expect(CommandUtils.isApduThatTriggersDisconnection(apdu)).toBe(true);\n    });\n\n    it(\"should return true if the APDU is closeApp\", () => {\n      const apdu = new CloseAppCommand().getApdu().getRawApdu();\n\n      expect(CommandUtils.isApduThatTriggersDisconnection(apdu)).toBe(true);\n    });\n\n    it(\"should return false if the APDU is not a known one\", () => {\n      const apdu = new GetAppAndVersionCommand().getApdu().getRawApdu();\n\n      expect(CommandUtils.isApduThatTriggersDisconnection(apdu)).toBe(false);\n    });\n  });\n});\n"],
  "mappings": "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",
  "names": ["CloseAppCommand", "GetAppAndVersionCommand", "OpenAppCommand", "ApduResponse", "CommandUtils", "response", "statusCode", "apdu"]
}
