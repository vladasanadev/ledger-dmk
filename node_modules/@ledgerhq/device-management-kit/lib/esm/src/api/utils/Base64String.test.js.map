{
  "version": 3,
  "sources": ["../../../../../src/api/utils/Base64String.test.ts"],
  "sourcesContent": ["import { base64StringToBuffer, isBase64String } from \"./Base64String\";\n\ndescribe(\"Base64String\", () => {\n  describe(\"isBase64String function\", () => {\n    it(\"should return true if the value is a valid base64 string\", () => {\n      // GIVEN\n      const value = \"Zmlyc3QgdG/zdGluZyBz+HI9\";\n\n      // WHEN\n      const result = isBase64String(value);\n\n      // THEN\n      expect(result).toBeTruthy();\n    });\n\n    it(\"should return true if the value is a valid base64 string, one padding\", () => {\n      // GIVEN\n      const value = \"Zmlyc3QgdGVzdGluZyBzdHI=\";\n\n      // WHEN\n      const result = isBase64String(value);\n\n      // THEN\n      expect(result).toBeTruthy();\n    });\n\n    it(\"should return true if the value is a valid base64 string, two paddings\", () => {\n      // GIVEN\n      const value = \"Zmlyc3QgdGVzdGluZyBzdH==\";\n\n      // WHEN\n      const result = isBase64String(value);\n\n      // THEN\n      expect(result).toBeTruthy();\n    });\n\n    it(\"should return true for an empty string\", () => {\n      // GIVEN\n      const value = \"\";\n\n      // WHEN\n      const result = isBase64String(value);\n\n      // THEN\n      expect(result).toBeTruthy();\n    });\n\n    it(\"should return false for an invalid base64 string\", () => {\n      // GIVEN\n      const value = \"invalid base64 string\";\n\n      // WHEN\n      const result = isBase64String(value);\n\n      // THEN\n      expect(result).toBeFalsy();\n    });\n\n    it(\"should return false with 3 paddings\", () => {\n      // GIVEN\n      const value = \"Zmlyc3QgdGVzdGluZyBzd===\";\n\n      // WHEN\n      const result = isBase64String(value);\n\n      // THEN\n      expect(result).toBeFalsy();\n    });\n\n    it(\"should return false on incomplete string (not multiple of 4)\", () => {\n      // GIVEN\n      const value = \"Zmlyc3QgdGVzdGluZyBzdHI\";\n\n      // WHEN\n      const result = isBase64String(value);\n\n      // THEN\n      expect(result).toBeFalsy();\n    });\n  });\n\n  describe(\"base64StringToBuffer function\", () => {\n    beforeEach(() => {\n      vi.resetAllMocks();\n    });\n\n    it(\"should convert empty input to empty buffer\", () => {\n      // GIVEN\n      const value = \"\";\n\n      // WHEN\n      const result = base64StringToBuffer(value);\n\n      // THEN\n      expect(result).toStrictEqual(new Uint8Array());\n    });\n\n    it(\"invalid base64 string converted to null\", () => {\n      // GIVEN\n      const value = \"invalid string\";\n\n      // WHEN\n      const result = base64StringToBuffer(value);\n\n      // THEN\n      expect(result).toStrictEqual(null);\n    });\n\n    it(\"should convert a base64 string to a buffer using browser's atob\", () => {\n      // GIVEN\n      const value = \"Zmlyc3QgdGVzdCBzdHJpbmc=\";\n\n      // WHEN\n      const result = base64StringToBuffer(value);\n\n      // THEN\n      expect(result).toStrictEqual(\n        Uint8Array.from([\n          0x66, 0x69, 0x72, 0x73, 0x74, 0x20, 0x74, 0x65, 0x73, 0x74, 0x20,\n          0x73, 0x74, 0x72, 0x69, 0x6e, 0x67,\n        ]),\n      );\n    });\n\n    it(\"should convert a base64 string to a buffer using Buffer\", () => {\n      // GIVEN\n      vi.spyOn(global, \"atob\").mockImplementation(() => {\n        throw new Error(\"atob is not defined\");\n      });\n      const value = \"Zmlyc3QgdGVzdCBzdHJpbmc=\";\n\n      // WHEN\n      const result = base64StringToBuffer(value);\n\n      // THEN\n      expect(result).toStrictEqual(\n        Uint8Array.from([\n          0x66, 0x69, 0x72, 0x73, 0x74, 0x20, 0x74, 0x65, 0x73, 0x74, 0x20,\n          0x73, 0x74, 0x72, 0x69, 0x6e, 0x67,\n        ]),\n      );\n    });\n  });\n});\n"],
  "mappings": "AAAA,OAAS,wBAAAA,EAAsB,kBAAAC,MAAsB,iBAErD,SAAS,eAAgB,IAAM,CAC7B,SAAS,0BAA2B,IAAM,CACxC,GAAG,2DAA4D,IAAM,CAKnE,MAAMC,EAASD,EAHD,0BAGqB,EAGnC,OAAOC,CAAM,EAAE,WAAW,CAC5B,CAAC,EAED,GAAG,wEAAyE,IAAM,CAKhF,MAAMA,EAASD,EAHD,0BAGqB,EAGnC,OAAOC,CAAM,EAAE,WAAW,CAC5B,CAAC,EAED,GAAG,yEAA0E,IAAM,CAKjF,MAAMA,EAASD,EAHD,0BAGqB,EAGnC,OAAOC,CAAM,EAAE,WAAW,CAC5B,CAAC,EAED,GAAG,yCAA0C,IAAM,CAKjD,MAAMA,EAASD,EAHD,EAGqB,EAGnC,OAAOC,CAAM,EAAE,WAAW,CAC5B,CAAC,EAED,GAAG,mDAAoD,IAAM,CAK3D,MAAMA,EAASD,EAHD,uBAGqB,EAGnC,OAAOC,CAAM,EAAE,UAAU,CAC3B,CAAC,EAED,GAAG,sCAAuC,IAAM,CAK9C,MAAMA,EAASD,EAHD,0BAGqB,EAGnC,OAAOC,CAAM,EAAE,UAAU,CAC3B,CAAC,EAED,GAAG,+DAAgE,IAAM,CAKvE,MAAMA,EAASD,EAHD,yBAGqB,EAGnC,OAAOC,CAAM,EAAE,UAAU,CAC3B,CAAC,CACH,CAAC,EAED,SAAS,gCAAiC,IAAM,CAC9C,WAAW,IAAM,CACf,GAAG,cAAc,CACnB,CAAC,EAED,GAAG,6CAA8C,IAAM,CAKrD,MAAMA,EAASF,EAHD,EAG2B,EAGzC,OAAOE,CAAM,EAAE,cAAc,IAAI,UAAY,CAC/C,CAAC,EAED,GAAG,0CAA2C,IAAM,CAKlD,MAAMA,EAASF,EAHD,gBAG2B,EAGzC,OAAOE,CAAM,EAAE,cAAc,IAAI,CACnC,CAAC,EAED,GAAG,kEAAmE,IAAM,CAK1E,MAAMA,EAASF,EAHD,0BAG2B,EAGzC,OAAOE,CAAM,EAAE,cACb,WAAW,KAAK,CACd,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAC5D,IAAM,IAAM,IAAM,IAAM,IAAM,GAChC,CAAC,CACH,CACF,CAAC,EAED,GAAG,0DAA2D,IAAM,CAElE,GAAG,MAAM,OAAQ,MAAM,EAAE,mBAAmB,IAAM,CAChD,MAAM,IAAI,MAAM,qBAAqB,CACvC,CAAC,EAID,MAAMA,EAASF,EAHD,0BAG2B,EAGzC,OAAOE,CAAM,EAAE,cACb,WAAW,KAAK,CACd,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAC5D,IAAM,IAAM,IAAM,IAAM,IAAM,GAChC,CAAC,CACH,CACF,CAAC,CACH,CAAC,CACH,CAAC",
  "names": ["base64StringToBuffer", "isBase64String", "result"]
}
