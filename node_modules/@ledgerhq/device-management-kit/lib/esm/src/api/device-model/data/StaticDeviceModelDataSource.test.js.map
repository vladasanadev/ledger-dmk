{
  "version": 3,
  "sources": ["../../../../../../src/api/device-model/data/StaticDeviceModelDataSource.test.ts"],
  "sourcesContent": ["import { DeviceModelId } from \"@api/device/DeviceModel\";\nimport { BleDeviceInfos } from \"@api/device-model/model/BleDeviceInfos\";\n\nimport { StaticDeviceModelDataSource } from \"./StaticDeviceModelDataSource\";\n\ndescribe(\"StaticDeviceModelDataSource\", () => {\n  describe(\"getAllDeviceModels\", () => {\n    it(\"should return all device models\", () => {\n      const dataSource = new StaticDeviceModelDataSource();\n      const deviceModels = dataSource.getAllDeviceModels();\n\n      expect(deviceModels.length).toEqual(6);\n      expect(deviceModels).toContainEqual(\n        expect.objectContaining({ id: DeviceModelId.APEX }),\n      );\n      expect(deviceModels).toContainEqual(\n        expect.objectContaining({ id: DeviceModelId.NANO_S }),\n      );\n      expect(deviceModels).toContainEqual(\n        expect.objectContaining({ id: DeviceModelId.NANO_SP }),\n      );\n      expect(deviceModels).toContainEqual(\n        expect.objectContaining({ id: DeviceModelId.NANO_X }),\n      );\n      expect(deviceModels).toContainEqual(\n        expect.objectContaining({ id: DeviceModelId.STAX }),\n      );\n      expect(deviceModels).toContainEqual(\n        expect.objectContaining({ id: DeviceModelId.FLEX }),\n      );\n    });\n  });\n\n  describe(\"getDeviceModel\", () => {\n    it(\"should return the associated device model\", () => {\n      const dataSource = new StaticDeviceModelDataSource();\n\n      const deviceModel1 = dataSource.getDeviceModel({\n        id: DeviceModelId.NANO_S,\n      });\n      expect(deviceModel1).toEqual(\n        expect.objectContaining({ id: DeviceModelId.NANO_S }),\n      );\n\n      const deviceModel2 = dataSource.getDeviceModel({\n        id: DeviceModelId.NANO_SP,\n      });\n      expect(deviceModel2).toEqual(\n        expect.objectContaining({ id: DeviceModelId.NANO_SP }),\n      );\n\n      const deviceModel3 = dataSource.getDeviceModel({\n        id: DeviceModelId.NANO_X,\n      });\n      expect(deviceModel3).toEqual(\n        expect.objectContaining({ id: DeviceModelId.NANO_X }),\n      );\n\n      const deviceModel4 = dataSource.getDeviceModel({\n        id: DeviceModelId.STAX,\n      });\n      expect(deviceModel4).toEqual(\n        expect.objectContaining({ id: DeviceModelId.STAX }),\n      );\n\n      const deviceModel5 = dataSource.getDeviceModel({\n        id: DeviceModelId.FLEX,\n      });\n      expect(deviceModel5).toEqual(\n        expect.objectContaining({ id: DeviceModelId.FLEX }),\n      );\n    });\n  });\n\n  describe(\"filterDeviceModels\", () => {\n    it(\"should return the device models that match the given single parameter\", () => {\n      const dataSource = new StaticDeviceModelDataSource();\n\n      const deviceModels1 = dataSource.filterDeviceModels({ usbOnly: true });\n      expect(deviceModels1.length).toEqual(2);\n      expect(deviceModels1).toContainEqual(\n        expect.objectContaining({ id: DeviceModelId.NANO_SP }),\n      );\n      expect(deviceModels1).toContainEqual(\n        expect.objectContaining({ id: DeviceModelId.NANO_S }),\n      );\n\n      const deviceModels2 = dataSource.filterDeviceModels({\n        usbProductId: 0x10,\n      });\n      expect(deviceModels2.length).toEqual(1);\n      expect(deviceModels2[0]).toEqual(\n        expect.objectContaining({ id: DeviceModelId.NANO_S }),\n      );\n\n      const deviceModels3 = dataSource.filterDeviceModels({\n        usbProductId: 0x40,\n      });\n      expect(deviceModels3.length).toEqual(1);\n      expect(deviceModels3[0]).toEqual(\n        expect.objectContaining({ id: DeviceModelId.NANO_X }),\n      );\n\n      const deviceModels4 = dataSource.filterDeviceModels({\n        usbProductId: 0x50,\n      });\n      expect(deviceModels4.length).toEqual(1);\n      expect(deviceModels4[0]).toEqual(\n        expect.objectContaining({ id: DeviceModelId.NANO_SP }),\n      );\n\n      const deviceModels5 = dataSource.filterDeviceModels({\n        usbProductId: 0x60,\n      });\n      expect(deviceModels5.length).toEqual(1);\n      expect(deviceModels5[0]).toEqual(\n        expect.objectContaining({ id: DeviceModelId.STAX }),\n      );\n\n      const deviceModels6 = dataSource.filterDeviceModels({\n        usbProductId: 0x00,\n      });\n      expect(deviceModels6.length).toEqual(0);\n    });\n\n    it(\"should return the device models that match the given multiple parameters\", () => {\n      const dataSource = new StaticDeviceModelDataSource();\n\n      const deviceModels1 = dataSource.filterDeviceModels({\n        usbOnly: false,\n        usbProductId: 0x40,\n      });\n      expect(deviceModels1.length).toEqual(1);\n      expect(deviceModels1[0]).toEqual(\n        expect.objectContaining({ id: DeviceModelId.NANO_X }),\n      );\n\n      const deviceModels2 = dataSource.filterDeviceModels({\n        usbOnly: true,\n        usbProductId: 0x50,\n      });\n      expect(deviceModels2.length).toEqual(1);\n      expect(deviceModels2[0]).toEqual(\n        expect.objectContaining({ id: DeviceModelId.NANO_SP }),\n      );\n\n      // Nano S is usbOnly\n      const deviceModels3 = dataSource.filterDeviceModels({\n        usbOnly: false,\n        usbProductId: 0x10,\n      });\n      expect(deviceModels3.length).toEqual(0);\n    });\n  });\n  describe(\"getBluetoothServicesInfos\", () => {\n    it(\"should return the ble service infos record\", () => {\n      // given\n      const dataSource = new StaticDeviceModelDataSource();\n      // when\n      const bleServiceInfos = dataSource.getBluetoothServicesInfos();\n      // then\n      expect(bleServiceInfos).toStrictEqual({\n        \"13d63400-2c97-0004-0000-4c6564676572\": new BleDeviceInfos(\n          dataSource.getDeviceModel({ id: DeviceModelId.NANO_X }),\n          \"13d63400-2c97-0004-0000-4c6564676572\",\n          \"13d63400-2c97-0004-0002-4c6564676572\",\n          \"13d63400-2c97-0004-0003-4c6564676572\",\n          \"13d63400-2c97-0004-0001-4c6564676572\",\n        ),\n        \"13d63400-2c97-6004-0000-4c6564676572\": new BleDeviceInfos(\n          dataSource.getDeviceModel({ id: DeviceModelId.STAX }),\n          \"13d63400-2c97-6004-0000-4c6564676572\",\n          \"13d63400-2c97-6004-0002-4c6564676572\",\n          \"13d63400-2c97-6004-0003-4c6564676572\",\n          \"13d63400-2c97-6004-0001-4c6564676572\",\n        ),\n        \"13d63400-2c97-3004-0000-4c6564676572\": new BleDeviceInfos(\n          dataSource.getDeviceModel({ id: DeviceModelId.FLEX }),\n          \"13d63400-2c97-3004-0000-4c6564676572\",\n          \"13d63400-2c97-3004-0002-4c6564676572\",\n          \"13d63400-2c97-3004-0003-4c6564676572\",\n          \"13d63400-2c97-3004-0001-4c6564676572\",\n        ),\n        \"13d63400-2c97-8004-0000-4c6564676572\": new BleDeviceInfos(\n          dataSource.getDeviceModel({ id: DeviceModelId.APEX }),\n          \"13d63400-2c97-8004-0000-4c6564676572\",\n          \"13d63400-2c97-8004-0002-4c6564676572\",\n          \"13d63400-2c97-8004-0003-4c6564676572\",\n          \"13d63400-2c97-8004-0001-4c6564676572\",\n        ),\n      });\n    });\n  });\n  describe(\"getBluetoothServices\", () => {\n    it(\"should return the bluetooth services\", () => {\n      // given\n      const dataSource = new StaticDeviceModelDataSource();\n      // when\n      const bleServices = dataSource.getBluetoothServices();\n      // then\n      expect(bleServices).toStrictEqual([\n        \"13d63400-2c97-0004-0000-4c6564676572\",\n        \"13d63400-2c97-6004-0000-4c6564676572\",\n        \"13d63400-2c97-3004-0000-4c6564676572\",\n        \"13d63400-2c97-8004-0000-4c6564676572\",\n      ]);\n    });\n  });\n\n  describe(\"getBlockSize\", () => {\n    const testData: Record<\n      DeviceModelId,\n      Array<{ firmwareVersion: string; expectedBlockSize: number }>\n    > = {\n      [DeviceModelId.NANO_S]: [\n        { firmwareVersion: \"1.0.0\", expectedBlockSize: 4 * 1024 },\n        { firmwareVersion: \"1.0.0-rc1\", expectedBlockSize: 4 * 1024 },\n        { firmwareVersion: \"2.0.0\", expectedBlockSize: 2 * 1024 },\n        { firmwareVersion: \"2.0.0-rc1\", expectedBlockSize: 2 * 1024 },\n      ],\n      [DeviceModelId.NANO_SP]: [\n        { firmwareVersion: \"1.0.0\", expectedBlockSize: 32 },\n      ],\n      [DeviceModelId.NANO_X]: [\n        { firmwareVersion: \"1.0.0\", expectedBlockSize: 4 * 1024 },\n      ],\n      [DeviceModelId.STAX]: [\n        { firmwareVersion: \"1.0.0\", expectedBlockSize: 32 },\n      ],\n      [DeviceModelId.FLEX]: [\n        { firmwareVersion: \"1.0.0\", expectedBlockSize: 32 },\n      ],\n      [DeviceModelId.APEX]: [\n        { firmwareVersion: \"1.0.0\", expectedBlockSize: 32 },\n      ],\n    };\n\n    describe.each(Object.entries(testData))(\n      \"Device Model: %s\",\n      (deviceModelId, scenarios) => {\n        it.each(scenarios)(\n          \"should return $expectedBlockSize for firmware version $firmwareVersion\",\n          ({ firmwareVersion, expectedBlockSize }) => {\n            const deviceModel =\n              new StaticDeviceModelDataSource().getDeviceModel({\n                id: deviceModelId as DeviceModelId,\n              });\n            expect(deviceModel.getBlockSize({ firmwareVersion })).toBe(\n              expectedBlockSize,\n            );\n          },\n        );\n      },\n    );\n  });\n});\n"],
  "mappings": "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",
  "names": ["DeviceModelId", "BleDeviceInfos", "StaticDeviceModelDataSource", "deviceModels", "dataSource", "deviceModel1", "deviceModel2", "deviceModel3", "deviceModel4", "deviceModel5", "deviceModels1", "deviceModels2", "deviceModels3", "deviceModels4", "deviceModels5", "deviceModels6", "bleServiceInfos", "bleServices", "testData", "deviceModelId", "scenarios", "firmwareVersion", "expectedBlockSize", "deviceModel"]
}
