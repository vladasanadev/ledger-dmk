import{Maybe as d}from"purify-ts";import{of as p}from"rxjs";import{DeviceModel as v}from"../../../api/device/DeviceModel";import{TransportMock as m}from"../../../api/transport/model/__mocks__/TransportMock";import{DefaultTransportService as l}from"../../transport/service/DefaultTransportService";import{StartDiscoveringUseCase as D}from"./StartDiscoveringUseCase";vi.mock("@internal/transport/service/DefaultTransportService");let r,o;describe("StartDiscoveringUseCase",()=>{const s={id:"internal-discovered-device-id",deviceModel:{id:"nanoSP",productName:"productName"},transport:"USB",rssi:void 0};beforeEach(()=>{r=new m,o=new l}),afterEach(()=>{vi.restoreAllMocks()}),test("If connect use case encounter an error, return it",()=>new Promise((c,t)=>{const i=vi.fn(()=>p(s));vi.spyOn(r,"startDiscovering").mockImplementation(i),vi.spyOn(o,"getTransport").mockReturnValue(d.of(r));const n=new D(o).execute({transport:"USB"});expect(i).toHaveBeenCalled(),n.subscribe({next:e=>{try{expect(e).toStrictEqual({id:"internal-discovered-device-id",transport:"USB",name:"productName",deviceModel:new v({id:"internal-discovered-device-id",model:"nanoSP",name:"productName"}),rssi:void 0}),c()}catch(a){t(a)}},error:e=>{t(e)}})}))});
//# sourceMappingURL=StartDiscoveringUseCase.test.js.map
