import{ConnectedDevice as f}from"../../../api/transport/model/ConnectedDevice";import{connectedDeviceStubBuilder as D}from"../../../api/transport/model/TransportConnectedDevice.stub";import{DEVICE_SESSION_REFRESHER_DEFAULT_OPTIONS as d}from"../../device-session/data/DeviceSessionRefresherConst";import{deviceSessionStubBuilder as g}from"../../device-session/model/DeviceSession.stub";import{DefaultDeviceSessionService as C}from"../../device-session/service/DefaultDeviceSessionService";import{ListenToConnectedDeviceUseCase as b}from"../../discovery/use-case/ListenToConnectedDeviceUseCase";import{DefaultLoggerPublisherService as h}from"../../logger-publisher/service/DefaultLoggerPublisherService";import{AxiosManagerApiDataSource as A}from"../../manager-api/data/AxiosManagerApiDataSource";import{DefaultManagerApiService as w}from"../../manager-api/service/DefaultManagerApiService";import{DefaultSecureChannelDataSource as E}from"../../secure-channel/data/DefaultSecureChannelDataSource";import{DefaultSecureChannelService as y}from"../../secure-channel/service/DefaultSecureChannelService";vi.mock("@internal/manager-api/data/AxiosManagerApiDataSource");let e,r,t,n,c,a;const s="test-list-connected-device-session-id";describe("ListenToConnectedDevice",()=>{beforeEach(()=>{e=new h([],"listen-to-connected-device-use-case"),t=new A({}),n=new w(t),c=new E({}),a=new y(c),r=new C(()=>e)}),it("should emit an instance of ConnectedDevice",()=>new Promise((m,S)=>{const i=D({id:"test-list-connected-device-id"}),o=g({id:s,connectedDevice:i},()=>e,n,a,d),p=new b(r,()=>e).execute().subscribe({next(l){try{expect(l).toEqual(new f({transportConnectedDevice:i,sessionId:s})),u()}catch(v){S(v)}}});function u(){p.unsubscribe(),o.close(),m()}r.addDeviceSession(o)}))});
//# sourceMappingURL=ListenToConnectedDeviceUseCase.test.js.map
