{
  "version": 3,
  "sources": ["../../../../../../src/internal/discovery/di/discoveryModule.test.ts"],
  "sourcesContent": ["import { Container } from \"inversify\";\n\nimport { TransportMock } from \"@api/transport/model/__mocks__/TransportMock\";\nimport { type DmkConfig, type Transport } from \"@api/types\";\nimport { deviceModelModuleFactory } from \"@internal/device-model/di/deviceModelModule\";\nimport { deviceSessionModuleFactory } from \"@internal/device-session/di/deviceSessionModule\";\nimport { ConnectUseCase } from \"@internal/discovery/use-case/ConnectUseCase\";\nimport { DisconnectUseCase } from \"@internal/discovery/use-case/DisconnectUseCase\";\nimport { ListConnectedDevicesUseCase } from \"@internal/discovery/use-case/ListConnectedDevicesUseCase\";\nimport { ListenToAvailableDevicesUseCase } from \"@internal/discovery/use-case/ListenToAvailableDevicesUseCase\";\nimport { ReconnectUseCase } from \"@internal/discovery/use-case/ReconnectUseCase\";\nimport { StartDiscoveringUseCase } from \"@internal/discovery/use-case/StartDiscoveringUseCase\";\nimport { StopDiscoveringUseCase } from \"@internal/discovery/use-case/StopDiscoveringUseCase\";\nimport { loggerModuleFactory } from \"@internal/logger-publisher/di/loggerModule\";\nimport { managerApiModuleFactory } from \"@internal/manager-api/di/managerApiModule\";\nimport { secureChannelModuleFactory } from \"@internal/secure-channel/di/secureChannelModule\";\nimport { transportModuleFactory } from \"@internal/transport/di/transportModule\";\n\nimport { discoveryModuleFactory } from \"./discoveryModule\";\nimport { discoveryTypes } from \"./discoveryTypes\";\n\ndescribe(\"discoveryModuleFactory\", () => {\n  let container: Container;\n  let mod: ReturnType<typeof discoveryModuleFactory>;\n  let transport: Transport;\n  beforeEach(() => {\n    mod = discoveryModuleFactory({ stub: false });\n    container = new Container();\n    transport = new TransportMock();\n\n    container.loadSync(\n      mod,\n      // The following modules are injected into discovery module\n      loggerModuleFactory(),\n      deviceModelModuleFactory({ stub: false }),\n      deviceSessionModuleFactory(),\n      transportModuleFactory({\n        transports: [vi.fn().mockImplementation(() => transport)],\n      }),\n      managerApiModuleFactory({\n        config: {\n          managerApiUrl: \"http://fake.url\",\n          mockUrl: \"http://fake-mock.url\",\n        } as DmkConfig,\n      }),\n      secureChannelModuleFactory({\n        config: {\n          webSocketUrl: \"http://fake-websocket.url\",\n        } as DmkConfig,\n      }),\n    );\n  });\n  it(\"should return the device module\", () => {\n    expect(mod).toBeDefined();\n  });\n\n  it(\"should return none mocked use cases\", () => {\n    const startDiscoveringUseCase = container.get(\n      discoveryTypes.StartDiscoveringUseCase,\n    );\n    expect(startDiscoveringUseCase).toBeInstanceOf(StartDiscoveringUseCase);\n\n    const stopDiscoveringUseCase = container.get(\n      discoveryTypes.StopDiscoveringUseCase,\n    );\n    expect(stopDiscoveringUseCase).toBeInstanceOf(StopDiscoveringUseCase);\n\n    const disconnectUseCase = container.get(discoveryTypes.DisconnectUseCase);\n    expect(disconnectUseCase).toBeInstanceOf(DisconnectUseCase);\n\n    const connectUseCase = container.get(discoveryTypes.ConnectUseCase);\n    expect(connectUseCase).toBeInstanceOf(ConnectUseCase);\n\n    const listenToAvailableDevicesUseCase = container.get(\n      discoveryTypes.ListenToAvailableDevicesUseCase,\n    );\n    expect(listenToAvailableDevicesUseCase).toBeInstanceOf(\n      ListenToAvailableDevicesUseCase,\n    );\n    const listConnectedDevicesUseCase = container.get(\n      discoveryTypes.ListConnectedDevicesUseCase,\n    );\n    expect(listConnectedDevicesUseCase).toBeInstanceOf(\n      ListConnectedDevicesUseCase,\n    );\n    const reconnectUseCase = container.get(discoveryTypes.ReconnectUseCase);\n    expect(reconnectUseCase).toBeInstanceOf(ReconnectUseCase);\n  });\n});\n"],
  "mappings": "AAAA,OAAS,aAAAA,MAAiB,YAE1B,OAAS,iBAAAC,MAAqB,+CAE9B,OAAS,4BAAAC,MAAgC,8CACzC,OAAS,8BAAAC,MAAkC,kDAC3C,OAAS,kBAAAC,MAAsB,8CAC/B,OAAS,qBAAAC,MAAyB,iDAClC,OAAS,+BAAAC,MAAmC,2DAC5C,OAAS,mCAAAC,MAAuC,+DAChD,OAAS,oBAAAC,MAAwB,gDACjC,OAAS,2BAAAC,MAA+B,uDACxC,OAAS,0BAAAC,MAA8B,sDACvC,OAAS,uBAAAC,MAA2B,6CACpC,OAAS,2BAAAC,MAA+B,4CACxC,OAAS,8BAAAC,MAAkC,kDAC3C,OAAS,0BAAAC,MAA8B,yCAEvC,OAAS,0BAAAC,MAA8B,oBACvC,OAAS,kBAAAC,MAAsB,mBAE/B,SAAS,yBAA0B,IAAM,CACvC,IAAIC,EACAC,EACAC,EACJ,WAAW,IAAM,CACfD,EAAMH,EAAuB,CAAE,KAAM,EAAM,CAAC,EAC5CE,EAAY,IAAIjB,EAChBmB,EAAY,IAAIlB,EAEhBgB,EAAU,SACRC,EAEAP,EAAoB,EACpBT,EAAyB,CAAE,KAAM,EAAM,CAAC,EACxCC,EAA2B,EAC3BW,EAAuB,CACrB,WAAY,CAAC,GAAG,GAAG,EAAE,mBAAmB,IAAMK,CAAS,CAAC,CAC1D,CAAC,EACDP,EAAwB,CACtB,OAAQ,CACN,cAAe,kBACf,QAAS,sBACX,CACF,CAAC,EACDC,EAA2B,CACzB,OAAQ,CACN,aAAc,2BAChB,CACF,CAAC,CACH,CACF,CAAC,EACD,GAAG,kCAAmC,IAAM,CAC1C,OAAOK,CAAG,EAAE,YAAY,CAC1B,CAAC,EAED,GAAG,sCAAuC,IAAM,CAC9C,MAAME,EAA0BH,EAAU,IACxCD,EAAe,uBACjB,EACA,OAAOI,CAAuB,EAAE,eAAeX,CAAuB,EAEtE,MAAMY,EAAyBJ,EAAU,IACvCD,EAAe,sBACjB,EACA,OAAOK,CAAsB,EAAE,eAAeX,CAAsB,EAEpE,MAAMY,EAAoBL,EAAU,IAAID,EAAe,iBAAiB,EACxE,OAAOM,CAAiB,EAAE,eAAejB,CAAiB,EAE1D,MAAMkB,EAAiBN,EAAU,IAAID,EAAe,cAAc,EAClE,OAAOO,CAAc,EAAE,eAAenB,CAAc,EAEpD,MAAMoB,EAAkCP,EAAU,IAChDD,EAAe,+BACjB,EACA,OAAOQ,CAA+B,EAAE,eACtCjB,CACF,EACA,MAAMkB,EAA8BR,EAAU,IAC5CD,EAAe,2BACjB,EACA,OAAOS,CAA2B,EAAE,eAClCnB,CACF,EACA,MAAMoB,EAAmBT,EAAU,IAAID,EAAe,gBAAgB,EACtE,OAAOU,CAAgB,EAAE,eAAelB,CAAgB,CAC1D,CAAC,CACH,CAAC",
  "names": ["Container", "TransportMock", "deviceModelModuleFactory", "deviceSessionModuleFactory", "ConnectUseCase", "DisconnectUseCase", "ListConnectedDevicesUseCase", "ListenToAvailableDevicesUseCase", "ReconnectUseCase", "StartDiscoveringUseCase", "StopDiscoveringUseCase", "loggerModuleFactory", "managerApiModuleFactory", "secureChannelModuleFactory", "transportModuleFactory", "discoveryModuleFactory", "discoveryTypes", "container", "mod", "transport", "startDiscoveringUseCase", "stopDiscoveringUseCase", "disconnectUseCase", "connectUseCase", "listenToAvailableDevicesUseCase", "listConnectedDevicesUseCase", "reconnectUseCase"]
}
