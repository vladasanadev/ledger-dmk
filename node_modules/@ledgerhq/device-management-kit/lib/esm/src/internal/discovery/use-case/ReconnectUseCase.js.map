{
  "version": 3,
  "sources": ["../../../../../../src/internal/discovery/use-case/ReconnectUseCase.ts"],
  "sourcesContent": ["import { inject, injectable } from \"inversify\";\n\nimport { DeviceSessionId } from \"@api/device-session/types\";\nimport { ConnectedDevice } from \"@api/index\";\nimport { LoggerPublisherService } from \"@api/logger-publisher/service/LoggerPublisherService\";\nimport { DeviceSessionRefresherOptions } from \"@internal/device-session/model/DeviceSession\";\nimport { discoveryTypes } from \"@internal/discovery/di/discoveryTypes\";\nimport { loggerTypes } from \"@internal/logger-publisher/di/loggerTypes\";\n\nimport { ConnectUseCase } from \"./ConnectUseCase\";\nimport { DisconnectUseCase } from \"./DisconnectUseCase\";\n\n/**\n * The arguments for the ReconnectUseCase.\n */\nexport type ReconnectUseCaseArgs = {\n  /**\n   * Connected device\n   */\n  device: ConnectedDevice;\n\n  /**\n   * sessionRefresherOptions - optional\n   * isRefresherDisabled - whether the refresher is disabled\n   * pollingInterval - optional - the refresh interval in milliseconds\n   */\n  sessionRefresherOptions?: DeviceSessionRefresherOptions;\n};\n\n/**\n * Reconnects a device session by disconnecting and reconnecting to the device.\n */\n@injectable()\nexport class ReconnectUseCase {\n  private readonly _logger: LoggerPublisherService;\n\n  constructor(\n    @inject(discoveryTypes.ConnectUseCase)\n    private readonly connectUseCase: ConnectUseCase,\n    @inject(discoveryTypes.DisconnectUseCase)\n    private readonly disconnectUseCase: DisconnectUseCase,\n    @inject(loggerTypes.LoggerPublisherServiceFactory)\n    loggerFactory: (tag: string) => LoggerPublisherService,\n  ) {\n    this._logger = loggerFactory(\"ReconnectUseCase\");\n  }\n\n  async execute({\n    device,\n    sessionRefresherOptions,\n  }: ReconnectUseCaseArgs): Promise<DeviceSessionId> {\n    this._logger.debug(\"Reconnecting device session\", {\n      data: { deviceId: device.id, transport: device.transport },\n    });\n    await this.disconnectUseCase.execute({ sessionId: device.sessionId });\n\n    return this.connectUseCase.execute({\n      device,\n      sessionRefresherOptions,\n    });\n  }\n}\n"],
  "mappings": "iOAAA,OAAS,UAAAA,EAAQ,cAAAC,MAAkB,YAMnC,OAAS,kBAAAC,MAAsB,wCAC/B,OAAS,eAAAC,MAAmB,4CA0BrB,IAAMC,EAAN,KAAuB,CAG5B,YAEmBC,EAEAC,EAEjBC,EACA,CALiB,oBAAAF,EAEA,uBAAAC,EAIjB,KAAK,QAAUC,EAAc,kBAAkB,CACjD,CAXiB,QAajB,MAAM,QAAQ,CACZ,OAAAC,EACA,wBAAAC,CACF,EAAmD,CACjD,YAAK,QAAQ,MAAM,8BAA+B,CAChD,KAAM,CAAE,SAAUD,EAAO,GAAI,UAAWA,EAAO,SAAU,CAC3D,CAAC,EACD,MAAM,KAAK,kBAAkB,QAAQ,CAAE,UAAWA,EAAO,SAAU,CAAC,EAE7D,KAAK,eAAe,QAAQ,CACjC,OAAAA,EACA,wBAAAC,CACF,CAAC,CACH,CACF,EA5BaL,EAANM,EAAA,CADNC,EAAW,EAKPC,EAAA,EAAAC,EAAOC,EAAe,cAAc,GAEpCF,EAAA,EAAAC,EAAOC,EAAe,iBAAiB,GAEvCF,EAAA,EAAAC,EAAOE,EAAY,6BAA6B,IARxCX",
  "names": ["inject", "injectable", "discoveryTypes", "loggerTypes", "ReconnectUseCase", "connectUseCase", "disconnectUseCase", "loggerFactory", "device", "sessionRefresherOptions", "__decorateClass", "injectable", "__decorateParam", "inject", "discoveryTypes", "loggerTypes"]
}
