{
  "version": 3,
  "sources": ["../../../../../../src/internal/manager-api/use-case/SetProviderUseCase.ts"],
  "sourcesContent": ["import { inject, injectable } from \"inversify\";\n\nimport { DeviceSessionStateType } from \"@api/device-session/DeviceSessionState\";\nimport { deviceSessionTypes } from \"@internal/device-session/di/deviceSessionTypes\";\nimport type { DeviceSessionService } from \"@internal/device-session/service/DeviceSessionService\";\nimport { type ManagerApiDataSource } from \"@internal/manager-api/data/ManagerApiDataSource\";\nimport { managerApiTypes } from \"@internal/manager-api/di/managerApiTypes\";\n\n/**\n * Use case to set the provider for the Manager API, this is used to set the\n * provider for the Manager API data source at runtime.\n */\n@injectable()\nexport class SetProviderUseCase {\n  constructor(\n    @inject(deviceSessionTypes.DeviceSessionService)\n    private readonly sessionService: DeviceSessionService,\n    @inject(managerApiTypes.ManagerApiDataSource)\n    private readonly managerApiDataSource: ManagerApiDataSource,\n  ) {}\n\n  execute(provider: number) {\n    // Invalidate device session state fields that are dependent on the provider\n    for (const session of this.sessionService.getDeviceSessions()) {\n      const state = session.getDeviceSessionState();\n      if (state.sessionStateType !== DeviceSessionStateType.Connected) {\n        session.setDeviceSessionState({\n          ...state,\n          firmwareUpdateContext: undefined,\n          installedApps: [],\n          appsUpdates: undefined,\n          catalog: undefined,\n        });\n      }\n    }\n\n    // Update the provider in the manager API\n    this.managerApiDataSource.setProvider(provider);\n  }\n}\n"],
  "mappings": "iOAAA,OAAS,UAAAA,EAAQ,cAAAC,MAAkB,YAEnC,OAAS,0BAAAC,MAA8B,yCACvC,OAAS,sBAAAC,MAA0B,iDAGnC,OAAS,mBAAAC,MAAuB,2CAOzB,IAAMC,EAAN,KAAyB,CAC9B,YAEmBC,EAEAC,EACjB,CAHiB,oBAAAD,EAEA,0BAAAC,CAChB,CAEH,QAAQC,EAAkB,CAExB,UAAWC,KAAW,KAAK,eAAe,kBAAkB,EAAG,CAC7D,MAAMC,EAAQD,EAAQ,sBAAsB,EACxCC,EAAM,mBAAqBC,EAAuB,WACpDF,EAAQ,sBAAsB,CAC5B,GAAGC,EACH,sBAAuB,OACvB,cAAe,CAAC,EAChB,YAAa,OACb,QAAS,MACX,CAAC,CAEL,CAGA,KAAK,qBAAqB,YAAYF,CAAQ,CAChD,CACF,EA1BaH,EAANO,EAAA,CADNC,EAAW,EAGPC,EAAA,EAAAC,EAAOC,EAAmB,oBAAoB,GAE9CF,EAAA,EAAAC,EAAOE,EAAgB,oBAAoB,IAJnCZ",
  "names": ["inject", "injectable", "DeviceSessionStateType", "deviceSessionTypes", "managerApiTypes", "SetProviderUseCase", "sessionService", "managerApiDataSource", "provider", "session", "state", "DeviceSessionStateType", "__decorateClass", "injectable", "__decorateParam", "inject", "deviceSessionTypes", "managerApiTypes"]
}
