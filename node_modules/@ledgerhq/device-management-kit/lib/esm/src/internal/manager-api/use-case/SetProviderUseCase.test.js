import{describe as u,expect as a,it as d,vi as e}from"vitest";import{DeviceStatus as r}from"../../../api/device/DeviceStatus";import{DeviceSessionStateType as c}from"../../../api/device-session/DeviceSessionState";import{SetProviderUseCase as v}from"./SetProviderUseCase";u("SetProviderUseCase",()=>{const o=e.fn(),n=e.fn(),p=e.fn(),S={addDeviceSession:e.fn(),getDeviceSessionById:e.fn(),getDeviceSessionByDeviceId:e.fn(),removeDeviceSession:e.fn(),getDeviceSessions:p,sessionsObs:e.fn()},s={setProvider:e.fn()};beforeEach(()=>{e.clearAllMocks(),p.mockReturnValue([{getDeviceSessionState:o,setDeviceSessionState:n}])}),d("should call setProvider on ManagerApiDataSource with the correct provider",()=>{const i=new v(S,s),t=123;o.mockReturnValue({sessionStateType:c.Connected,deviceStatus:r.CONNECTED}),i.execute(t),a(s.setProvider).toHaveBeenCalledWith(t),a(n).not.toHaveBeenCalled()}),d("should clean the device session",()=>{const i=new v(S,s),t=123;o.mockReturnValue({sessionStateType:c.ReadyWithoutSecureChannel,deviceStatus:r.CONNECTED,firmwareVersion:"firmwareVersion",firmwareUpdateContext:"firmwareUpdateContext",installedApps:"apps",appsUpdates:"appsUpdate",catalog:"catalog"}),i.execute(t),a(s.setProvider).toHaveBeenCalledWith(t),a(n).toHaveBeenCalledWith({sessionStateType:c.ReadyWithoutSecureChannel,deviceStatus:r.CONNECTED,firmwareVersion:"firmwareVersion",firmwareUpdateContext:void 0,installedApps:[],appsUpdates:void 0,catalog:void 0})})});
//# sourceMappingURL=SetProviderUseCase.test.js.map
