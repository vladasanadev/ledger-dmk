import{v4 as o}from"uuid";class l{constructor(r,e){this._refresher=e;this._logger=r("refresher-service")}_refresherBlockers=new Set;_logger;disableRefresher(r){const e=`${r}-${o()}`;this.addRefresherBlocker(e),this._logger.debug("Refresher disabled",{data:{blockerId:e,blockers:Array.from(this._refresherBlockers)}});let s=!1;return()=>{s||(s=!0,this.removeRefresherBlocker(e),this._logger.debug("Refresher re-enabled",{data:{blockerId:e,blockers:Array.from(this._refresherBlockers)}}))}}addRefresherBlocker(r){const e=this._refresherBlockers.size;this._refresherBlockers.add(r),e===0&&this._refresher.stop()}removeRefresherBlocker(r){const e=this._refresherBlockers.size;this._refresherBlockers.delete(r),e>0&&this._refresherBlockers.size===0&&this._refresher.start()}}export{l as RefresherService};
//# sourceMappingURL=RefresherService.js.map
