import{describe as u,expect as E,it as d}from"vitest";import{DeviceSessionEventDispatcher as p,SessionEvents as c}from"./DeviceSessionEventDispatcher";u("DeviceSessionEventDispatcher",()=>{let s;beforeEach(()=>{s=new p}),d("should dispatch and receive an event without payload",()=>new Promise((i,a)=>{const e={eventName:c.REFRESH_NEEDED,eventData:void 0},t=s.listen().subscribe(o=>{try{E(o).toEqual(e),i(void 0)}catch(n){a(n)}finally{t.unsubscribe()}});s.dispatch(e)})),d("should dispatch and receive a COMMAND_SUCCEEDED event with payload",()=>new Promise((i,a)=>{const e={status:"success",data:{someField:"dummyValue"}},t={eventName:c.COMMAND_SUCCEEDED,eventData:e},o=s.listen().subscribe(n=>{if(n.eventName===c.COMMAND_SUCCEEDED)try{E(n).toEqual(t),i(void 0)}catch(r){a(r)}finally{o.unsubscribe()}});s.dispatch(t)})),d("should dispatch multiple events",()=>new Promise((i,a)=>{const e=[{eventName:c.DEVICE_STATE_UPDATE_BUSY,eventData:void 0},{eventName:c.DEVICE_STATE_UPDATE_CONNECTED,eventData:void 0}],t=[],o=s.listen().subscribe(n=>{if(t.push(n),t.length===e.length)try{E(t).toEqual(e),i(void 0)}catch(r){a(r)}finally{o.unsubscribe()}});e.forEach(n=>s.dispatch(n))}))});
//# sourceMappingURL=DeviceSessionEventDispatcher.test.js.map
