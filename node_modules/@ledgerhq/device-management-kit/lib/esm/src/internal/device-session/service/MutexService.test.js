import{describe as i,expect as s,it as r}from"vitest";import{MutexService as u}from"./MutexService";i("MutexService",()=>{r("should immediately return a release function when not locked",async()=>{const e=await new u().lock();s(typeof e).toBe("function"),e()}),r("should queue subsequent lock calls until the lock is released",async()=>{const t=new u,e=await t.lock();let o=!1;const c=t.lock().then(l=>{o=!0,l()});s(o).toBe(!1),e(),await c,s(o).toBe(!0)}),r("should queue multiple locks in FIFO order",async()=>{const t=new u,e=[],o=await t.lock();e.push("first");const c=t.lock().then(n=>{e.push("second"),n()}),l=t.lock().then(n=>{e.push("third"),n()});e.push("afterqueue"),o(),await Promise.all([c,l]),s(e).toEqual(["first","afterqueue","second","third"])})});
//# sourceMappingURL=MutexService.test.js.map
