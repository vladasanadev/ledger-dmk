{
  "version": 3,
  "sources": ["../../../../../../src/internal/device-session/di/deviceSessionModule.ts"],
  "sourcesContent": ["import { ContainerModule, type Factory } from \"inversify\";\n\nimport { type ApduReceiverService } from \"@api/device-session/service/ApduReceiverService\";\nimport { type ApduReceiverConstructorArgs } from \"@api/device-session/service/ApduReceiverService\";\nimport { type ApduSenderService } from \"@api/device-session/service/ApduSenderService\";\nimport { type ApduSenderServiceConstructorArgs } from \"@api/device-session/service/ApduSenderService\";\nimport { DisableDeviceSessionRefresherUseCase } from \"@api/device-session/use-case/DisableDeviceSessionRefresher\";\nimport { type LoggerPublisherService } from \"@api/logger-publisher/service/LoggerPublisherService\";\nimport { DefaultApduReceiverService } from \"@internal/device-session/service/DefaultApduReceiverService\";\nimport { DefaultApduSenderService } from \"@internal/device-session/service/DefaultApduSenderService\";\nimport { DefaultDeviceSessionService } from \"@internal/device-session/service/DefaultDeviceSessionService\";\nimport { CloseSessionsUseCase } from \"@internal/device-session/use-case/CloseSessionsUseCase\";\nimport { GetDeviceSessionStateUseCase } from \"@internal/device-session/use-case/GetDeviceSessionStateUseCase\";\nimport { loggerTypes } from \"@internal/logger-publisher/di/loggerTypes\";\nimport { StubUseCase } from \"@root/src/di.stub\";\n\nimport { deviceSessionTypes } from \"./deviceSessionTypes\";\n\nexport type DeviceSessionModuleArgs = Partial<{\n  stub: boolean;\n}>;\n\nexport const deviceSessionModuleFactory = (\n  { stub }: DeviceSessionModuleArgs = { stub: false },\n) =>\n  new ContainerModule(({ bind, rebindSync }) => {\n    bind<Factory<ApduSenderService>>(\n      deviceSessionTypes.ApduSenderServiceFactory,\n    ).toFactory((context) => {\n      const logger = context.get<(name: string) => LoggerPublisherService>(\n        loggerTypes.LoggerPublisherServiceFactory,\n      );\n\n      return (args: ApduSenderServiceConstructorArgs) => {\n        return new DefaultApduSenderService(args, logger);\n      };\n    });\n\n    bind<Factory<ApduReceiverService>>(\n      deviceSessionTypes.ApduReceiverServiceFactory,\n    ).toFactory((context) => {\n      const logger = context.get<(name: string) => LoggerPublisherService>(\n        loggerTypes.LoggerPublisherServiceFactory,\n      );\n\n      return (args: ApduReceiverConstructorArgs = {}) => {\n        return new DefaultApduReceiverService(args, logger);\n      };\n    });\n\n    bind(deviceSessionTypes.DeviceSessionService)\n      .to(DefaultDeviceSessionService)\n      .inSingletonScope();\n\n    bind(deviceSessionTypes.GetDeviceSessionStateUseCase).to(\n      GetDeviceSessionStateUseCase,\n    );\n    bind(deviceSessionTypes.CloseSessionsUseCase).to(CloseSessionsUseCase);\n    bind(deviceSessionTypes.DisableDeviceSessionRefresherUseCase).to(\n      DisableDeviceSessionRefresherUseCase,\n    );\n\n    if (stub) {\n      rebindSync(deviceSessionTypes.GetDeviceSessionStateUseCase).to(\n        StubUseCase,\n      );\n      rebindSync(deviceSessionTypes.DisableDeviceSessionRefresherUseCase).to(\n        StubUseCase,\n      );\n    }\n  });\n"],
  "mappings": "AAAA,OAAS,mBAAAA,MAAqC,YAM9C,OAAS,wCAAAC,MAA4C,6DAErD,OAAS,8BAAAC,MAAkC,8DAC3C,OAAS,4BAAAC,MAAgC,4DACzC,OAAS,+BAAAC,MAAmC,+DAC5C,OAAS,wBAAAC,MAA4B,yDACrC,OAAS,gCAAAC,MAAoC,iEAC7C,OAAS,eAAAC,MAAmB,4CAC5B,OAAS,eAAAC,MAAmB,oBAE5B,OAAS,sBAAAC,MAA0B,uBAM5B,MAAMC,EAA6B,CACxC,CAAE,KAAAC,CAAK,EAA6B,CAAE,KAAM,EAAM,IAElD,IAAIX,EAAgB,CAAC,CAAE,KAAAY,EAAM,WAAAC,CAAW,IAAM,CAC5CD,EACEH,EAAmB,wBACrB,EAAE,UAAWK,GAAY,CACvB,MAAMC,EAASD,EAAQ,IACrBP,EAAY,6BACd,EAEA,OAAQS,GACC,IAAIb,EAAyBa,EAAMD,CAAM,CAEpD,CAAC,EAEDH,EACEH,EAAmB,0BACrB,EAAE,UAAWK,GAAY,CACvB,MAAMC,EAASD,EAAQ,IACrBP,EAAY,6BACd,EAEA,MAAO,CAACS,EAAoC,CAAC,IACpC,IAAId,EAA2Bc,EAAMD,CAAM,CAEtD,CAAC,EAEDH,EAAKH,EAAmB,oBAAoB,EACzC,GAAGL,CAA2B,EAC9B,iBAAiB,EAEpBQ,EAAKH,EAAmB,4BAA4B,EAAE,GACpDH,CACF,EACAM,EAAKH,EAAmB,oBAAoB,EAAE,GAAGJ,CAAoB,EACrEO,EAAKH,EAAmB,oCAAoC,EAAE,GAC5DR,CACF,EAEIU,IACFE,EAAWJ,EAAmB,4BAA4B,EAAE,GAC1DD,CACF,EACAK,EAAWJ,EAAmB,oCAAoC,EAAE,GAClED,CACF,EAEJ,CAAC",
  "names": ["ContainerModule", "DisableDeviceSessionRefresherUseCase", "DefaultApduReceiverService", "DefaultApduSenderService", "DefaultDeviceSessionService", "CloseSessionsUseCase", "GetDeviceSessionStateUseCase", "loggerTypes", "StubUseCase", "deviceSessionTypes", "deviceSessionModuleFactory", "stub", "bind", "rebindSync", "context", "logger", "args"]
}
