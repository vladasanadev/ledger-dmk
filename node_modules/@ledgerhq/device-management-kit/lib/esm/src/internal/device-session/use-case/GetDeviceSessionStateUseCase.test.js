import{DEVICE_SESSION_REFRESHER_DEFAULT_OPTIONS as p}from"../../device-session/data/DeviceSessionRefresherConst";import{deviceSessionStubBuilder as f}from"../../device-session/model/DeviceSession.stub";import{DeviceSessionNotFound as l}from"../../device-session/model/Errors";import{DefaultDeviceSessionService as v}from"../../device-session/service/DefaultDeviceSessionService";import{DefaultLoggerPublisherService as D}from"../../logger-publisher/service/DefaultLoggerPublisherService";import{AxiosManagerApiDataSource as d}from"../../manager-api/data/AxiosManagerApiDataSource";import{DefaultManagerApiService as g}from"../../manager-api/service/DefaultManagerApiService";import{DefaultSecureChannelDataSource as h}from"../../secure-channel/data/DefaultSecureChannelDataSource";import{DefaultSecureChannelService as C}from"../../secure-channel/service/DefaultSecureChannelService";import{GetDeviceSessionStateUseCase as a}from"./GetDeviceSessionStateUseCase";vi.mock("@internal/manager-api/data/AxiosManagerApiDataSource");let r,o,n,c,S,m;const t="fakeSessionId";describe("GetDeviceSessionStateUseCase",()=>{beforeEach(()=>{r=new D([],"get-connected-device-use-case-test"),n=new d({}),c=new g(n),S=new h({}),m=new C(S),o=new v(()=>r)}),it("should retrieve deviceSession device state",()=>{const e=f({id:t},()=>r,c,m,p);o.addDeviceSession(e);const i=new a(o,()=>r).execute({sessionId:t}),u=e.state;e.close(),expect(i).toStrictEqual(u)}),it("should throw error when deviceSession is not found",()=>new Promise(e=>{const s=new a(o,()=>r);try{s.execute({sessionId:t}).subscribe()}catch(i){expect(i).toBeInstanceOf(l),e()}}))});
//# sourceMappingURL=GetDeviceSessionStateUseCase.test.js.map
