{
  "version": 3,
  "sources": ["../../../../../../src/internal/logger-publisher/service/DefaultLoggerPublisherService.test.ts"],
  "sourcesContent": ["import { type Mocked } from \"vitest\";\n\nimport { LogLevel } from \"@api/logger-subscriber/model/LogLevel\";\nimport { ConsoleLogger } from \"@api/logger-subscriber/service/ConsoleLogger\";\n\nimport { DefaultLoggerPublisherService } from \"./DefaultLoggerPublisherService\";\n\nvi.mock(\"@api/logger-subscriber/service/ConsoleLogger\");\nvi.useFakeTimers().setSystemTime(new Date(\"2024-01-01\"));\n\nlet service: DefaultLoggerPublisherService;\nlet subscriber: Mocked<ConsoleLogger>;\nconst message = \"message\";\nconst tag = \"logger-tag\";\nconst options = { data: { key: \"value\" } };\nconst generatedOptions = { tag, timestamp: Date.now(), ...options };\n\ndescribe(\"LoggerPublisherService\", () => {\n  beforeEach(() => {\n    vi.clearAllMocks();\n    subscriber = new ConsoleLogger() as Mocked<ConsoleLogger>;\n    service = new DefaultLoggerPublisherService([subscriber], tag);\n  });\n\n  it(\"should call subscriber.log with the correct log object\", () => {\n    service.info(message, options);\n    expect(subscriber.log).toHaveBeenCalledWith(\n      LogLevel.Info,\n      message,\n      generatedOptions,\n    );\n  });\n\n  it(\"should call subscriber.log with the correct log object when a tag is provided\", () => {\n    const newTag = \"new-tag\";\n    service.info(message, { ...options, tag: newTag });\n    expect(subscriber.log).toHaveBeenCalledWith(LogLevel.Info, message, {\n      ...generatedOptions,\n      tag: newTag,\n    });\n  });\n\n  it(\"should call subscriber.log with the correct log object when a timestamp is provided\", () => {\n    const newTimestamp = 1;\n    service.info(message, { ...options, timestamp: newTimestamp });\n    expect(subscriber.log).toHaveBeenCalledWith(LogLevel.Info, message, {\n      ...generatedOptions,\n      timestamp: newTimestamp,\n    });\n  });\n\n  it(\"should call _log with the correct LogLevel\", () => {\n    const spy = vi.spyOn(service, \"_log\").mockImplementation(vi.fn());\n\n    service.info(message, options);\n    expect(spy).toHaveBeenCalledWith(LogLevel.Info, message, options);\n  });\n\n  it(\"should have the correct LogLevel\", () => {\n    const spy = vi.spyOn(service, \"_log\").mockImplementation(vi.fn());\n\n    service.debug(message, options);\n    expect(spy).toHaveBeenCalledWith(LogLevel.Debug, message, options);\n  });\n\n  it(\"should have the correct LogLevel\", () => {\n    const spy = vi.spyOn(service, \"_log\").mockImplementation(vi.fn());\n\n    service.warn(message, options);\n    expect(spy).toHaveBeenCalledWith(LogLevel.Warning, message, options);\n  });\n\n  it(\"should have the correct LogLevel\", () => {\n    const spy = vi.spyOn(service, \"_log\").mockImplementation(vi.fn());\n\n    service.error(message, options);\n    expect(spy).toHaveBeenCalledWith(LogLevel.Error, message, options);\n  });\n});\n"],
  "mappings": "AAEA,OAAS,YAAAA,MAAgB,wCACzB,OAAS,iBAAAC,MAAqB,+CAE9B,OAAS,iCAAAC,MAAqC,kCAE9C,GAAG,KAAK,8CAA8C,EACtD,GAAG,cAAc,EAAE,cAAc,IAAI,KAAK,YAAY,CAAC,EAEvD,IAAIC,EACAC,EACJ,MAAMC,EAAU,UACVC,EAAM,aACNC,EAAU,CAAE,KAAM,CAAE,IAAK,OAAQ,CAAE,EACnCC,EAAmB,CAAE,IAAAF,EAAK,UAAW,KAAK,IAAI,EAAG,GAAGC,CAAQ,EAElE,SAAS,yBAA0B,IAAM,CACvC,WAAW,IAAM,CACf,GAAG,cAAc,EACjBH,EAAa,IAAIH,EACjBE,EAAU,IAAID,EAA8B,CAACE,CAAU,EAAGE,CAAG,CAC/D,CAAC,EAED,GAAG,yDAA0D,IAAM,CACjEH,EAAQ,KAAKE,EAASE,CAAO,EAC7B,OAAOH,EAAW,GAAG,EAAE,qBACrBJ,EAAS,KACTK,EACAG,CACF,CACF,CAAC,EAED,GAAG,gFAAiF,IAAM,CACxF,MAAMC,EAAS,UACfN,EAAQ,KAAKE,EAAS,CAAE,GAAGE,EAAS,IAAKE,CAAO,CAAC,EACjD,OAAOL,EAAW,GAAG,EAAE,qBAAqBJ,EAAS,KAAMK,EAAS,CAClE,GAAGG,EACH,IAAKC,CACP,CAAC,CACH,CAAC,EAED,GAAG,sFAAuF,IAAM,CAE9FN,EAAQ,KAAKE,EAAS,CAAE,GAAGE,EAAS,UAAW,CAAa,CAAC,EAC7D,OAAOH,EAAW,GAAG,EAAE,qBAAqBJ,EAAS,KAAMK,EAAS,CAClE,GAAGG,EACH,UAAW,CACb,CAAC,CACH,CAAC,EAED,GAAG,6CAA8C,IAAM,CACrD,MAAME,EAAM,GAAG,MAAMP,EAAS,MAAM,EAAE,mBAAmB,GAAG,GAAG,CAAC,EAEhEA,EAAQ,KAAKE,EAASE,CAAO,EAC7B,OAAOG,CAAG,EAAE,qBAAqBV,EAAS,KAAMK,EAASE,CAAO,CAClE,CAAC,EAED,GAAG,mCAAoC,IAAM,CAC3C,MAAMG,EAAM,GAAG,MAAMP,EAAS,MAAM,EAAE,mBAAmB,GAAG,GAAG,CAAC,EAEhEA,EAAQ,MAAME,EAASE,CAAO,EAC9B,OAAOG,CAAG,EAAE,qBAAqBV,EAAS,MAAOK,EAASE,CAAO,CACnE,CAAC,EAED,GAAG,mCAAoC,IAAM,CAC3C,MAAMG,EAAM,GAAG,MAAMP,EAAS,MAAM,EAAE,mBAAmB,GAAG,GAAG,CAAC,EAEhEA,EAAQ,KAAKE,EAASE,CAAO,EAC7B,OAAOG,CAAG,EAAE,qBAAqBV,EAAS,QAASK,EAASE,CAAO,CACrE,CAAC,EAED,GAAG,mCAAoC,IAAM,CAC3C,MAAMG,EAAM,GAAG,MAAMP,EAAS,MAAM,EAAE,mBAAmB,GAAG,GAAG,CAAC,EAEhEA,EAAQ,MAAME,EAASE,CAAO,EAC9B,OAAOG,CAAG,EAAE,qBAAqBV,EAAS,MAAOK,EAASE,CAAO,CACnE,CAAC,CACH,CAAC",
  "names": ["LogLevel", "ConsoleLogger", "DefaultLoggerPublisherService", "service", "subscriber", "message", "tag", "options", "generatedOptions", "newTag", "spy"]
}
