import{Container as o}from"inversify";import{TransportMock as a}from"../../../api/transport/model/__mocks__/TransportMock";import{deviceModelModuleFactory as l}from"../../device-model/di/deviceModelModule";import{deviceSessionModuleFactory as d}from"../../device-session/di/deviceSessionModule";import{loggerModuleFactory as u}from"../../logger-publisher/di/loggerModule";import{transportDiTypes as i}from"./transportDiTypes";import{transportModuleFactory as n}from"./transportModule";describe("transportModuleFactory",()=>{describe("Default",()=>{let e,t;beforeEach(()=>{t=n(),e=new o,e.loadSync(t)}),it("should create the transport module",()=>{expect(t).toBeDefined()}),it("should not bind the TransportService when transports is empty",()=>{try{e.get(i.TransportService)}catch(r){expect(r).toBeDefined()}})}),describe("With transports",()=>{let e,t,r;beforeEach(()=>{r=new a,vi.spyOn(r,"getIdentifier").mockReturnValue("MOCK");const s=u(),c=l({stub:!0}),p=d({stub:!0});t=n({transports:[()=>r],config:{managerApiUrl:"http://fake.url/api",mockUrl:"http://fake.url",webSocketUrl:"ws://fake.websocket.url",firmwareDistributionSalt:"salt"}}),e=new o,e.loadSync(s,c,p,t)}),it("should bind the TransportService",()=>{expect(e.get(i.TransportService)).toBeDefined()})}),describe("With stub",()=>{let e,t,r;beforeEach(()=>{r=new a,vi.spyOn(r,"getIdentifier").mockReturnValue("MOCK"),t=n({stub:!0,transports:[()=>r]}),e=new o,e.loadSync(t)}),it("should create the transport module",()=>{expect(t).toBeDefined()})})});
//# sourceMappingURL=transportModule.test.js.map
