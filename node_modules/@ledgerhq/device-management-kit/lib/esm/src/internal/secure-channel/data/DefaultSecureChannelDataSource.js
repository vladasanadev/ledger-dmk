var k=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var m=(s,e,t,o)=>{for(var r=o>1?void 0:o?l(e,t):e,c=s.length-1,i;c>=0;c--)(i=s[c])&&(r=(o?i(e,t,r):i(r))||r);return o&&r&&k(e,t,r),r},p=(s,e)=>(t,o)=>e(t,o,s);import{inject as b,injectable as h}from"inversify";import S from"isomorphic-ws";import{Left as W,Right as d}from"purify-ts";import n from"url";import{secureChannelTypes as u}from"../../secure-channel/di/secureChannelTypes";import{WebSocketConnectionError as f}from"../../secure-channel/model/Errors";let a=class{webSocketBaseUrl;constructor({webSocketUrl:e}){this.webSocketBaseUrl=e}genuineCheck(e){const t=n.format({pathname:`${this.webSocketBaseUrl}/genuine`,query:e});return this._connectWebSocket(t)}installApp(e){const t=n.format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}listInstalledApps(e){const t=n.format({pathname:`${this.webSocketBaseUrl}/apps/list`,query:e});return this._connectWebSocket(t)}uninstallApp(e){const t=n.format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}updateFirmware(e){const t=n.format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}updateMcu(e){const t=n.format({pathname:`${this.webSocketBaseUrl}/mcu`,query:e});return this._connectWebSocket(t)}_connectWebSocket(e){try{return d(new S(e))}catch(t){return W(new f(t))}}};a=m([h(),p(0,b(u.DmkConfig))],a);export{a as DefaultSecureChannelDataSource};
//# sourceMappingURL=DefaultSecureChannelDataSource.js.map
