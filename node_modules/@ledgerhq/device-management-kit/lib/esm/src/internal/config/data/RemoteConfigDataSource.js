var c=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var p=(s,r,e,o)=>{for(var i=o>1?void 0:o?E(r,e):r,a=s.length-1,f;a>=0;a--)(f=s[a])&&(i=(o?f(r,e,i):f(i))||i);return o&&i&&c(r,e,i),i};import{injectable as g}from"inversify";import{Either as m,Left as n}from"purify-ts";import{ApiCallError as l,JSONParseError as u,ParseResponseError as w}from"../../config/model/Errors";let t=class{async getConfig(){const r=await this._callApi();if(r.isLeft())return n(new l(r.extract()));if(!r.extract().ok)return n(new l(new Error("response not ok")));const e=await r.extract().json();return e.isLeft()?n(new u):e.chain(o=>this._parseResponse(o)).map(o=>o)}_parseResponse(r){const{name:e,version:o}=r;return!e||!o?n(new w):m.of({name:e,version:o})}_callApi(){return new Promise(r=>{r(m.of({ok:!0,json:async()=>new Promise(e=>{e(m.of({name:"DeviceSDK",version:"0.0.0-fake.1",yolo:"yolo"}))})}))})}};t=p([g()],t);export{t as RestRemoteConfigDataSource};
//# sourceMappingURL=RemoteConfigDataSource.js.map
