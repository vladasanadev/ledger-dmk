import{Either as r,Left as i}from"purify-ts";import{FileLocalConfigDataSource as n}from"../../config/data/LocalConfigDataSource";import{RestRemoteConfigDataSource as l}from"../../config/data/RemoteConfigDataSource";import{JSONParseError as a}from"../../config/model/Errors";import{DefaultLoggerPublisherService as f}from"../../logger-publisher/service/DefaultLoggerPublisherService";import{DefaultConfigService as g}from"./DefaultConfigService";vi.mock("@internal/config/data/LocalConfigDataSource");vi.mock("@internal/config/data/RemoteConfigDataSource");let e,o,c,t;describe("DefaultConfigService",()=>{beforeEach(()=>{vi.clearAllMocks(),e=new n,o=new l,c=new f([],"config"),t=new g(e,o,()=>c)}),describe("when the local config is available",()=>{it("should return the `local` version",async()=>{e.getConfig.mockReturnValue(r.of({name:"DeviceSDK",version:"1.0.0-local"})),expect(await t.getDmkConfig()).toStrictEqual({name:"DeviceSDK",version:"1.0.0-local"})})}),describe("when the local config is not available, use remote",()=>{it("should return the `remote` version",async()=>{e.getConfig.mockReturnValue(i(new a)),o.getConfig.mockResolvedValue(r.of({name:"DeviceSDK",version:"1.0.0-remote"})),expect(await t.getDmkConfig()).toStrictEqual({name:"DeviceSDK",version:"1.0.0-remote"})})}),describe("when the local remote config are not available",()=>{it("should return the `default` version",async()=>{e.getConfig.mockReturnValue(i(new a)),o.getConfig.mockResolvedValue(i(new a)),expect(await t.getDmkConfig()).toStrictEqual({name:"DeadDmk",version:"0.0.0-dead.1"})})})});
//# sourceMappingURL=DefaultConfigService.test.js.map
