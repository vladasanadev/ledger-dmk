{
  "version": 3,
  "sources": ["../../../../../../src/internal/config/data/LocalConfigDataSource.ts"],
  "sourcesContent": ["import { injectable } from \"inversify\";\nimport { Either } from \"purify-ts\";\n\nimport { Config, isConfig } from \"@internal/config/model/Config\";\nimport {\n  JSONParseError,\n  LocalConfigFailure,\n  ReadFileError,\n} from \"@internal/config/model/Errors\";\nimport pkg from \"@root/package.json\";\n\nimport { LocalConfigDataSource } from \"./ConfigDataSource\";\n\nconst version = {\n  name: pkg.name,\n  version: pkg.version,\n};\n\nexport const stubFsReadFile = () => JSON.stringify(version);\n\n@injectable()\n/**\n * The data source for retrieving local configuration.\n */\nexport class FileLocalConfigDataSource implements LocalConfigDataSource {\n  /**\n   * Retrieves the local configuration.\n   * @returns An `Either` containing either a `LocalConfigFailure` or a `Config` object.\n   */\n  getConfig(): Either<LocalConfigFailure, Config> {\n    return Either.encase(() => stubFsReadFile())\n      .mapLeft((error) => new ReadFileError(error))\n      .chain((str) => {\n        return Either.encase(() => {\n          const config: unknown = JSON.parse(str);\n          if (isConfig(config)) {\n            return config;\n          }\n          throw new Error(\"Invalid config file\");\n        }).mapLeft((error) => new JSONParseError(error));\n      });\n  }\n}\n"],
  "mappings": "wMAAA,OAAS,cAAAA,MAAkB,YAC3B,OAAS,UAAAC,MAAc,YAEvB,OAAiB,YAAAC,MAAgB,gCACjC,OACE,kBAAAC,EAEA,iBAAAC,MACK,gCACP,OAAOC,MAAS,qBAIhB,MAAMC,EAAU,CACd,KAAMC,EAAI,KACV,QAASA,EAAI,OACf,EAEaC,EAAiB,IAAM,KAAK,UAAUF,CAAO,EAMnD,IAAMG,EAAN,KAAiE,CAKtE,WAAgD,CAC9C,OAAOC,EAAO,OAAO,IAAMF,EAAe,CAAC,EACxC,QAASG,GAAU,IAAIC,EAAcD,CAAK,CAAC,EAC3C,MAAOE,GACCH,EAAO,OAAO,IAAM,CACzB,MAAMI,EAAkB,KAAK,MAAMD,CAAG,EACtC,GAAIE,EAASD,CAAM,EACjB,OAAOA,EAET,MAAM,IAAI,MAAM,qBAAqB,CACvC,CAAC,EAAE,QAASH,GAAU,IAAIK,EAAeL,CAAK,CAAC,CAChD,CACL,CACF,EAlBaF,EAANQ,EAAA,CAJNC,EAAW,GAICT",
  "names": ["injectable", "Either", "isConfig", "JSONParseError", "ReadFileError", "pkg", "version", "pkg", "stubFsReadFile", "FileLocalConfigDataSource", "Either", "error", "ReadFileError", "str", "config", "isConfig", "JSONParseError", "__decorateClass", "injectable"]
}
