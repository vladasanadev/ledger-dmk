"use strict";var e=require("purify-ts"),c=require("../../config/data/LocalConfigDataSource"),n=require("../../config/data/RemoteConfigDataSource"),a=require("../../config/model/Errors"),l=require("../../logger-publisher/service/DefaultLoggerPublisherService"),f=require("./DefaultConfigService");vi.mock("@internal/config/data/LocalConfigDataSource");vi.mock("@internal/config/data/RemoteConfigDataSource");let o,t,r,i;describe("DefaultConfigService",()=>{beforeEach(()=>{vi.clearAllMocks(),o=new c.FileLocalConfigDataSource,t=new n.RestRemoteConfigDataSource,r=new l.DefaultLoggerPublisherService([],"config"),i=new f.DefaultConfigService(o,t,()=>r)}),describe("when the local config is available",()=>{it("should return the `local` version",async()=>{o.getConfig.mockReturnValue(e.Either.of({name:"DeviceSDK",version:"1.0.0-local"})),expect(await i.getDmkConfig()).toStrictEqual({name:"DeviceSDK",version:"1.0.0-local"})})}),describe("when the local config is not available, use remote",()=>{it("should return the `remote` version",async()=>{o.getConfig.mockReturnValue((0,e.Left)(new a.JSONParseError)),t.getConfig.mockResolvedValue(e.Either.of({name:"DeviceSDK",version:"1.0.0-remote"})),expect(await i.getDmkConfig()).toStrictEqual({name:"DeviceSDK",version:"1.0.0-remote"})})}),describe("when the local remote config are not available",()=>{it("should return the `default` version",async()=>{o.getConfig.mockReturnValue((0,e.Left)(new a.JSONParseError)),t.getConfig.mockResolvedValue((0,e.Left)(new a.JSONParseError)),expect(await i.getDmkConfig()).toStrictEqual({name:"DeadDmk",version:"0.0.0-dead.1"})})})});
//# sourceMappingURL=DefaultConfigService.test.js.map
