"use strict";var S=Object.create;var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var E=(e,r,o,c)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of g(r))!h.call(e,i)&&i!==o&&l(e,i,{get:()=>r[i],enumerable:!(c=d(r,i))||c.enumerable});return e};var f=(e,r,o)=>(o=e!=null?S(v(e)):{},E(r||!e||!e.__esModule?l(o,"default",{value:e,enumerable:!0}):o,e));var t=require("purify-ts"),a=require("../../config/model/Errors"),p=f(require("../../../../package.json")),s=f(require("./LocalConfigDataSource"));const{FileLocalConfigDataSource:y}=s,u=vi.spyOn(s,"stubFsReadFile"),m=vi.spyOn(JSON,"parse"),D=vi.spyOn(JSON,"stringify");let n;describe("LocalConfigDataSource",()=>{describe("FileLocalConfigDataSource",()=>{beforeEach(()=>{vi.resetAllMocks(),n=new y}),afterAll(()=>{vi.resetAllMocks()}),it("should return an Either<never, Config>",()=>{u.mockReturnValue(JSON.stringify({name:"DeviceSDK",version:"0.0.0-spied.1"})),m.mockReturnValue({name:"DeviceSDK",version:"0.0.0-spied.1"}),expect(n.getConfig()).toStrictEqual(t.Either.of({name:"DeviceSDK",version:"0.0.0-spied.1"}))}),it("should return an Either<ReadFileError, never> if readFileSync throws",()=>{const e=new Error("readFileSync error");D.mockImplementation(()=>{throw e}),expect(n.getConfig()).toEqual((0,t.Left)(new a.ReadFileError(e)))}),it("should return an Either<JSONParseError, never> if JSON.parse throws",()=>{const e=new Error("JSON.parse error");u.mockReturnValue(JSON.stringify({name:"DeviceSDK",version:"0.0.0-spied.1"})),m.mockImplementation(()=>{throw e}),expect(n.getConfig()).toEqual((0,t.Left)(new a.JSONParseError(e)))})}),describe("stubFsReadFile",()=>{it("should return a stringified version of the version object",()=>{expect(s.stubFsReadFile()).toEqual(JSON.stringify({name:"@ledgerhq/device-management-kit",version:p.default.version}))})})});
//# sourceMappingURL=LocalConfigDataSource.test.js.map
