{
  "version": 3,
  "sources": ["../../../../../../src/internal/config/data/LocalConfigDataSource.ts"],
  "sourcesContent": ["import { injectable } from \"inversify\";\nimport { Either } from \"purify-ts\";\n\nimport { Config, isConfig } from \"@internal/config/model/Config\";\nimport {\n  JSONParseError,\n  LocalConfigFailure,\n  ReadFileError,\n} from \"@internal/config/model/Errors\";\nimport pkg from \"@root/package.json\";\n\nimport { LocalConfigDataSource } from \"./ConfigDataSource\";\n\nconst version = {\n  name: pkg.name,\n  version: pkg.version,\n};\n\nexport const stubFsReadFile = () => JSON.stringify(version);\n\n@injectable()\n/**\n * The data source for retrieving local configuration.\n */\nexport class FileLocalConfigDataSource implements LocalConfigDataSource {\n  /**\n   * Retrieves the local configuration.\n   * @returns An `Either` containing either a `LocalConfigFailure` or a `Config` object.\n   */\n  getConfig(): Either<LocalConfigFailure, Config> {\n    return Either.encase(() => stubFsReadFile())\n      .mapLeft((error) => new ReadFileError(error))\n      .chain((str) => {\n        return Either.encase(() => {\n          const config: unknown = JSON.parse(str);\n          if (isConfig(config)) {\n            return config;\n          }\n          throw new Error(\"Invalid config file\");\n        }).mapLeft((error) => new JSONParseError(error));\n      });\n  }\n}\n"],
  "mappings": "4rBAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,+BAAAE,EAAA,mBAAAC,IAAA,eAAAC,EAAAJ,GAAA,IAAAK,EAA2B,qBAC3BC,EAAuB,qBAEvBC,EAAiC,yCACjCC,EAIO,yCACPC,EAAgB,iCAIhB,MAAMC,EAAU,CACd,KAAM,EAAAC,QAAI,KACV,QAAS,EAAAA,QAAI,OACf,EAEaC,EAAiB,IAAM,KAAK,UAAUF,CAAO,EAMnD,IAAMG,EAAN,KAAiE,CAKtE,WAAgD,CAC9C,OAAO,SAAO,OAAO,IAAMD,EAAe,CAAC,EACxC,QAASE,GAAU,IAAI,gBAAcA,CAAK,CAAC,EAC3C,MAAOC,GACC,SAAO,OAAO,IAAM,CACzB,MAAMC,EAAkB,KAAK,MAAMD,CAAG,EACtC,MAAI,YAASC,CAAM,EACjB,OAAOA,EAET,MAAM,IAAI,MAAM,qBAAqB,CACvC,CAAC,EAAE,QAASF,GAAU,IAAI,iBAAeA,CAAK,CAAC,CAChD,CACL,CACF,EAlBaD,EAANI,EAAA,IAJN,cAAW,GAICJ",
  "names": ["LocalConfigDataSource_exports", "__export", "FileLocalConfigDataSource", "stubFsReadFile", "__toCommonJS", "import_inversify", "import_purify_ts", "import_Config", "import_Errors", "import_package", "version", "pkg", "stubFsReadFile", "FileLocalConfigDataSource", "error", "str", "config", "__decorateClass"]
}
