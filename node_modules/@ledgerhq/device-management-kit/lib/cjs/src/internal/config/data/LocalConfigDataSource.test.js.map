{
  "version": 3,
  "sources": ["../../../../../../src/internal/config/data/LocalConfigDataSource.test.ts"],
  "sourcesContent": ["import { Either, Left } from \"purify-ts\";\n\nimport { JSONParseError, ReadFileError } from \"@internal/config/model/Errors\";\nimport pkg from \"@root/package.json\";\n\nimport { type LocalConfigDataSource } from \"./ConfigDataSource\";\nimport * as LocalConfig from \"./LocalConfigDataSource\";\n\nconst { FileLocalConfigDataSource } = LocalConfig;\n\nconst readFileSyncSpy = vi.spyOn(LocalConfig, \"stubFsReadFile\");\nconst jsonParse = vi.spyOn(JSON, \"parse\");\nconst jsonStringify = vi.spyOn(JSON, \"stringify\");\n\nlet datasource: LocalConfigDataSource;\ndescribe(\"LocalConfigDataSource\", () => {\n  describe(\"FileLocalConfigDataSource\", () => {\n    beforeEach(() => {\n      vi.resetAllMocks();\n      datasource = new FileLocalConfigDataSource();\n    });\n\n    afterAll(() => {\n      vi.resetAllMocks();\n    });\n\n    it(\"should return an Either<never, Config>\", () => {\n      readFileSyncSpy.mockReturnValue(\n        JSON.stringify({ name: \"DeviceSDK\", version: \"0.0.0-spied.1\" }),\n      );\n\n      jsonParse.mockReturnValue({\n        name: \"DeviceSDK\",\n        version: \"0.0.0-spied.1\",\n      });\n\n      expect(datasource.getConfig()).toStrictEqual(\n        Either.of({\n          name: \"DeviceSDK\",\n          version: \"0.0.0-spied.1\",\n        }),\n      );\n    });\n\n    it(\"should return an Either<ReadFileError, never> if readFileSync throws\", () => {\n      const err = new Error(\"readFileSync error\");\n      jsonStringify.mockImplementation(() => {\n        throw err;\n      });\n\n      expect(datasource.getConfig()).toEqual(Left(new ReadFileError(err)));\n    });\n\n    it(\"should return an Either<JSONParseError, never> if JSON.parse throws\", () => {\n      const err = new Error(\"JSON.parse error\");\n      readFileSyncSpy.mockReturnValue(\n        JSON.stringify({ name: \"DeviceSDK\", version: \"0.0.0-spied.1\" }),\n      );\n\n      jsonParse.mockImplementation(() => {\n        throw err;\n      });\n\n      expect(datasource.getConfig()).toEqual(Left(new JSONParseError(err)));\n    });\n  });\n\n  describe(\"stubFsReadFile\", () => {\n    it(\"should return a stringified version of the version object\", () => {\n      expect(LocalConfig.stubFsReadFile()).toEqual(\n        JSON.stringify({\n          name: \"@ledgerhq/device-management-kit\",\n          version: pkg.version,\n        }),\n      );\n    });\n  });\n});\n"],
  "mappings": "wdAAA,IAAAA,EAA6B,qBAE7BC,EAA8C,yCAC9CC,EAAgB,iCAGhBC,EAA6B,sCAE7B,KAAM,CAAE,0BAAAC,CAA0B,EAAID,EAEhCE,EAAkB,GAAG,MAAMF,EAAa,gBAAgB,EACxDG,EAAY,GAAG,MAAM,KAAM,OAAO,EAClCC,EAAgB,GAAG,MAAM,KAAM,WAAW,EAEhD,IAAIC,EACJ,SAAS,wBAAyB,IAAM,CACtC,SAAS,4BAA6B,IAAM,CAC1C,WAAW,IAAM,CACf,GAAG,cAAc,EACjBA,EAAa,IAAIJ,CACnB,CAAC,EAED,SAAS,IAAM,CACb,GAAG,cAAc,CACnB,CAAC,EAED,GAAG,yCAA0C,IAAM,CACjDC,EAAgB,gBACd,KAAK,UAAU,CAAE,KAAM,YAAa,QAAS,eAAgB,CAAC,CAChE,EAEAC,EAAU,gBAAgB,CACxB,KAAM,YACN,QAAS,eACX,CAAC,EAED,OAAOE,EAAW,UAAU,CAAC,EAAE,cAC7B,SAAO,GAAG,CACR,KAAM,YACN,QAAS,eACX,CAAC,CACH,CACF,CAAC,EAED,GAAG,uEAAwE,IAAM,CAC/E,MAAMC,EAAM,IAAI,MAAM,oBAAoB,EAC1CF,EAAc,mBAAmB,IAAM,CACrC,MAAME,CACR,CAAC,EAED,OAAOD,EAAW,UAAU,CAAC,EAAE,WAAQ,QAAK,IAAI,gBAAcC,CAAG,CAAC,CAAC,CACrE,CAAC,EAED,GAAG,sEAAuE,IAAM,CAC9E,MAAMA,EAAM,IAAI,MAAM,kBAAkB,EACxCJ,EAAgB,gBACd,KAAK,UAAU,CAAE,KAAM,YAAa,QAAS,eAAgB,CAAC,CAChE,EAEAC,EAAU,mBAAmB,IAAM,CACjC,MAAMG,CACR,CAAC,EAED,OAAOD,EAAW,UAAU,CAAC,EAAE,WAAQ,QAAK,IAAI,iBAAeC,CAAG,CAAC,CAAC,CACtE,CAAC,CACH,CAAC,EAED,SAAS,iBAAkB,IAAM,CAC/B,GAAG,4DAA6D,IAAM,CACpE,OAAON,EAAY,eAAe,CAAC,EAAE,QACnC,KAAK,UAAU,CACb,KAAM,kCACN,QAAS,EAAAO,QAAI,OACf,CAAC,CACH,CACF,CAAC,CACH,CAAC,CACH,CAAC",
  "names": ["import_purify_ts", "import_Errors", "import_package", "LocalConfig", "FileLocalConfigDataSource", "readFileSyncSpy", "jsonParse", "jsonStringify", "datasource", "err", "pkg"]
}
