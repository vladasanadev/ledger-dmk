"use strict";var o=require("inversify"),a=require("../../../api/transport/model/__mocks__/TransportMock"),s=require("../../device-model/di/deviceModelModule"),c=require("../../device-session/di/deviceSessionModule"),p=require("../../logger-publisher/di/loggerModule"),i=require("./transportDiTypes"),n=require("./transportModule");describe("transportModuleFactory",()=>{describe("Default",()=>{let e,t;beforeEach(()=>{t=(0,n.transportModuleFactory)(),e=new o.Container,e.loadSync(t)}),it("should create the transport module",()=>{expect(t).toBeDefined()}),it("should not bind the TransportService when transports is empty",()=>{try{e.get(i.transportDiTypes.TransportService)}catch(r){expect(r).toBeDefined()}})}),describe("With transports",()=>{let e,t,r;beforeEach(()=>{r=new a.TransportMock,vi.spyOn(r,"getIdentifier").mockReturnValue("MOCK");const l=(0,p.loggerModuleFactory)(),d=(0,s.deviceModelModuleFactory)({stub:!0}),u=(0,c.deviceSessionModuleFactory)({stub:!0});t=(0,n.transportModuleFactory)({transports:[()=>r],config:{managerApiUrl:"http://fake.url/api",mockUrl:"http://fake.url",webSocketUrl:"ws://fake.websocket.url",firmwareDistributionSalt:"salt"}}),e=new o.Container,e.loadSync(l,d,u,t)}),it("should bind the TransportService",()=>{expect(e.get(i.transportDiTypes.TransportService)).toBeDefined()})}),describe("With stub",()=>{let e,t,r;beforeEach(()=>{r=new a.TransportMock,vi.spyOn(r,"getIdentifier").mockReturnValue("MOCK"),t=(0,n.transportModuleFactory)({stub:!0,transports:[()=>r]}),e=new o.Container,e.loadSync(t)}),it("should create the transport module",()=>{expect(t).toBeDefined()})})});
//# sourceMappingURL=transportModule.test.js.map
