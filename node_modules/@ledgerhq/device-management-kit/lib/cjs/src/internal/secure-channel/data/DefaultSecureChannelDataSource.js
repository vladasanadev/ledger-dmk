"use strict";var E=Object.create;var a=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var U=Object.getOwnPropertyNames;var C=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var P=(r,e)=>{for(var t in e)a(r,t,{get:e[t],enumerable:!0})},b=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of U(e))!w.call(r,o)&&o!==t&&a(r,o,{get:()=>e[o],enumerable:!(n=l(e,o))||n.enumerable});return r};var h=(r,e,t)=>(t=r!=null?E(C(r)):{},b(e||!r||!r.__esModule?a(t,"default",{value:r,enumerable:!0}):t,r)),y=r=>b(a({},"__esModule",{value:!0}),r),S=(r,e,t,n)=>{for(var o=n>1?void 0:n?l(e,t):e,p=r.length-1,k;p>=0;p--)(k=r[p])&&(o=(n?k(e,t,o):k(o))||o);return n&&o&&a(e,t,o),o},W=(r,e)=>(t,n)=>e(t,n,r);var A={};P(A,{DefaultSecureChannelDataSource:()=>c});module.exports=y(A);var i=require("inversify"),d=h(require("isomorphic-ws")),m=require("purify-ts"),s=h(require("url")),u=require("../../secure-channel/di/secureChannelTypes"),f=require("../../secure-channel/model/Errors");let c=class{webSocketBaseUrl;constructor({webSocketUrl:e}){this.webSocketBaseUrl=e}genuineCheck(e){const t=s.default.format({pathname:`${this.webSocketBaseUrl}/genuine`,query:e});return this._connectWebSocket(t)}installApp(e){const t=s.default.format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}listInstalledApps(e){const t=s.default.format({pathname:`${this.webSocketBaseUrl}/apps/list`,query:e});return this._connectWebSocket(t)}uninstallApp(e){const t=s.default.format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}updateFirmware(e){const t=s.default.format({pathname:`${this.webSocketBaseUrl}/install`,query:e});return this._connectWebSocket(t)}updateMcu(e){const t=s.default.format({pathname:`${this.webSocketBaseUrl}/mcu`,query:e});return this._connectWebSocket(t)}_connectWebSocket(e){try{return(0,m.Right)(new d.default(e))}catch(t){return(0,m.Left)(new f.WebSocketConnectionError(t))}}};c=S([(0,i.injectable)(),W(0,(0,i.inject)(u.secureChannelTypes.DmkConfig))],c);0&&(module.exports={DefaultSecureChannelDataSource});
//# sourceMappingURL=DefaultSecureChannelDataSource.js.map
