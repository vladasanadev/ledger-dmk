"use strict";var e=require("vitest"),a=require("../../../api/device/DeviceStatus"),o=require("../../../api/device-session/DeviceSessionState"),c=require("./SetProviderUseCase");(0,e.describe)("SetProviderUseCase",()=>{const n=e.vi.fn(),i=e.vi.fn(),p=e.vi.fn(),S={addDeviceSession:e.vi.fn(),getDeviceSessionById:e.vi.fn(),getDeviceSessionByDeviceId:e.vi.fn(),removeDeviceSession:e.vi.fn(),getDeviceSessions:p,sessionsObs:e.vi.fn()},s={setProvider:e.vi.fn()};beforeEach(()=>{e.vi.clearAllMocks(),p.mockReturnValue([{getDeviceSessionState:n,setDeviceSessionState:i}])}),(0,e.it)("should call setProvider on ManagerApiDataSource with the correct provider",()=>{const r=new c.SetProviderUseCase(S,s),t=123;n.mockReturnValue({sessionStateType:o.DeviceSessionStateType.Connected,deviceStatus:a.DeviceStatus.CONNECTED}),r.execute(t),(0,e.expect)(s.setProvider).toHaveBeenCalledWith(t),(0,e.expect)(i).not.toHaveBeenCalled()}),(0,e.it)("should clean the device session",()=>{const r=new c.SetProviderUseCase(S,s),t=123;n.mockReturnValue({sessionStateType:o.DeviceSessionStateType.ReadyWithoutSecureChannel,deviceStatus:a.DeviceStatus.CONNECTED,firmwareVersion:"firmwareVersion",firmwareUpdateContext:"firmwareUpdateContext",installedApps:"apps",appsUpdates:"appsUpdate",catalog:"catalog"}),r.execute(t),(0,e.expect)(s.setProvider).toHaveBeenCalledWith(t),(0,e.expect)(i).toHaveBeenCalledWith({sessionStateType:o.DeviceSessionStateType.ReadyWithoutSecureChannel,deviceStatus:a.DeviceStatus.CONNECTED,firmwareVersion:"firmwareVersion",firmwareUpdateContext:void 0,installedApps:[],appsUpdates:void 0,catalog:void 0})})});
//# sourceMappingURL=SetProviderUseCase.test.js.map
