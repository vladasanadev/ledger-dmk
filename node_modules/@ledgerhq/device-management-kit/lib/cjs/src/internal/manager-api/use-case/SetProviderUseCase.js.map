{
  "version": 3,
  "sources": ["../../../../../../src/internal/manager-api/use-case/SetProviderUseCase.ts"],
  "sourcesContent": ["import { inject, injectable } from \"inversify\";\n\nimport { DeviceSessionStateType } from \"@api/device-session/DeviceSessionState\";\nimport { deviceSessionTypes } from \"@internal/device-session/di/deviceSessionTypes\";\nimport type { DeviceSessionService } from \"@internal/device-session/service/DeviceSessionService\";\nimport { type ManagerApiDataSource } from \"@internal/manager-api/data/ManagerApiDataSource\";\nimport { managerApiTypes } from \"@internal/manager-api/di/managerApiTypes\";\n\n/**\n * Use case to set the provider for the Manager API, this is used to set the\n * provider for the Manager API data source at runtime.\n */\n@injectable()\nexport class SetProviderUseCase {\n  constructor(\n    @inject(deviceSessionTypes.DeviceSessionService)\n    private readonly sessionService: DeviceSessionService,\n    @inject(managerApiTypes.ManagerApiDataSource)\n    private readonly managerApiDataSource: ManagerApiDataSource,\n  ) {}\n\n  execute(provider: number) {\n    // Invalidate device session state fields that are dependent on the provider\n    for (const session of this.sessionService.getDeviceSessions()) {\n      const state = session.getDeviceSessionState();\n      if (state.sessionStateType !== DeviceSessionStateType.Connected) {\n        session.setDeviceSessionState({\n          ...state,\n          firmwareUpdateContext: undefined,\n          installedApps: [],\n          appsUpdates: undefined,\n          catalog: undefined,\n        });\n      }\n    }\n\n    // Update the provider in the manager API\n    this.managerApiDataSource.setProvider(provider);\n  }\n}\n"],
  "mappings": "okBAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,wBAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAAmC,qBAEnCC,EAAuC,kDACvCC,EAAmC,0DAGnCC,EAAgC,oDAOzB,IAAMC,EAAN,KAAyB,CAC9B,YAEmBC,EAEAC,EACjB,CAHiB,oBAAAD,EAEA,0BAAAC,CAChB,CAEH,QAAQC,EAAkB,CAExB,UAAWC,KAAW,KAAK,eAAe,kBAAkB,EAAG,CAC7D,MAAMC,EAAQD,EAAQ,sBAAsB,EACxCC,EAAM,mBAAqB,yBAAuB,WACpDD,EAAQ,sBAAsB,CAC5B,GAAGC,EACH,sBAAuB,OACvB,cAAe,CAAC,EAChB,YAAa,OACb,QAAS,MACX,CAAC,CAEL,CAGA,KAAK,qBAAqB,YAAYF,CAAQ,CAChD,CACF,EA1BaH,EAANM,EAAA,IADN,cAAW,EAGPC,EAAA,eAAO,qBAAmB,oBAAoB,GAE9CA,EAAA,eAAO,kBAAgB,oBAAoB,IAJnCP",
  "names": ["SetProviderUseCase_exports", "__export", "SetProviderUseCase", "__toCommonJS", "import_inversify", "import_DeviceSessionState", "import_deviceSessionTypes", "import_managerApiTypes", "SetProviderUseCase", "sessionService", "managerApiDataSource", "provider", "session", "state", "__decorateClass", "__decorateParam"]
}
