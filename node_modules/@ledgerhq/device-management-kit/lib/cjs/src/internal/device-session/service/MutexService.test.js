"use strict";var e=require("vitest"),c=require("./MutexService");(0,e.describe)("MutexService",()=>{(0,e.it)("should immediately return a release function when not locked",async()=>{const t=await new c.MutexService().lock();(0,e.expect)(typeof t).toBe("function"),t()}),(0,e.it)("should queue subsequent lock calls until the lock is released",async()=>{const o=new c.MutexService,t=await o.lock();let s=!1;const l=o.lock().then(n=>{s=!0,n()});(0,e.expect)(s).toBe(!1),t(),await l,(0,e.expect)(s).toBe(!0)}),(0,e.it)("should queue multiple locks in FIFO order",async()=>{const o=new c.MutexService,t=[],s=await o.lock();t.push("first");const l=o.lock().then(r=>{t.push("second"),r()}),n=o.lock().then(r=>{t.push("third"),r()});t.push("afterqueue"),s(),await Promise.all([l,n]),(0,e.expect)(t).toEqual(["first","afterqueue","second","third"])})});
//# sourceMappingURL=MutexService.test.js.map
