{
  "version": 3,
  "sources": ["../../../../../../src/internal/device-session/di/deviceSessionModule.ts"],
  "sourcesContent": ["import { ContainerModule, type Factory } from \"inversify\";\n\nimport { type ApduReceiverService } from \"@api/device-session/service/ApduReceiverService\";\nimport { type ApduReceiverConstructorArgs } from \"@api/device-session/service/ApduReceiverService\";\nimport { type ApduSenderService } from \"@api/device-session/service/ApduSenderService\";\nimport { type ApduSenderServiceConstructorArgs } from \"@api/device-session/service/ApduSenderService\";\nimport { DisableDeviceSessionRefresherUseCase } from \"@api/device-session/use-case/DisableDeviceSessionRefresher\";\nimport { type LoggerPublisherService } from \"@api/logger-publisher/service/LoggerPublisherService\";\nimport { DefaultApduReceiverService } from \"@internal/device-session/service/DefaultApduReceiverService\";\nimport { DefaultApduSenderService } from \"@internal/device-session/service/DefaultApduSenderService\";\nimport { DefaultDeviceSessionService } from \"@internal/device-session/service/DefaultDeviceSessionService\";\nimport { CloseSessionsUseCase } from \"@internal/device-session/use-case/CloseSessionsUseCase\";\nimport { GetDeviceSessionStateUseCase } from \"@internal/device-session/use-case/GetDeviceSessionStateUseCase\";\nimport { loggerTypes } from \"@internal/logger-publisher/di/loggerTypes\";\nimport { StubUseCase } from \"@root/src/di.stub\";\n\nimport { deviceSessionTypes } from \"./deviceSessionTypes\";\n\nexport type DeviceSessionModuleArgs = Partial<{\n  stub: boolean;\n}>;\n\nexport const deviceSessionModuleFactory = (\n  { stub }: DeviceSessionModuleArgs = { stub: false },\n) =>\n  new ContainerModule(({ bind, rebindSync }) => {\n    bind<Factory<ApduSenderService>>(\n      deviceSessionTypes.ApduSenderServiceFactory,\n    ).toFactory((context) => {\n      const logger = context.get<(name: string) => LoggerPublisherService>(\n        loggerTypes.LoggerPublisherServiceFactory,\n      );\n\n      return (args: ApduSenderServiceConstructorArgs) => {\n        return new DefaultApduSenderService(args, logger);\n      };\n    });\n\n    bind<Factory<ApduReceiverService>>(\n      deviceSessionTypes.ApduReceiverServiceFactory,\n    ).toFactory((context) => {\n      const logger = context.get<(name: string) => LoggerPublisherService>(\n        loggerTypes.LoggerPublisherServiceFactory,\n      );\n\n      return (args: ApduReceiverConstructorArgs = {}) => {\n        return new DefaultApduReceiverService(args, logger);\n      };\n    });\n\n    bind(deviceSessionTypes.DeviceSessionService)\n      .to(DefaultDeviceSessionService)\n      .inSingletonScope();\n\n    bind(deviceSessionTypes.GetDeviceSessionStateUseCase).to(\n      GetDeviceSessionStateUseCase,\n    );\n    bind(deviceSessionTypes.CloseSessionsUseCase).to(CloseSessionsUseCase);\n    bind(deviceSessionTypes.DisableDeviceSessionRefresherUseCase).to(\n      DisableDeviceSessionRefresherUseCase,\n    );\n\n    if (stub) {\n      rebindSync(deviceSessionTypes.GetDeviceSessionStateUseCase).to(\n        StubUseCase,\n      );\n      rebindSync(deviceSessionTypes.DisableDeviceSessionRefresherUseCase).to(\n        StubUseCase,\n      );\n    }\n  });\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,gCAAAE,IAAA,eAAAC,EAAAH,GAAA,IAAAI,EAA8C,qBAM9CC,EAAqD,sEAErDC,EAA2C,uEAC3CC,EAAyC,qEACzCC,EAA4C,wEAC5CC,EAAqC,kEACrCC,EAA6C,0EAC7CC,EAA4B,qDAC5BC,EAA4B,6BAE5BC,EAAmC,gCAM5B,MAAMX,EAA6B,CACxC,CAAE,KAAAY,CAAK,EAA6B,CAAE,KAAM,EAAM,IAElD,IAAI,kBAAgB,CAAC,CAAE,KAAAC,EAAM,WAAAC,CAAW,IAAM,CAC5CD,EACE,qBAAmB,wBACrB,EAAE,UAAWE,GAAY,CACvB,MAAMC,EAASD,EAAQ,IACrB,cAAY,6BACd,EAEA,OAAQE,GACC,IAAI,2BAAyBA,EAAMD,CAAM,CAEpD,CAAC,EAEDH,EACE,qBAAmB,0BACrB,EAAE,UAAWE,GAAY,CACvB,MAAMC,EAASD,EAAQ,IACrB,cAAY,6BACd,EAEA,MAAO,CAACE,EAAoC,CAAC,IACpC,IAAI,6BAA2BA,EAAMD,CAAM,CAEtD,CAAC,EAEDH,EAAK,qBAAmB,oBAAoB,EACzC,GAAG,6BAA2B,EAC9B,iBAAiB,EAEpBA,EAAK,qBAAmB,4BAA4B,EAAE,GACpD,8BACF,EACAA,EAAK,qBAAmB,oBAAoB,EAAE,GAAG,sBAAoB,EACrEA,EAAK,qBAAmB,oCAAoC,EAAE,GAC5D,sCACF,EAEID,IACFE,EAAW,qBAAmB,4BAA4B,EAAE,GAC1D,aACF,EACAA,EAAW,qBAAmB,oCAAoC,EAAE,GAClE,aACF,EAEJ,CAAC",
  "names": ["deviceSessionModule_exports", "__export", "deviceSessionModuleFactory", "__toCommonJS", "import_inversify", "import_DisableDeviceSessionRefresher", "import_DefaultApduReceiverService", "import_DefaultApduSenderService", "import_DefaultDeviceSessionService", "import_CloseSessionsUseCase", "import_GetDeviceSessionStateUseCase", "import_loggerTypes", "import_di", "import_deviceSessionTypes", "stub", "bind", "rebindSync", "context", "logger", "args"]
}
