"use strict";var S=require("../../device-session/data/DeviceSessionRefresherConst"),m=require("../../device-session/model/DeviceSession.stub"),p=require("../../device-session/service/DefaultDeviceSessionService"),l=require("../../device-session/use-case/CloseSessionsUseCase"),u=require("../../logger-publisher/service/DefaultLoggerPublisherService"),f=require("../../manager-api/data/AxiosManagerApiDataSource"),v=require("../../manager-api/service/DefaultManagerApiService"),D=require("../../secure-channel/data/DefaultSecureChannelDataSource"),g=require("../../secure-channel/service/DefaultSecureChannelService"),C=require("../../transport/service/__mocks__/DefaultTransportService");let o,i,t,a,n,r,c;describe("CloseSessionsUseCase",()=>{beforeEach(()=>{o=new u.DefaultLoggerPublisherService([],"close-sessions-use-case-test"),i=new f.AxiosManagerApiDataSource({}),t=new v.DefaultManagerApiService(i),a=new D.DefaultSecureChannelDataSource({}),n=new g.DefaultSecureChannelService(a),r=new p.DefaultDeviceSessionService(()=>o),c=new C.DefaultTransportService}),it("should be able to close every session",()=>{[...Array(10).keys()].map(e=>{const s=(0,m.deviceSessionStubBuilder)({id:e.toString()},()=>o,t,n,S.DEVICE_SESSION_REFRESHER_DEFAULT_OPTIONS);return vi.spyOn(s,"close"),s}).forEach(e=>r.addDeviceSession(e)),new l.CloseSessionsUseCase(r,c).execute();for(const e of r.getDeviceSessions())expect(e.close).toHaveBeenCalled()})});
//# sourceMappingURL=CloseSessionsUseCase.test.js.map
