"use strict";var i=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var c=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var a=(s,e)=>{for(var r in e)i(s,r,{get:e[r],enumerable:!0})},d=(s,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of c(e))!f.call(s,t)&&t!==r&&i(s,t,{get:()=>e[t],enumerable:!(o=h(e,t))||o.enumerable});return s};var n=s=>d(i({},"__esModule",{value:!0}),s);var v={};a(v,{RefresherService:()=>g});module.exports=n(v);var l=require("uuid");class g{constructor(e,r){this._refresher=r;this._logger=e("refresher-service")}_refresherBlockers=new Set;_logger;disableRefresher(e){const r=`${e}-${(0,l.v4)()}`;this.addRefresherBlocker(r),this._logger.debug("Refresher disabled",{data:{blockerId:r,blockers:Array.from(this._refresherBlockers)}});let o=!1;return()=>{o||(o=!0,this.removeRefresherBlocker(r),this._logger.debug("Refresher re-enabled",{data:{blockerId:r,blockers:Array.from(this._refresherBlockers)}}))}}addRefresherBlocker(e){const r=this._refresherBlockers.size;this._refresherBlockers.add(e),r===0&&this._refresher.stop()}removeRefresherBlocker(e){const r=this._refresherBlockers.size;this._refresherBlockers.delete(e),r>0&&this._refresherBlockers.size===0&&this._refresher.start()}}0&&(module.exports={RefresherService});
//# sourceMappingURL=RefresherService.js.map
