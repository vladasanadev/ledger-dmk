"use strict";var u=require("../../device-session/data/DeviceSessionRefresherConst"),p=require("../../device-session/model/DeviceSession.stub"),f=require("../../device-session/model/Errors"),l=require("../../device-session/service/DefaultDeviceSessionService"),v=require("../../logger-publisher/service/DefaultLoggerPublisherService"),D=require("../../manager-api/data/AxiosManagerApiDataSource"),d=require("../../manager-api/service/DefaultManagerApiService"),g=require("../../secure-channel/data/DefaultSecureChannelDataSource"),h=require("../../secure-channel/service/DefaultSecureChannelService"),s=require("./GetDeviceSessionStateUseCase");vi.mock("@internal/manager-api/data/AxiosManagerApiDataSource");let r,o,n,c,S,m;const t="fakeSessionId";describe("GetDeviceSessionStateUseCase",()=>{beforeEach(()=>{r=new v.DefaultLoggerPublisherService([],"get-connected-device-use-case-test"),n=new D.AxiosManagerApiDataSource({}),c=new d.DefaultManagerApiService(n),S=new g.DefaultSecureChannelDataSource({}),m=new h.DefaultSecureChannelService(S),o=new l.DefaultDeviceSessionService(()=>r)}),it("should retrieve deviceSession device state",()=>{const e=(0,p.deviceSessionStubBuilder)({id:t},()=>r,c,m,u.DEVICE_SESSION_REFRESHER_DEFAULT_OPTIONS);o.addDeviceSession(e);const i=new s.GetDeviceSessionStateUseCase(o,()=>r).execute({sessionId:t}),C=e.state;e.close(),expect(i).toStrictEqual(C)}),it("should throw error when deviceSession is not found",()=>new Promise(e=>{const a=new s.GetDeviceSessionStateUseCase(o,()=>r);try{a.execute({sessionId:t}).subscribe()}catch(i){expect(i).toBeInstanceOf(f.DeviceSessionNotFound),e()}}))});
//# sourceMappingURL=GetDeviceSessionStateUseCase.test.js.map
