"use strict";var a=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.prototype.hasOwnProperty;var h=(o,r)=>{for(var t in r)a(o,t,{get:r[t],enumerable:!0})},S=(o,r,t,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let e of u(r))!g.call(o,e)&&e!==t&&a(o,e,{get:()=>r[e],enumerable:!(i=v(r,e))||i.enumerable});return o};var b=o=>S(a({},"__esModule",{value:!0}),o),d=(o,r,t,i)=>{for(var e=i>1?void 0:i?v(r,t):r,p=o.length-1,m;p>=0;p--)(m=o[p])&&(e=(i?m(r,t,e):m(e))||e);return i&&e&&a(r,t,e),e},D=(o,r)=>(t,i)=>r(t,i,o);var w={};h(w,{StartDiscoveringUseCase:()=>n});module.exports=b(w);var c=require("inversify"),s=require("rxjs"),f=require("../../../api/device/DeviceModel"),l=require("../../../api/transport/model/Errors"),T=require("../../transport/di/transportDiTypes");let n=class{constructor(r){this._transportService=r}mapDiscoveredDevice(r){const t=new f.DeviceModel({id:r.id,model:r.deviceModel.id,name:r.deviceModel.productName});return{id:r.id,deviceModel:t,transport:r.transport,name:r.name||t.name,rssi:r.rssi}}execute({transport:r}={}){if(!r){const i=this._transportService.getAllTransports();return(0,s.of)(...i).pipe((0,s.mergeMap)(e=>e.startDiscovering().pipe((0,s.map)(p=>this.mapDiscoveredDevice(p)))))}return this._transportService.getTransport(r).caseOf({Just:i=>i.startDiscovering().pipe((0,s.map)(e=>this.mapDiscoveredDevice(e))),Nothing:()=>{throw new l.TransportNotSupportedError(new Error("Unknown transport"))}})}};n=d([(0,c.injectable)(),D(0,(0,c.inject)(T.transportDiTypes.TransportService))],n);0&&(module.exports={StartDiscoveringUseCase});
//# sourceMappingURL=StartDiscoveringUseCase.js.map
