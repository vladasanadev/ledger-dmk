"use strict";var s=require("purify-ts"),c=require("rxjs"),n=require("../../../api/device/DeviceModel"),a=require("../../../api/transport/model/__mocks__/TransportMock"),d=require("../../transport/service/DefaultTransportService"),p=require("./StartDiscoveringUseCase");vi.mock("@internal/transport/service/DefaultTransportService");let r,o;describe("StartDiscoveringUseCase",()=>{const v={id:"internal-discovered-device-id",deviceModel:{id:"nanoSP",productName:"productName"},transport:"USB",rssi:void 0};beforeEach(()=>{r=new a.TransportMock,o=new d.DefaultTransportService}),afterEach(()=>{vi.restoreAllMocks()}),test("If connect use case encounter an error, return it",()=>new Promise((m,t)=>{const i=vi.fn(()=>(0,c.of)(v));vi.spyOn(r,"startDiscovering").mockImplementation(i),vi.spyOn(o,"getTransport").mockReturnValue(s.Maybe.of(r));const l=new p.StartDiscoveringUseCase(o).execute({transport:"USB"});expect(i).toHaveBeenCalled(),l.subscribe({next:e=>{try{expect(e).toStrictEqual({id:"internal-discovered-device-id",transport:"USB",name:"productName",deviceModel:new n.DeviceModel({id:"internal-discovered-device-id",model:"nanoSP",name:"productName"}),rssi:void 0}),m()}catch(D){t(D)}},error:e=>{t(e)}})}))});
//# sourceMappingURL=StartDiscoveringUseCase.test.js.map
