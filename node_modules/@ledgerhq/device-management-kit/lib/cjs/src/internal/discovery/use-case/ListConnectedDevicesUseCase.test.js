"use strict";var n=require("../../../api/transport/model/ConnectedDevice"),c=require("../../device-session/data/DeviceSessionRefresherConst"),a=require("../../device-session/model/DeviceSession.stub"),u=require("../../device-session/service/DefaultDeviceSessionService"),S=require("../../discovery/use-case/ListConnectedDevicesUseCase"),l=require("../../logger-publisher/service/DefaultLoggerPublisherService"),v=require("../../manager-api/data/AxiosManagerApiDataSource"),D=require("../../manager-api/service/DefaultManagerApiService"),f=require("../../secure-channel/data/DefaultSecureChannelDataSource"),d=require("../../secure-channel/service/DefaultSecureChannelService");let i,o,m,s,p,t;describe("ListDeviceSessionsUseCase",()=>{beforeEach(()=>{i=new l.DefaultLoggerPublisherService([],"list-device-sessions-use-case-test"),m=new v.AxiosManagerApiDataSource({}),s=new D.DefaultManagerApiService(m),p=new f.DefaultSecureChannelDataSource({}),t=new d.DefaultSecureChannelService(p),o=new u.DefaultDeviceSessionService(()=>i)}),it("should list all device sessions",()=>{const r=(0,a.deviceSessionStubBuilder)({id:"1"},()=>i,s,t,c.DEVICE_SESSION_REFRESHER_DEFAULT_OPTIONS),e=(0,a.deviceSessionStubBuilder)({id:"2"},()=>i,s,t,c.DEVICE_SESSION_REFRESHER_DEFAULT_OPTIONS);o.addDeviceSession(r),o.addDeviceSession(e);const C=new S.ListConnectedDevicesUseCase(o,()=>i).execute();r.close(),e.close(),expect(C).toStrictEqual([new n.ConnectedDevice({transportConnectedDevice:r.connectedDevice,sessionId:r.id}),new n.ConnectedDevice({transportConnectedDevice:e.connectedDevice,sessionId:e.id})])}),it("should return empty array if no device sessions",()=>{const e=new S.ListConnectedDevicesUseCase(o,()=>i).execute();expect(e).toStrictEqual([])})});
//# sourceMappingURL=ListConnectedDevicesUseCase.test.js.map
