{
  "version": 3,
  "sources": ["../../../../../../src/internal/discovery/di/discoveryModule.test.ts"],
  "sourcesContent": ["import { Container } from \"inversify\";\n\nimport { TransportMock } from \"@api/transport/model/__mocks__/TransportMock\";\nimport { type DmkConfig, type Transport } from \"@api/types\";\nimport { deviceModelModuleFactory } from \"@internal/device-model/di/deviceModelModule\";\nimport { deviceSessionModuleFactory } from \"@internal/device-session/di/deviceSessionModule\";\nimport { ConnectUseCase } from \"@internal/discovery/use-case/ConnectUseCase\";\nimport { DisconnectUseCase } from \"@internal/discovery/use-case/DisconnectUseCase\";\nimport { ListConnectedDevicesUseCase } from \"@internal/discovery/use-case/ListConnectedDevicesUseCase\";\nimport { ListenToAvailableDevicesUseCase } from \"@internal/discovery/use-case/ListenToAvailableDevicesUseCase\";\nimport { ReconnectUseCase } from \"@internal/discovery/use-case/ReconnectUseCase\";\nimport { StartDiscoveringUseCase } from \"@internal/discovery/use-case/StartDiscoveringUseCase\";\nimport { StopDiscoveringUseCase } from \"@internal/discovery/use-case/StopDiscoveringUseCase\";\nimport { loggerModuleFactory } from \"@internal/logger-publisher/di/loggerModule\";\nimport { managerApiModuleFactory } from \"@internal/manager-api/di/managerApiModule\";\nimport { secureChannelModuleFactory } from \"@internal/secure-channel/di/secureChannelModule\";\nimport { transportModuleFactory } from \"@internal/transport/di/transportModule\";\n\nimport { discoveryModuleFactory } from \"./discoveryModule\";\nimport { discoveryTypes } from \"./discoveryTypes\";\n\ndescribe(\"discoveryModuleFactory\", () => {\n  let container: Container;\n  let mod: ReturnType<typeof discoveryModuleFactory>;\n  let transport: Transport;\n  beforeEach(() => {\n    mod = discoveryModuleFactory({ stub: false });\n    container = new Container();\n    transport = new TransportMock();\n\n    container.loadSync(\n      mod,\n      // The following modules are injected into discovery module\n      loggerModuleFactory(),\n      deviceModelModuleFactory({ stub: false }),\n      deviceSessionModuleFactory(),\n      transportModuleFactory({\n        transports: [vi.fn().mockImplementation(() => transport)],\n      }),\n      managerApiModuleFactory({\n        config: {\n          managerApiUrl: \"http://fake.url\",\n          mockUrl: \"http://fake-mock.url\",\n        } as DmkConfig,\n      }),\n      secureChannelModuleFactory({\n        config: {\n          webSocketUrl: \"http://fake-websocket.url\",\n        } as DmkConfig,\n      }),\n    );\n  });\n  it(\"should return the device module\", () => {\n    expect(mod).toBeDefined();\n  });\n\n  it(\"should return none mocked use cases\", () => {\n    const startDiscoveringUseCase = container.get(\n      discoveryTypes.StartDiscoveringUseCase,\n    );\n    expect(startDiscoveringUseCase).toBeInstanceOf(StartDiscoveringUseCase);\n\n    const stopDiscoveringUseCase = container.get(\n      discoveryTypes.StopDiscoveringUseCase,\n    );\n    expect(stopDiscoveringUseCase).toBeInstanceOf(StopDiscoveringUseCase);\n\n    const disconnectUseCase = container.get(discoveryTypes.DisconnectUseCase);\n    expect(disconnectUseCase).toBeInstanceOf(DisconnectUseCase);\n\n    const connectUseCase = container.get(discoveryTypes.ConnectUseCase);\n    expect(connectUseCase).toBeInstanceOf(ConnectUseCase);\n\n    const listenToAvailableDevicesUseCase = container.get(\n      discoveryTypes.ListenToAvailableDevicesUseCase,\n    );\n    expect(listenToAvailableDevicesUseCase).toBeInstanceOf(\n      ListenToAvailableDevicesUseCase,\n    );\n    const listConnectedDevicesUseCase = container.get(\n      discoveryTypes.ListConnectedDevicesUseCase,\n    );\n    expect(listConnectedDevicesUseCase).toBeInstanceOf(\n      ListConnectedDevicesUseCase,\n    );\n    const reconnectUseCase = container.get(discoveryTypes.ReconnectUseCase);\n    expect(reconnectUseCase).toBeInstanceOf(ReconnectUseCase);\n  });\n});\n"],
  "mappings": "aAAA,IAAAA,EAA0B,qBAE1BC,EAA8B,wDAE9BC,EAAyC,uDACzCC,EAA2C,2DAC3CC,EAA+B,uDAC/BC,EAAkC,0DAClCC,EAA4C,oEAC5CC,EAAgD,wEAChDC,EAAiC,yDACjCC,EAAwC,gEACxCC,EAAuC,+DACvCC,EAAoC,sDACpCC,EAAwC,qDACxCC,EAA2C,2DAC3CC,EAAuC,kDAEvCC,EAAuC,6BACvCC,EAA+B,4BAE/B,SAAS,yBAA0B,IAAM,CACvC,IAAIC,EACAC,EACAC,EACJ,WAAW,IAAM,CACfD,KAAM,0BAAuB,CAAE,KAAM,EAAM,CAAC,EAC5CD,EAAY,IAAI,YAChBE,EAAY,IAAI,gBAEhBF,EAAU,SACRC,KAEA,uBAAoB,KACpB,4BAAyB,CAAE,KAAM,EAAM,CAAC,KACxC,8BAA2B,KAC3B,0BAAuB,CACrB,WAAY,CAAC,GAAG,GAAG,EAAE,mBAAmB,IAAMC,CAAS,CAAC,CAC1D,CAAC,KACD,2BAAwB,CACtB,OAAQ,CACN,cAAe,kBACf,QAAS,sBACX,CACF,CAAC,KACD,8BAA2B,CACzB,OAAQ,CACN,aAAc,2BAChB,CACF,CAAC,CACH,CACF,CAAC,EACD,GAAG,kCAAmC,IAAM,CAC1C,OAAOD,CAAG,EAAE,YAAY,CAC1B,CAAC,EAED,GAAG,sCAAuC,IAAM,CAC9C,MAAME,EAA0BH,EAAU,IACxC,iBAAe,uBACjB,EACA,OAAOG,CAAuB,EAAE,eAAe,yBAAuB,EAEtE,MAAMC,EAAyBJ,EAAU,IACvC,iBAAe,sBACjB,EACA,OAAOI,CAAsB,EAAE,eAAe,wBAAsB,EAEpE,MAAMC,EAAoBL,EAAU,IAAI,iBAAe,iBAAiB,EACxE,OAAOK,CAAiB,EAAE,eAAe,mBAAiB,EAE1D,MAAMC,EAAiBN,EAAU,IAAI,iBAAe,cAAc,EAClE,OAAOM,CAAc,EAAE,eAAe,gBAAc,EAEpD,MAAMC,EAAkCP,EAAU,IAChD,iBAAe,+BACjB,EACA,OAAOO,CAA+B,EAAE,eACtC,iCACF,EACA,MAAMC,EAA8BR,EAAU,IAC5C,iBAAe,2BACjB,EACA,OAAOQ,CAA2B,EAAE,eAClC,6BACF,EACA,MAAMC,EAAmBT,EAAU,IAAI,iBAAe,gBAAgB,EACtE,OAAOS,CAAgB,EAAE,eAAe,kBAAgB,CAC1D,CAAC,CACH,CAAC",
  "names": ["import_inversify", "import_TransportMock", "import_deviceModelModule", "import_deviceSessionModule", "import_ConnectUseCase", "import_DisconnectUseCase", "import_ListConnectedDevicesUseCase", "import_ListenToAvailableDevicesUseCase", "import_ReconnectUseCase", "import_StartDiscoveringUseCase", "import_StopDiscoveringUseCase", "import_loggerModule", "import_managerApiModule", "import_secureChannelModule", "import_transportModule", "import_discoveryModule", "import_discoveryTypes", "container", "mod", "transport", "startDiscoveringUseCase", "stopDiscoveringUseCase", "disconnectUseCase", "connectUseCase", "listenToAvailableDevicesUseCase", "listConnectedDevicesUseCase", "reconnectUseCase"]
}
