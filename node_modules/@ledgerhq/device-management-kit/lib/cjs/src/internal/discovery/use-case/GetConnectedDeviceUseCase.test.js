"use strict";var s=require("../../../api/transport/model/ConnectedDevice"),a=require("../../device-session/data/DeviceSessionRefresherConst"),S=require("../../device-session/model/DeviceSession.stub"),v=require("../../device-session/service/DefaultDeviceSessionService"),f=require("../../logger-publisher/service/DefaultLoggerPublisherService"),l=require("../../manager-api/data/AxiosManagerApiDataSource"),D=require("../../manager-api/service/DefaultManagerApiService"),d=require("../../secure-channel/data/DefaultSecureChannelDataSource"),g=require("../../secure-channel/service/DefaultSecureChannelService"),m=require("./GetConnectedDeviceUseCase");vi.mock("@internal/manager-api/data/AxiosManagerApiDataSource");let r,o,p,t,u,c;const i="fakeSessionId";describe("GetConnectedDevice",()=>{beforeEach(()=>{r=new f.DefaultLoggerPublisherService([],"get-connected-device-use-case"),p=new l.AxiosManagerApiDataSource({}),t=new D.DefaultManagerApiService(p),u=new d.DefaultSecureChannelDataSource({}),c=new g.DefaultSecureChannelService(u),o=new v.DefaultDeviceSessionService(()=>r)}),it("should retrieve an instance of ConnectedDevice",()=>{const e=(0,S.deviceSessionStubBuilder)({id:i},()=>r,t,c,a.DEVICE_SESSION_REFRESHER_DEFAULT_OPTIONS);o.addDeviceSession(e);const n=new m.GetConnectedDeviceUseCase(o,()=>r).execute({sessionId:i});e.close(),expect(n).toBeInstanceOf(s.ConnectedDevice)}),it("should retrieve correct device from session",()=>{const e=(0,S.deviceSessionStubBuilder)({id:i},()=>r,t,c,a.DEVICE_SESSION_REFRESHER_DEFAULT_OPTIONS);o.addDeviceSession(e);const n=new m.GetConnectedDeviceUseCase(o,()=>r).execute({sessionId:i});e.close(),expect(n).toStrictEqual(new s.ConnectedDevice({sessionId:i,transportConnectedDevice:e.connectedDevice}))})});
//# sourceMappingURL=GetConnectedDeviceUseCase.test.js.map
