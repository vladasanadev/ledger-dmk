"use strict";var m=require("../../../api/transport/model/ConnectedDevice"),S=require("../../../api/transport/model/TransportConnectedDevice.stub"),p=require("../../device-session/data/DeviceSessionRefresherConst"),u=require("../../device-session/model/DeviceSession.stub"),l=require("../../device-session/service/DefaultDeviceSessionService"),v=require("../../discovery/use-case/ListenToConnectedDeviceUseCase"),f=require("../../logger-publisher/service/DefaultLoggerPublisherService"),D=require("../../manager-api/data/AxiosManagerApiDataSource"),d=require("../../manager-api/service/DefaultManagerApiService"),g=require("../../secure-channel/data/DefaultSecureChannelDataSource"),C=require("../../secure-channel/service/DefaultSecureChannelService");vi.mock("@internal/manager-api/data/AxiosManagerApiDataSource");let e,r,t,n,c,a;const s="test-list-connected-device-session-id";describe("ListenToConnectedDevice",()=>{beforeEach(()=>{e=new f.DefaultLoggerPublisherService([],"listen-to-connected-device-use-case"),t=new D.AxiosManagerApiDataSource({}),n=new d.DefaultManagerApiService(t),c=new g.DefaultSecureChannelDataSource({}),a=new C.DefaultSecureChannelService(c),r=new l.DefaultDeviceSessionService(()=>e)}),it("should emit an instance of ConnectedDevice",()=>new Promise((b,h)=>{const i=(0,S.connectedDeviceStubBuilder)({id:"test-list-connected-device-id"}),o=(0,u.deviceSessionStubBuilder)({id:s,connectedDevice:i},()=>e,n,a,p.DEVICE_SESSION_REFRESHER_DEFAULT_OPTIONS),A=new v.ListenToConnectedDeviceUseCase(r,()=>e).execute().subscribe({next(E){try{expect(E).toEqual(new m.ConnectedDevice({transportConnectedDevice:i,sessionId:s})),w()}catch(y){h(y)}}});function w(){A.unsubscribe(),o.close(),b()}r.addDeviceSession(o)}))});
//# sourceMappingURL=ListenToConnectedDeviceUseCase.test.js.map
