"use strict";var o=require("../../command/model/CommandResult"),n=require("../../device-session/ApduResponse"),d=require("./GetAppAndVersionCommand");const i=Uint8Array.from([176,1,0,0,0]),a=Uint8Array.from([1,5,66,79,76,79,83,9,49,46,52,46,48,45,114,99,50,144,0]),x=Uint8Array.from([1,7,66,105,116,99,111,105,110,11,50,46,49,46,53,45,97,108,112,104,97,1,2,144,0]),p=Uint8Array.from([103,0]),c=Uint8Array.from([4,144,0]);describe("GetAppAndVersionCommand",()=>{let t;beforeEach(()=>{t=new d.GetAppAndVersionCommand}),describe("name",()=>{it("should be 'getAppAndVersion'",()=>{expect(t.name).toBe("getAppAndVersion")})}),describe("getApdu",()=>{it("should return the GetAppAndVersion APDU",()=>{const e=t.getApdu();expect(e.getRawApdu()).toStrictEqual(i)})}),describe("parseResponse",()=>{it("should parse the response when launching OS (dashboard)",()=>{const e=new n.ApduResponse({statusCode:a.slice(-2),data:a.slice(0,-2)}),s=t.parseResponse(e),r=(0,o.CommandResultFactory)({data:{name:"BOLOS",version:"1.4.0-rc2"}});expect(s).toStrictEqual(r)}),it("should parse the response when launching App",()=>{const e=new n.ApduResponse({statusCode:x.slice(-2),data:x.slice(0,-2)}),s=t.parseResponse(e),r=(0,o.CommandResultFactory)({data:{name:"Bitcoin",version:"2.1.5-alpha",flags:Uint8Array.from([2])}});expect(s).toStrictEqual(r)}),it("should throw an error if the command failed",()=>{const e=new n.ApduResponse({statusCode:p.slice(-2),data:p.slice(0,-2)}),s=t.parseResponse(e);expect((0,o.isSuccessCommandResult)(s)).toBeFalsy()}),it("should return an error if the response returned unsupported format",()=>{const e=new n.ApduResponse({statusCode:c.slice(-2),data:c.slice(0,-2)}),s=t.parseResponse(e);expect((0,o.isSuccessCommandResult)(s)).toBeFalsy()})})});
//# sourceMappingURL=GetAppAndVersionCommand.test.js.map
