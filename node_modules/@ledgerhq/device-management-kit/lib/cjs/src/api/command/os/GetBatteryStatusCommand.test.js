"use strict";var a=require("../../command/model/CommandResult"),r=require("../../device-session/ApduResponse"),t=require("./GetBatteryStatusCommand");const p=Uint8Array.from([224,16,0,0,0]),u=Uint8Array.from([224,16,0,1,0]),R=Uint8Array.from([224,16,0,2,0]),d=Uint8Array.from([224,16,0,3,0]),i=Uint8Array.from([224,16,0,4,0]),n=Uint8Array.from([55,144,0]),o=Uint8Array.from([15,255,144,0]),T=Uint8Array.from([16,144,0]),c=Uint8Array.from([0,0,0,15,144,0]),A=Uint8Array.from([103,0]);describe("GetBatteryStatus",()=>{describe("name",()=>{it("should be 'getBatteryStatus'",()=>{const e=new t.GetBatteryStatusCommand({statusType:t.BatteryStatusType.BATTERY_PERCENTAGE});expect(e.name).toBe("getBatteryStatus")})}),describe("getApdu",()=>{it("should return the GetBatteryStatus APDU",()=>{expect(new t.GetBatteryStatusCommand({statusType:t.BatteryStatusType.BATTERY_PERCENTAGE}).getApdu().getRawApdu()).toStrictEqual(p),expect(new t.GetBatteryStatusCommand({statusType:t.BatteryStatusType.BATTERY_VOLTAGE}).getApdu().getRawApdu()).toStrictEqual(u),expect(new t.GetBatteryStatusCommand({statusType:t.BatteryStatusType.BATTERY_TEMPERATURE}).getApdu().getRawApdu()).toStrictEqual(R),expect(new t.GetBatteryStatusCommand({statusType:t.BatteryStatusType.BATTERY_CURRENT}).getApdu().getRawApdu()).toStrictEqual(d),expect(new t.GetBatteryStatusCommand({statusType:t.BatteryStatusType.BATTERY_FLAGS}).getApdu().getRawApdu()).toStrictEqual(i)})}),describe("parseResponse",()=>{it("should parse the response when querying percentage",()=>{const e=new r.ApduResponse({statusCode:n.slice(-2),data:n.slice(0,-2)}),s=new t.GetBatteryStatusCommand({statusType:t.BatteryStatusType.BATTERY_PERCENTAGE}).parseResponse(e);expect(s).toStrictEqual((0,a.CommandResultFactory)({data:55}))}),it("should parse the response when querying voltage",()=>{const e=new r.ApduResponse({statusCode:o.slice(-2),data:o.slice(0,-2)}),s=new t.GetBatteryStatusCommand({statusType:t.BatteryStatusType.BATTERY_VOLTAGE}).parseResponse(e);expect(s).toStrictEqual((0,a.CommandResultFactory)({data:4095}))}),it("should parse the response when querying temperature",()=>{const e=new r.ApduResponse({statusCode:T.slice(-2),data:T.slice(0,-2)}),s=new t.GetBatteryStatusCommand({statusType:t.BatteryStatusType.BATTERY_TEMPERATURE}).parseResponse(e);expect(s).toStrictEqual((0,a.CommandResultFactory)({data:16}))}),it("should parse the response when querying flags",()=>{const e=new r.ApduResponse({statusCode:c.slice(-2),data:c.slice(0,-2)}),s=new t.GetBatteryStatusCommand({statusType:t.BatteryStatusType.BATTERY_FLAGS}).parseResponse(e);expect(s).toStrictEqual((0,a.CommandResultFactory)({data:{charging:t.ChargingMode.USB,issueCharging:!1,issueTemperature:!1,issueBattery:!1}}))}),it("should return an error if the response returned unsupported format",()=>{const e=new r.ApduResponse({statusCode:A.slice(-2),data:A.slice(0,-2)}),s=new t.GetBatteryStatusCommand({statusType:t.BatteryStatusType.BATTERY_PERCENTAGE}).parseResponse(e);expect((0,a.isSuccessCommandResult)(s)).toBeFalsy()})})});
//# sourceMappingURL=GetBatteryStatusCommand.test.js.map
