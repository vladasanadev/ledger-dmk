{
  "version": 3,
  "sources": ["../../../../../../src/api/command/utils/GlobalCommandError.test.ts"],
  "sourcesContent": ["import {\n  GlobalCommandError,\n  GlobalCommandErrorHandler,\n} from \"@api/command/utils/GlobalCommandError\";\nimport { ApduResponse } from \"@api/device-session/ApduResponse\";\n\nimport { isCommandErrorCode } from \"./CommandErrors\";\n\n// [statusCode, errorTag, testLabel]\nconst GLOBAL_ERRORS_LIST: [Uint8Array, string, string][] = [\n  [Uint8Array.from([0x55, 0x15]), \"DeviceLockedError\", \"device locked error\"],\n  [Uint8Array.from([0x55, 0x01]), \"ActionRefusedError\", \"action refused error\"],\n  [Uint8Array.from([0x55, 0x02]), \"PinNotSetError\", \"pin not set error\"],\n  [\n    Uint8Array.from([0x52, 0x23]),\n    \"DeviceInternalError\",\n    \"device internal error\",\n  ],\n];\n\ndescribe(\"GlobalCommandError\", () => {\n  describe.each(GLOBAL_ERRORS_LIST)(\n    \"GlobalCommandErrorHandler\",\n    (statusCode, errorTag, testLabel) => {\n      it(`should return a ${testLabel}`, () => {\n        // given\n        const apduResponse = new ApduResponse({\n          statusCode,\n          data: Uint8Array.from([]),\n        });\n        // when\n        const result = GlobalCommandErrorHandler.handle(apduResponse);\n        // then\n        expect(result).toBeInstanceOf(GlobalCommandError);\n        expect(result._tag).toStrictEqual(errorTag);\n      });\n    },\n  );\n\n  describe(\"isCommandErrorCode\", () => {\n    it(\"should return true if command error code is in list\", () => {\n      // given\n      const errors = {\n        4242: { message: \"test\" },\n      };\n      // when\n      const isErrorCode = isCommandErrorCode(\"4242\", errors);\n      // then\n      expect(isErrorCode).toBe(true);\n    });\n    it(\"should return false if command error code is not in list\", () => {\n      // given\n      const errors = {\n        4242: { message: \"test\" },\n      };\n      // when\n      const isErrorCode = isCommandErrorCode(\"2121\", errors);\n      // then\n      expect(isErrorCode).toBe(false);\n    });\n  });\n});\n"],
  "mappings": "aAAA,IAAAA,EAGO,iDACPC,EAA6B,4CAE7BC,EAAmC,2BAGnC,MAAMC,EAAqD,CACzD,CAAC,WAAW,KAAK,CAAC,GAAM,EAAI,CAAC,EAAG,oBAAqB,qBAAqB,EAC1E,CAAC,WAAW,KAAK,CAAC,GAAM,CAAI,CAAC,EAAG,qBAAsB,sBAAsB,EAC5E,CAAC,WAAW,KAAK,CAAC,GAAM,CAAI,CAAC,EAAG,iBAAkB,mBAAmB,EACrE,CACE,WAAW,KAAK,CAAC,GAAM,EAAI,CAAC,EAC5B,sBACA,uBACF,CACF,EAEA,SAAS,qBAAsB,IAAM,CACnC,SAAS,KAAKA,CAAkB,EAC9B,4BACA,CAACC,EAAYC,EAAUC,IAAc,CACnC,GAAG,mBAAmBA,CAAS,GAAI,IAAM,CAEvC,MAAMC,EAAe,IAAI,eAAa,CACpC,WAAAH,EACA,KAAM,WAAW,KAAK,CAAC,CAAC,CAC1B,CAAC,EAEKI,EAAS,4BAA0B,OAAOD,CAAY,EAE5D,OAAOC,CAAM,EAAE,eAAe,oBAAkB,EAChD,OAAOA,EAAO,IAAI,EAAE,cAAcH,CAAQ,CAC5C,CAAC,CACH,CACF,EAEA,SAAS,qBAAsB,IAAM,CACnC,GAAG,sDAAuD,IAAM,CAM9D,MAAMI,KAAc,sBAAmB,OAJxB,CACb,KAAM,CAAE,QAAS,MAAO,CAC1B,CAEqD,EAErD,OAAOA,CAAW,EAAE,KAAK,EAAI,CAC/B,CAAC,EACD,GAAG,2DAA4D,IAAM,CAMnE,MAAMA,KAAc,sBAAmB,OAJxB,CACb,KAAM,CAAE,QAAS,MAAO,CAC1B,CAEqD,EAErD,OAAOA,CAAW,EAAE,KAAK,EAAK,CAChC,CAAC,CACH,CAAC,CACH,CAAC",
  "names": ["import_GlobalCommandError", "import_ApduResponse", "import_CommandErrors", "GLOBAL_ERRORS_LIST", "statusCode", "errorTag", "testLabel", "apduResponse", "result", "isErrorCode"]
}
