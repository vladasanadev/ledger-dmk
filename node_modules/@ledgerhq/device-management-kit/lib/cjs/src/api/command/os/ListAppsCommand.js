"use strict";var n=Object.defineProperty;var L=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var f=(s,r)=>{for(var o in r)n(s,o,{get:r[o],enumerable:!0})},R=(s,r,o,e)=>{if(r&&typeof r=="object"||typeof r=="function")for(let t of E(r))!h.call(s,t)&&t!==o&&n(s,t,{get:()=>r[t],enumerable:!(e=L(r,t))||e.enumerable});return s};var B=s=>R(n({},"__esModule",{value:!0}),s);var H={};f(H,{ListAppsCommand:()=>S,ListAppsCommandError:()=>u});module.exports=B(H);var i=require("../../apdu/utils/ApduBuilder"),d=require("../../apdu/utils/ApduParser"),p=require("../../command/model/CommandResult"),m=require("../../command/utils/CommandErrors"),l=require("../../command/utils/CommandUtils"),A=require("../../command/utils/GlobalCommandError"),c=require("../../Error");const a={6624:{message:"Invalid state (List applications command must be sent)"}};class u extends c.DeviceExchangeError{constructor({message:r,errorCode:o}){super({message:r,errorCode:o,tag:"ListAppsCommandError"})}}class S{name="listApps";args;constructor(r={isContinue:!1}){this.args=r}getApdu(){const r={cla:224,ins:this.args.isContinue?223:222,p1:0,p2:0};return new i.ApduBuilder(r).build()}parseResponse(r){const o=[],e=new d.ApduParser(r);if(!l.CommandUtils.isSuccessResponse(r)){const t=e.encodeToHexaString(r.statusCode);return(0,m.isCommandErrorCode)(t,a)?(0,p.CommandResultFactory)({error:new u({...a[t],errorCode:t})}):(0,p.CommandResultFactory)({error:A.GlobalCommandErrorHandler.handle(r)})}if(r.data.length<=0)return(0,p.CommandResultFactory)({data:[]});for(e.extract8BitUInt();e.getUnparsedRemainingLength()>0;){const t=e.extract8BitUInt(),C=e.extract16BitUInt();e.extract16BitUInt();const g=e.encodeToHexaString(e.extractFieldByLength(32)),x=e.encodeToHexaString(e.extractFieldByLength(32)),y=e.encodeToString(e.extractFieldLVEncoded());o.push({appEntryLength:t,appSizeInBlocks:C,appCodeHash:g,appFullHash:x,appName:y})}return(0,p.CommandResultFactory)({data:o})}}0&&(module.exports={ListAppsCommand,ListAppsCommandError});
//# sourceMappingURL=ListAppsCommand.js.map
