"use strict";var r=require("../../command/os/CloseAppCommand"),o=require("../../command/os/GetAppAndVersionCommand"),a=require("../../command/os/OpenAppCommand"),s=require("../../device-session/ApduResponse"),t=require("./CommandUtils");describe("CommandUtils",()=>{describe("static isSuccessResponse",()=>{it("should return true if the status code is 0x9000",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([144,0]),data:Uint8Array.from([])});expect(t.CommandUtils.isSuccessResponse(e)).toBe(!0)}),it("should return false if the status code is not 0x9000",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([110,128]),data:Uint8Array.from([])});expect(t.CommandUtils.isSuccessResponse(e)).toBe(!1)}),it("should return false if the status code is not 2 bytes long",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([85]),data:Uint8Array.from([])});expect(t.CommandUtils.isSuccessResponse(e)).toBe(!1)})}),describe("static isValidStatusCode",()=>{it("should return true if the status code is 2 bytes long",()=>{const e=Uint8Array.from([144,0]);expect(t.CommandUtils.isValidStatusCode(e)).toBe(!0)}),it("should return false if the status code is not 2 bytes long",()=>{const e=Uint8Array.from([144]);expect(t.CommandUtils.isValidStatusCode(e)).toBe(!1)})}),describe("static isLockedDeviceResponse",()=>{it("should return true if the status code is 0x5515",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([85,21]),data:Uint8Array.from([])});expect(t.CommandUtils.isLockedDeviceResponse(e)).toBe(!0)}),it("should return true if the status code is 0x6982",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([105,130]),data:Uint8Array.from([])});expect(t.CommandUtils.isLockedDeviceResponse(e)).toBe(!0)}),it("should return true if the status code is 0x5303",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([83,3]),data:Uint8Array.from([])});expect(t.CommandUtils.isLockedDeviceResponse(e)).toBe(!0)}),it("should return false if the status code is not 0x5515",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([144,0]),data:Uint8Array.from([])});expect(t.CommandUtils.isLockedDeviceResponse(e)).toBe(!1)}),it("should return false if the status code is not 2 bytes long",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([144]),data:Uint8Array.from([])});expect(t.CommandUtils.isLockedDeviceResponse(e)).toBe(!1)})}),describe("static isRefusedByUser",()=>{it("should return true if the status code is 0x5501",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([85,1]),data:Uint8Array.from([])});expect(t.CommandUtils.isRefusedByUser(e)).toBe(!0)}),it("should return true if the status code is 0x6985",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([105,133]),data:Uint8Array.from([])});expect(t.CommandUtils.isRefusedByUser(e)).toBe(!0)}),it("should return false if the status code is not 0x5501",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([144,0]),data:Uint8Array.from([])});expect(t.CommandUtils.isRefusedByUser(e)).toBe(!1)})}),describe("static isAppAlreadyInstalled",()=>{it("should return true if the status code is 0x6a80",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([106,128]),data:Uint8Array.from([])});expect(t.CommandUtils.isAppAlreadyInstalled(e)).toBe(!0)}),it("should return true if the status code is 0x6a81",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([106,129]),data:Uint8Array.from([])});expect(t.CommandUtils.isAppAlreadyInstalled(e)).toBe(!0)}),it("should return true if the status code is 0x6a8e",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([106,142]),data:Uint8Array.from([])});expect(t.CommandUtils.isAppAlreadyInstalled(e)).toBe(!0)}),it("should return true if the status code is 0x6a8f",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([106,143]),data:Uint8Array.from([])});expect(t.CommandUtils.isAppAlreadyInstalled(e)).toBe(!0)}),it("should return false if the status code is not 0x6a80",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([144,0]),data:Uint8Array.from([])});expect(t.CommandUtils.isAppAlreadyInstalled(e)).toBe(!1)})}),describe("static isOutOfMemory",()=>{it("should return true if the status code is 0x6a84",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([106,132]),data:Uint8Array.from([])});expect(t.CommandUtils.isOutOfMemory(e)).toBe(!0)}),it("should return true if the status code is 0x6a85",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([106,133]),data:Uint8Array.from([])});expect(t.CommandUtils.isOutOfMemory(e)).toBe(!0)}),it("should return true if the status code is 0x5102",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([81,2]),data:Uint8Array.from([])});expect(t.CommandUtils.isOutOfMemory(e)).toBe(!0)}),it("should return true if the status code is 0x5103",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([81,3]),data:Uint8Array.from([])});expect(t.CommandUtils.isOutOfMemory(e)).toBe(!0)}),it("should return false if the status code is not 0x6a84",()=>{const e=new s.ApduResponse({statusCode:Uint8Array.from([144,0]),data:Uint8Array.from([])});expect(t.CommandUtils.isOutOfMemory(e)).toBe(!1)})}),describe("static isApduThatTriggersDisconnection",()=>{it("should return true if the APDU is openApp",()=>{const e=new a.OpenAppCommand({appName:"test"}).getApdu().getRawApdu();expect(t.CommandUtils.isApduThatTriggersDisconnection(e)).toBe(!0)}),it("should return true if the APDU is closeApp",()=>{const e=new r.CloseAppCommand().getApdu().getRawApdu();expect(t.CommandUtils.isApduThatTriggersDisconnection(e)).toBe(!0)}),it("should return false if the APDU is not a known one",()=>{const e=new o.GetAppAndVersionCommand().getApdu().getRawApdu();expect(t.CommandUtils.isApduThatTriggersDisconnection(e)).toBe(!1)})})});
//# sourceMappingURL=CommandUtils.test.js.map
