{
  "version": 3,
  "sources": ["../../../../../../../src/api/device-action/os/InstallOrUpdateApps/types.ts"],
  "sourcesContent": ["import type { CommandErrorResult } from \"@api/command/model/CommandResult\";\nimport type { DeviceModelId } from \"@api/device/DeviceModel\";\nimport type { DeviceActionState } from \"@api/device-action/model/DeviceActionState\";\nimport type {\n  OutOfMemoryDAError,\n  UnsupportedApplicationDAError,\n  UnsupportedFirmwareDAError,\n} from \"@api/device-action/os/Errors\";\nimport type {\n  GetDeviceMetadataDAError,\n  GetDeviceMetadataDARequiredInteraction,\n} from \"@api/device-action/os/GetDeviceMetadata/types\";\nimport type { GoToDashboardDARequiredInteraction } from \"@api/device-action/os/GoToDashboard/types\";\nimport type { GoToDashboardDAInput } from \"@api/device-action/os/GoToDashboard/types\";\nimport type { InstallAppDAError } from \"@api/secure-channel/device-action/InstallApp/types\";\nimport type { Application } from \"@internal/manager-api/model/Application\";\nimport type { SecureChannelInstallDAErrors } from \"@internal/secure-channel/model/Errors\";\n\n/**\n * An application version used as application constraint should either be a valid semantic versioning formatted\n * string, or \"latest\" to ensure the app is always up-to-date.\n */\nexport type ApplicationVersionConstraint =\n  | `${number}.${number}.${number}`\n  | `${number}.${number}.${number}-${string}`\n  | `${number}.${number}.${number}+${string}`\n  | `${number}.${number}.${number}-${string}+${string}`\n  | \"latest\";\n\nexport type ApplicationConstraint = {\n  /**\n   * Required minimal version of the application, if already installed on the device.\n   */\n  readonly minVersion: ApplicationVersionConstraint;\n\n  /**\n   * List of device models that require the minVersion.\n   */\n  readonly applicableModels?: DeviceModelId[];\n\n  /**\n   * List of device models that do not require the minVersion.\n   */\n  readonly exemptModels?: DeviceModelId[];\n};\n\nexport type ApplicationDependency = {\n  /**\n   * Name of the application to install.\n   */\n  readonly name: string;\n\n  /**\n   * List of constraints for the application.\n   * If no constraints are provided, no version checks are performed.\n   * If the current device model is not concerned by any listed contraints, no version checks are performed.\n   */\n  readonly constraints?: ApplicationConstraint[];\n};\n\nexport type InstallPlan = {\n  readonly installPlan: Application[];\n  readonly alreadyInstalled: string[];\n  readonly missingApplications: string[];\n  readonly currentIndex: number;\n  readonly currentProgress: number;\n};\n\nexport type InstallOrUpdateAppsDAOutput = {\n  readonly successfullyInstalled: Application[];\n  readonly alreadyInstalled: string[];\n  readonly missingApplications: string[];\n};\n\nexport type InstallOrUpdateAppsDAInput = GoToDashboardDAInput & {\n  readonly applications: ApplicationDependency[];\n  readonly allowMissingApplication: boolean;\n};\n\nexport type InstallOrUpdateAppsDAError =\n  | GetDeviceMetadataDAError\n  | InstallAppDAError\n  | OutOfMemoryDAError\n  | UnsupportedApplicationDAError\n  | UnsupportedFirmwareDAError\n  | SecureChannelInstallDAErrors\n  | CommandErrorResult[\"error\"];\n\nexport type InstallOrUpdateAppsDARequiredInteraction =\n  | GoToDashboardDARequiredInteraction\n  | GetDeviceMetadataDARequiredInteraction;\n\nexport type InstallOrUpdateAppsDAIntermediateValue = {\n  requiredUserInteraction: InstallOrUpdateAppsDARequiredInteraction;\n  installPlan: InstallPlan | null;\n  deviceId?: Uint8Array;\n};\n\nexport type InstallOrUpdateAppsDAState = DeviceActionState<\n  InstallOrUpdateAppsDAOutput,\n  InstallOrUpdateAppsDAError,\n  InstallOrUpdateAppsDAIntermediateValue\n>;\n"],
  "mappings": "+WAAA,IAAAA,EAAA,kBAAAC,EAAAD",
  "names": ["types_exports", "__toCommonJS"]
}
