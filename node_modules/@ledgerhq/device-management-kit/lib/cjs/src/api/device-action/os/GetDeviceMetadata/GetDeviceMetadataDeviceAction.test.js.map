{
  "version": 3,
  "sources": ["../../../../../../../src/api/device-action/os/GetDeviceMetadata/GetDeviceMetadataDeviceAction.test.ts"],
  "sourcesContent": ["import { concat, of, throwError } from \"rxjs\";\n\nimport { CommandResultFactory } from \"@api/command/model/CommandResult\";\nimport { DeviceStatus } from \"@api/device/DeviceStatus\";\nimport { BTC_APP } from \"@api/device-action/__test-utils__/data\";\nimport { makeDeviceActionInternalApiMock } from \"@api/device-action/__test-utils__/makeInternalApi\";\nimport { setupGoToDashboardMock } from \"@api/device-action/__test-utils__/setupTestMachine\";\nimport { setupListAppsMock } from \"@api/device-action/__test-utils__/setupTestMachine\";\nimport { testDeviceActionStates } from \"@api/device-action/__test-utils__/testDeviceActionStates\";\nimport { DeviceActionStatus } from \"@api/device-action/model/DeviceActionState\";\nimport { UserInteractionRequired } from \"@api/device-action/model/UserInteractionRequired\";\nimport { UnknownDAError } from \"@api/device-action/os/Errors\";\nimport {\n  type Catalog,\n  type CustomImage,\n  type DeviceSessionState,\n  type FirmwareUpdateContext,\n  type FirmwareVersion,\n  type InstalledLanguagePackage,\n} from \"@api/device-session/DeviceSessionState\";\nimport { DeviceSessionStateType } from \"@api/device-session/DeviceSessionState\";\nimport { UnknownDeviceExchangeError } from \"@api/Error\";\nimport {\n  type SecureChannelEventPayload,\n  SecureChannelEventType,\n} from \"@api/secure-channel/task/types\";\nimport { type Application } from \"@internal/manager-api/model/Application\";\nimport { type DeviceVersion } from \"@internal/manager-api/model/Device\";\nimport { type FinalFirmware } from \"@internal/manager-api/model/Firmware\";\n\nimport { GetDeviceMetadataDeviceAction } from \"./GetDeviceMetadataDeviceAction\";\nimport { type GetDeviceMetadataDAState } from \"./types\";\n\nvi.mock(\"@api/device-action/os/GoToDashboard/GoToDashboardDeviceAction\");\nvi.mock(\"@api/device-action/os/ListApps/ListAppsDeviceAction\");\n\ndescribe(\"GetDeviceMetadataDeviceAction\", () => {\n  const apiMock = makeDeviceActionInternalApiMock();\n  const getDeviceMetadataMock = vi.fn();\n  const getFirmwareMetadataMock = vi.fn();\n  const getApplicationsMetadataMock = vi.fn();\n  const listAppsSecureChannelMock = vi.fn();\n\n  const DEVICE_VERSION = \"device_version\" as unknown as DeviceVersion;\n  const FIRMWARE = \"firmware\" as unknown as FinalFirmware;\n  const FIRMWARE_VERSION = \"firmware_version\" as unknown as FirmwareVersion;\n  const FIRMWARE_UPDATE = \"fm_update\" as unknown as FirmwareUpdateContext;\n  const CUSTOM_IMAGE = \"image\" as unknown as CustomImage;\n  const APPS = \"apps\" as unknown as Application[];\n  const APPS_UPDATE = \"apps_update\" as unknown as Application[];\n  const LANGUAGES = \"lang\" as unknown as InstalledLanguagePackage[];\n  const CATALOG = \"catalog\" as unknown as Catalog;\n\n  function extractDependenciesMock() {\n    return {\n      getDeviceMetadata: getDeviceMetadataMock,\n      getFirmwareMetadata: getFirmwareMetadataMock,\n      getApplicationsMetadata: getApplicationsMetadataMock,\n      listAppsSecureChannel: listAppsSecureChannelMock,\n    };\n  }\n\n  beforeEach(() => {\n    vi.clearAllMocks();\n    apiMock.getDeviceSessionState.mockReturnValue({\n      sessionStateType: DeviceSessionStateType.Connected,\n      deviceStatus: DeviceStatus.CONNECTED,\n    } as DeviceSessionState);\n  });\n\n  describe(\"success cases\", () => {\n    it(\"get metadata from device state\", () =>\n      new Promise<void>((resolve, reject) => {\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: {},\n        });\n\n        getDeviceMetadataMock.mockResolvedValueOnce({\n          firmwareVersion: FIRMWARE_VERSION,\n          firmwareUpdateContext: FIRMWARE_UPDATE,\n          customImage: CUSTOM_IMAGE,\n          applications: APPS,\n          applicationsUpdates: APPS_UPDATE,\n          installedLanguages: LANGUAGES,\n          catalog: CATALOG,\n        });\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Success\n          {\n            output: {\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n              applications: APPS,\n              applicationsUpdates: APPS_UPDATE,\n              installedLanguages: LANGUAGES,\n              catalog: CATALOG,\n            },\n            status: DeviceActionStatus.Completed,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n\n    it(\"fetch metadata without secure channel\", () =>\n      new Promise<void>((resolve, reject) => {\n        setupGoToDashboardMock();\n        setupListAppsMock([BTC_APP]);\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: {},\n        });\n\n        getDeviceMetadataMock.mockResolvedValueOnce(null);\n        getFirmwareMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              deviceVersion: DEVICE_VERSION,\n              firmware: FIRMWARE,\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n            },\n          }),\n        );\n        getApplicationsMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              applications: APPS,\n              applicationsUpdates: APPS_UPDATE,\n              installedLanguages: LANGUAGES,\n              catalog: CATALOG,\n            },\n          }),\n        );\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GoToDashboard\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetFirmwareMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // ListApps\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.AllowListApps,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetApplicationsMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Success\n          {\n            output: {\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n              applications: APPS,\n              applicationsUpdates: APPS_UPDATE,\n              installedLanguages: LANGUAGES,\n              catalog: CATALOG,\n            },\n            status: DeviceActionStatus.Completed,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n\n    it(\"fetch metadata with forced update\", () =>\n      new Promise<void>((resolve, reject) => {\n        setupGoToDashboardMock();\n        setupListAppsMock([BTC_APP]);\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: { forceUpdate: true },\n        });\n\n        getFirmwareMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              deviceVersion: DEVICE_VERSION,\n              firmware: FIRMWARE,\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n            },\n          }),\n        );\n        getApplicationsMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              applications: APPS,\n              applicationsUpdates: APPS_UPDATE,\n              installedLanguages: LANGUAGES,\n              catalog: CATALOG,\n            },\n          }),\n        );\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GoToDashboard\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetFirmwareMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // ListApps\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.AllowListApps,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetApplicationsMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Success\n          {\n            output: {\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n              applications: APPS,\n              applicationsUpdates: APPS_UPDATE,\n              installedLanguages: LANGUAGES,\n              catalog: CATALOG,\n            },\n            status: DeviceActionStatus.Completed,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n\n    it(\"fetch metadata with secure channel\", () =>\n      new Promise<void>((resolve, reject) => {\n        setupGoToDashboardMock();\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: { useSecureChannel: true },\n        });\n\n        getDeviceMetadataMock.mockResolvedValueOnce(null);\n        getFirmwareMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              deviceVersion: DEVICE_VERSION,\n              firmware: FIRMWARE,\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n            },\n          }),\n        );\n        listAppsSecureChannelMock.mockReturnValue(\n          of(\n            {\n              type: SecureChannelEventType.Exchange,\n            },\n            {\n              type: SecureChannelEventType.PermissionRequested,\n            },\n            {\n              type: SecureChannelEventType.PermissionGranted,\n            },\n            {\n              type: SecureChannelEventType.Result,\n              payload: [\n                {\n                  flags: 123456,\n                  hash: \"hash_test\",\n                  hash_code_data: \"hash_code_data_test\",\n                  name: \"Bitcoin\",\n                },\n              ],\n            },\n          ),\n        );\n        getApplicationsMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              applications: APPS,\n              applicationsUpdates: APPS_UPDATE,\n              installedLanguages: LANGUAGES,\n              catalog: CATALOG,\n            },\n          }),\n        );\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GoToDashboard\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetFirmwareMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // ListAppsSecureChannel\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction:\n                UserInteractionRequired.AllowSecureConnection,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetApplicationsMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Success\n          {\n            output: {\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n              applications: APPS,\n              applicationsUpdates: APPS_UPDATE,\n              installedLanguages: LANGUAGES,\n              catalog: CATALOG,\n            },\n            status: DeviceActionStatus.Completed,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n\n    it(\"get metadata from device state with external dependencies\", () =>\n      new Promise<void>((resolve, reject) => {\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: {},\n        });\n\n        apiMock.getDeviceSessionState.mockReturnValue({\n          sessionStateType: DeviceSessionStateType.ReadyWithoutSecureChannel,\n          deviceStatus: DeviceStatus.CONNECTED,\n          firmwareVersion: {\n            metadata: FIRMWARE_VERSION,\n          } as unknown as FirmwareVersion,\n          firmwareUpdateContext: FIRMWARE_UPDATE,\n          customImage: CUSTOM_IMAGE,\n          installedApps: [APPS] as unknown as Application[],\n          appsUpdates: APPS_UPDATE,\n          installedLanguages: LANGUAGES,\n          catalog: CATALOG,\n        } as DeviceSessionState);\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Success\n          {\n            output: {\n              firmwareVersion: {\n                metadata: FIRMWARE_VERSION,\n              } as unknown as FirmwareVersion,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n              applications: [APPS] as unknown as Application[],\n              applicationsUpdates: APPS_UPDATE,\n              installedLanguages: LANGUAGES,\n              catalog: CATALOG,\n            },\n            status: DeviceActionStatus.Completed,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n  });\n\n  describe(\"Error cases\", () => {\n    it(\"error during GoToDashboard\", () =>\n      new Promise<void>((resolve, reject) => {\n        setupGoToDashboardMock(true);\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: {},\n        });\n\n        getDeviceMetadataMock.mockResolvedValueOnce(null);\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GoToDashboard\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Error\n          {\n            error: new UnknownDAError(\"GoToDashboard failed\"),\n            status: DeviceActionStatus.Error,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n\n    it(\"error during GetFirmwareMetadata\", () =>\n      new Promise<void>((resolve, reject) => {\n        setupGoToDashboardMock();\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: {},\n        });\n\n        getDeviceMetadataMock.mockResolvedValueOnce(null);\n        getFirmwareMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            error: new UnknownDeviceExchangeError(\"GetFirmwareMetadata failed\"),\n          }),\n        );\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GoToDashboard\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetFirmwareMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Error\n          {\n            error: new UnknownDeviceExchangeError(\"GetFirmwareMetadata failed\"),\n            status: DeviceActionStatus.Error,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n\n    it(\"error during ListApps\", () =>\n      new Promise<void>((resolve, reject) => {\n        setupGoToDashboardMock();\n        setupListAppsMock([], true);\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: {},\n        });\n\n        getDeviceMetadataMock.mockResolvedValueOnce(null);\n        getFirmwareMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              deviceVersion: DEVICE_VERSION,\n              firmware: FIRMWARE,\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n            },\n          }),\n        );\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GoToDashboard\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetFirmwareMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // ListApps\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.AllowListApps,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Error\n          {\n            error: new UnknownDAError(\"ListApps failed\"),\n            status: DeviceActionStatus.Error,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n\n    it(\"error during GetApplicationsMetadata\", () =>\n      new Promise<void>((resolve, reject) => {\n        setupGoToDashboardMock();\n        setupListAppsMock([BTC_APP]);\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: {},\n        });\n\n        getDeviceMetadataMock.mockResolvedValueOnce(null);\n        getFirmwareMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              deviceVersion: DEVICE_VERSION,\n              firmware: FIRMWARE,\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n            },\n          }),\n        );\n        getApplicationsMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            error: new UnknownDeviceExchangeError(\n              \"GetApplicationsMetadata failed\",\n            ),\n          }),\n        );\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GoToDashboard\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetFirmwareMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // ListApps\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.AllowListApps,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetApplicationsMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Error\n          {\n            error: new UnknownDeviceExchangeError(\n              \"GetApplicationsMetadata failed\",\n            ),\n            status: DeviceActionStatus.Error,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n\n    it(\"error during ListAppsSecureChannel\", () =>\n      new Promise<void>((resolve, reject) => {\n        setupGoToDashboardMock();\n        const deviceAction = new GetDeviceMetadataDeviceAction({\n          input: { useSecureChannel: true },\n        });\n\n        getDeviceMetadataMock.mockResolvedValueOnce(null);\n        getFirmwareMetadataMock.mockResolvedValueOnce(\n          CommandResultFactory({\n            data: {\n              deviceVersion: DEVICE_VERSION,\n              firmware: FIRMWARE,\n              firmwareVersion: FIRMWARE_VERSION,\n              firmwareUpdateContext: FIRMWARE_UPDATE,\n              customImage: CUSTOM_IMAGE,\n            },\n          }),\n        );\n        listAppsSecureChannelMock.mockReturnValue(\n          concat(\n            of({\n              type: SecureChannelEventType.Exchange,\n              payload: {\n                data: new Uint8Array([0x00, 0x01, 0x02, 0x03]),\n              } as SecureChannelEventPayload[\"Exchange\"],\n            }),\n            throwError(() => new UnknownDAError(\"Secure channel error\")),\n          ),\n        );\n        vi.spyOn(deviceAction, \"extractDependencies\").mockReturnValue(\n          extractDependenciesMock(),\n        );\n\n        const expectedStates: Array<GetDeviceMetadataDAState> = [\n          // GetDeviceMetadataFromContext\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GoToDashboard\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // GetFirmwareMetadata\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // ListAppsSecureChannel\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          {\n            intermediateValue: {\n              requiredUserInteraction: UserInteractionRequired.None,\n            },\n            status: DeviceActionStatus.Pending,\n          },\n          // Error\n          {\n            error: new UnknownDAError(\"Secure channel error\"),\n            status: DeviceActionStatus.Error,\n          },\n        ];\n\n        testDeviceActionStates(deviceAction, expectedStates, apiMock, {\n          onDone: resolve,\n          onError: reject,\n        });\n      }));\n  });\n});\n"],
  "mappings": "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",
  "names": ["import_rxjs", "import_CommandResult", "import_DeviceStatus", "import_data", "import_makeInternalApi", "import_setupTestMachine", "import_testDeviceActionStates", "import_DeviceActionState", "import_UserInteractionRequired", "import_Errors", "import_DeviceSessionState", "import_Error", "import_types", "import_GetDeviceMetadataDeviceAction", "apiMock", "getDeviceMetadataMock", "getFirmwareMetadataMock", "getApplicationsMetadataMock", "listAppsSecureChannelMock", "DEVICE_VERSION", "FIRMWARE", "FIRMWARE_VERSION", "FIRMWARE_UPDATE", "CUSTOM_IMAGE", "APPS", "APPS_UPDATE", "LANGUAGES", "CATALOG", "extractDependenciesMock", "resolve", "reject", "deviceAction", "expectedStates"]
}
