"use strict";var a=require("../../../internal/device-session/data/DeviceSessionRefresherConst"),f=require("../../../internal/device-session/model/DeviceSession.stub"),l=require("../../../internal/device-session/model/Errors"),S=require("../../../internal/device-session/service/DefaultDeviceSessionService"),m=require("../../../internal/logger-publisher/service/DefaultLoggerPublisherService"),v=require("../../../internal/manager-api/data/AxiosManagerApiDataSource"),d=require("../../../internal/manager-api/service/DefaultManagerApiService"),p=require("../../../internal/secure-channel/data/DefaultSecureChannelDataSource"),u=require("../../../internal/secure-channel/service/DefaultSecureChannelService"),n=require("./DisableDeviceSessionRefresher");vi.mock("uuid",()=>({v4:()=>"fakeUuid"}));let e,r,i,o,t,c;describe("DisableDeviceSessionRefresherUseCase",()=>{beforeEach(()=>{e=new m.DefaultLoggerPublisherService([],"get-connected-device-use-case-test"),r=new S.DefaultDeviceSessionService(()=>e),t=new d.DefaultManagerApiService(new v.AxiosManagerApiDataSource({})),c=new u.DefaultSecureChannelService(new p.DefaultSecureChannelDataSource({}))}),afterEach(()=>{vi.clearAllMocks()}),describe("execute",()=>{it("should disable the device session refresher and return a function to reenable it",()=>{o=(0,f.deviceSessionStubBuilder)({id:"fakeSessionId"},()=>e,t,c,a.DEVICE_SESSION_REFRESHER_DEFAULT_OPTIONS),r.addDeviceSession(o),i=new n.DisableDeviceSessionRefresherUseCase(r,()=>e);const s=vi.spyOn(o,"disableRefresher"),D=i.execute({sessionId:"fakeSessionId",blockerId:"fakeBlockerId"});expect(s).toHaveBeenCalledWith("fakeBlockerId"),D(),o.close()}),it("should throw error when deviceSession is not found",()=>{i=new n.DisableDeviceSessionRefresherUseCase(r,()=>e);try{i.execute({sessionId:"fakeSessionId",blockerId:"fakeBlockerId"})}catch(s){expect(s).toBeInstanceOf(l.DeviceSessionNotFound)}})})});
//# sourceMappingURL=DisableDeviceSessionRefresher.test.js.map
