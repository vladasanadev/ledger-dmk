{
  "version": 3,
  "sources": ["../../../../../../../src/api/secure-channel/device-action/InstallApp/InstallAppDeviceAction.ts"],
  "sourcesContent": ["import { Left, Right } from \"purify-ts\";\nimport { assign, fromObservable, fromPromise, setup } from \"xstate\";\n\nimport { isSuccessCommandResult } from \"@api/command/model/CommandResult\";\nimport {\n  GetOsVersionCommand,\n  type GetOsVersionResponse,\n} from \"@api/command/os/GetOsVersionCommand\";\nimport { type InternalApi } from \"@api/device-action/DeviceAction\";\nimport { UserInteractionRequired } from \"@api/device-action/model/UserInteractionRequired\";\nimport { DEFAULT_UNLOCK_TIMEOUT_MS } from \"@api/device-action/os/Const\";\nimport { UnknownDAError } from \"@api/device-action/os/Errors\";\nimport { GoToDashboardDeviceAction } from \"@api/device-action/os/GoToDashboard/GoToDashboardDeviceAction\";\nimport { type StateMachineTypes } from \"@api/device-action/xstate-utils/StateMachineTypes\";\nimport {\n  type DeviceActionStateMachine,\n  XStateDeviceAction,\n} from \"@api/device-action/xstate-utils/XStateDeviceAction\";\nimport {\n  type DeviceSessionState,\n  DeviceSessionStateType,\n} from \"@api/device-session/DeviceSessionState\";\nimport { ListInstalledAppsDeviceAction } from \"@api/secure-channel/device-action/ListInstalledApps/ListInstalledAppsDeviceAction\";\nimport { ConnectToSecureChannelTask } from \"@api/secure-channel/task/ConnectToSecureChannelTask\";\nimport { SecureChannelEventType } from \"@api/secure-channel/task/types\";\nimport { type Input } from \"@api/secure-channel/types\";\nimport { type Application } from \"@internal/manager-api/model/Application\";\n\nimport {\n  type InstallAppDAError,\n  type InstallAppDAInput,\n  type InstallAppDAIntermediateValue,\n  type InstallAppDAOutput,\n  type InstallAppStateMachineInternalState,\n  type MachineDependencies,\n} from \"./types\";\n\nexport class InstallAppDeviceAction extends XStateDeviceAction<\n  InstallAppDAOutput,\n  InstallAppDAInput,\n  InstallAppDAError,\n  InstallAppDAIntermediateValue,\n  InstallAppStateMachineInternalState\n> {\n  override makeStateMachine(\n    internalApi: InternalApi,\n  ): DeviceActionStateMachine<\n    InstallAppDAOutput,\n    InstallAppDAInput,\n    InstallAppDAError,\n    InstallAppDAIntermediateValue,\n    InstallAppStateMachineInternalState\n  > {\n    type types = StateMachineTypes<\n      InstallAppDAOutput,\n      InstallAppDAInput,\n      InstallAppDAError,\n      InstallAppDAIntermediateValue,\n      InstallAppStateMachineInternalState\n    >;\n\n    const {\n      getOsVersion,\n      getAppList,\n      installApp,\n      getDeviceSessionState,\n      setDeviceSessionState,\n    } = this.extractDependencies(internalApi);\n\n    const unlockTimeout = this.input.unlockTimeout ?? DEFAULT_UNLOCK_TIMEOUT_MS;\n\n    const listInstalledAppsMachine = new ListInstalledAppsDeviceAction({\n      input: {\n        unlockTimeout,\n      },\n    }).makeStateMachine(internalApi);\n\n    const goToDashboardMachine = new GoToDashboardDeviceAction({\n      input: {\n        unlockTimeout,\n      },\n    }).makeStateMachine(internalApi);\n\n    return setup({\n      types: {\n        input: {} as types[\"input\"],\n        context: {} as types[\"context\"],\n        output: {} as types[\"output\"],\n      },\n      actors: {\n        listInstalledApps: listInstalledAppsMachine,\n        goToDashboard: goToDashboardMachine,\n        getOsVersion: fromPromise(getOsVersion),\n        getAppList: fromPromise(getAppList),\n        installApp: fromObservable(installApp),\n      },\n      guards: {\n        hasError: (_) => _.context._internalState.error !== null,\n        appInstalled: (_) =>\n          _.context._internalState.installedApps.some(\n            (app) => app.name === _.context.input.appName,\n          ),\n        appNotFound: (_) =>\n          _.context._internalState.appList.findIndex(\n            ({ versionName }) => versionName === _.context.input.appName,\n          ) === -1,\n        depAppNotInstalled: (_) => {\n          const appToInstall = _.context._internalState.appList.find(\n            ({ versionName }) => versionName === _.context.input.appName,\n          );\n          if (appToInstall?.parentName) {\n            return (\n              _.context._internalState.installedApps.findIndex(\n                ({ name }) => name === appToInstall.parentName,\n              ) === -1\n            );\n          }\n          return false;\n        },\n      },\n      actions: {\n        assignErrorFromEvent: assign({\n          _internalState: (_) => ({\n            ..._.context._internalState,\n            error: _.event[\"error\"],\n          }),\n        }),\n        assignAppNotFound: assign({\n          _internalState: (_) => ({\n            ..._.context._internalState,\n            error: new UnknownDAError(\n              \"App to install not found in manager API\",\n            ),\n          }),\n        }),\n        assignDepAppNotInstalled: assign({\n          _internalState: (_) => ({\n            ..._.context._internalState,\n            error: new UnknownDAError(\"Dep app is not installed on the device\"),\n          }),\n        }),\n        cleanupDeviceState: () => {\n          // After app successful installation, cleanup the device session state\n          // to force fetching the new device state when required\n          const state = getDeviceSessionState();\n          if (state.sessionStateType !== DeviceSessionStateType.Connected) {\n            setDeviceSessionState({\n              ...state,\n              installedApps: [],\n              appsUpdates: undefined,\n            });\n          }\n        },\n      },\n    }).createMachine({\n      /** @xstate-layout N4IgpgJg5mDOIC5QEkB2sAuBDANjgggA6EAiYAbgJYDGY+1GlA9qgHRlW0BKYWEAngGIA2gAYAuolCEmsSoxZSQAD0QBGAJyjWADgDsAFg0A2HSb2iArMbUBmADQh+iAExrjrS6KuWNtte7Glga2AL6hjmiYuATEHDR0DMxsADKUmFHYeJBEhLCCECxgrJSo5EwA1sU46RiZMTnEsGKSSCAycgqoSqoIBgaWrC6i-i6Wjs4ItqJqnt62BsYuGmoGLguW4ZHoWbGkFAn0XaxpGTsNELmwAMIAFmDUFSISSh3yyT2Ituu6vrZ64yciB0djmogGAxcLmMMwMWxA9TwuXitCOyROtUROEaeTuDyewjUrWksneijavW+tl+fgBE2BelmXnBwUsUJhq3hWORB1RSRYGLO0WylyaeMeIhcxPapK6nymPx0fzpQIQGmWYIhbOhsK55yRcV5iWOAHEmAAVJgkLCwW4AIyYWAAThACkUSmVKsUoBarTb7Y6XS1XrKPhTEEtBjNrAsbAZwYt6VNbB41KI9MNvpGbJyIgj9XsUcb0WbLdbbQ7na6wE6nUwnaxCDgsBgAGb1gC2rB9Zf9laDLzabzl4YQkdY0eMsdWCeMSbUeg0nnWZgC300vmMeuFhaNaIFpb9FcDEHFBMHJM6YdAvTTXiGQT0MOMBgsOjMSZhOgn3i17N1ebcoanDFgevrlgGVZniIRIhle5I3uoVjaNClhPqIL5vh+qq2JY1KBO+GgaBmK5hIBBY8iB+5sCaYAYAA8rAABqNZyCwbqoMUpTlFU3Z0YxLFOmxqDBkOoYISo6hsrMWhBL4OiiNCixqEm3xLsYWjWIYWgZv0mzkTulGHPyNH8cxrHJNBomXmS3SjpoqysPGL7fDoUJQgYOhJp5S7Mssr76KIfj-NuuxGXyppmYJwlWbBYnwXZiEIA5BhORhIQuG57meapiysACinBMM4IzFuBlhcBxmRRguSnBgHFcZ6vEwDVxB1dZMoJfKLgQvlsb+GhOg2Es3npmCXjGEsIxEXC5UxOFoGma1hB1VZF6dbZ3WMno+WaEFIREQELiqXhrAEWYxFQrYOhkdshmVRFJZ0bVtSxdKw7XpJCBjFoTkBTYjKmENc6qjCrDEY+Gj6E+-lPqF80PYtrC0ctq33BKwhSnBm2jplaiDLYWhmHojIaAMKmqgYmj5cYFgWKY6rERo+l3RV+xUSZyPPW1r3owStjveJiVfXjBNE8RpPk0mbLUhsG4M8sOjwwa7NVeiQGEA1Ho8Y192EB1H0SZSQSsP8gKTFDO3Mn+Oq5qzCOq49Aoa4INZ1g2TYtu2TpdqUesG0L8opgTKqTGmr4-iykK22VeaoEwEBwEoGtFtR2MjklAC0OWqpn0LLgsAwrIYaZ2Mru4c8cRY8Hwkw2RnX1rEmbiDMyaYAnt7jXeXC3UYKdQFji8DxTjSWiEmFipd4Ufahys32yrqec3VWJD2e6efb04+qu+re-qy-52-metL6a4F9ieG9G64Srg6YGaWHYN2iDd87qpHsbLKs6wDD3iN94eCC-ZTx8yvsLXoN0XB33fHYf4hMOQnR2jdf4egQQvnTMsP+jskYowEhZCShtwHqDcPhIKlgdD9BGJ5KwqkXA7WLt4FYbgrCLDKgvCuasDxRXwagdeI8G63kZNSdBgUUzTChObL4j8nILm-oTK6SwsGnyeqjWoYDurph2mMQqj4hruGOjhNwYI4ELHVAuYiSi9ycxRi9TAfD66b1cJNbQpivCeXjERSRCBUGzGUjCTKj8oSKUsZXdWFFiDqNHNvMOiltDTxtnPEJnC2AAGUACu1BaCwGHg46+30zDaGsF-EElhSkjCTCCME6wobOSMLdY+bNlECgAKK1nrJEpKmVfpFJWCUspDgcLBBpnTDCZhliLn0uEIAA */\n      id: \"InstallAppDeviceAction\",\n      initial: \"DeviceReady\",\n      context: (_) => ({\n        input: {\n          unlockTimeout: _.input.unlockTimeout,\n          appName: _.input.appName,\n        },\n        intermediateValue: {\n          requiredUserInteraction: UserInteractionRequired.None,\n          progress: 0,\n        },\n        _internalState: {\n          error: null,\n          installedApps: [],\n          getOsVersionResponse: null,\n          appList: [],\n        },\n      }),\n      states: {\n        DeviceReady: {\n          always: {\n            target: \"ListInstalledApps\",\n          },\n        },\n        ListInstalledApps: {\n          value: \"ListInstalledApps\",\n          invoke: {\n            id: \"listInstalledApps\",\n            src: \"listInstalledApps\",\n            input: (_) => ({\n              unlockTimeout: _.context.input.unlockTimeout,\n            }),\n            onSnapshot: {\n              actions: assign({\n                intermediateValue: (_) => ({\n                  ..._.context.intermediateValue,\n                  requiredUserInteraction:\n                    _.event.snapshot.context.intermediateValue\n                      .requiredUserInteraction,\n                }),\n              }),\n            },\n            onDone: {\n              target: \"ListInstalledAppsCheck\",\n              actions: assign({\n                _internalState: (_) =>\n                  _.event.output.caseOf<InstallAppStateMachineInternalState>({\n                    Right: ({ installedApps }) => ({\n                      ..._.context._internalState,\n                      installedApps,\n                    }),\n                    Left: (error) => ({\n                      ..._.context._internalState,\n                      error,\n                    }),\n                  }),\n              }),\n            },\n          },\n        },\n        ListInstalledAppsCheck: {\n          always: [\n            {\n              target: \"Error\",\n              guard: \"hasError\",\n            },\n            {\n              target: \"Success\",\n              guard: \"appInstalled\",\n            },\n            {\n              target: \"GoToDashboard\",\n            },\n          ],\n        },\n        GoToDashboard: {\n          invoke: {\n            id: \"goToDashboard\",\n            src: \"goToDashboard\",\n            input: (_) => ({\n              unlockTimeout: _.context.input.unlockTimeout,\n            }),\n            onSnapshot: {\n              actions: assign({\n                intermediateValue: (_) => ({\n                  ..._.context.intermediateValue,\n                  requiredUserInteraction:\n                    _.event.snapshot.context.intermediateValue\n                      .requiredUserInteraction,\n                }),\n              }),\n            },\n            onDone: {\n              target: \"GoToDashboardCheck\",\n              actions: assign({\n                _internalState: (_) =>\n                  _.event.output.caseOf<InstallAppStateMachineInternalState>({\n                    Right: () => _.context._internalState,\n                    Left: (error) => ({\n                      ..._.context._internalState,\n                      error,\n                    }),\n                  }),\n              }),\n            },\n            onError: {\n              target: \"Error\",\n              actions: \"assignErrorFromEvent\",\n            },\n          },\n        },\n        GoToDashboardCheck: {\n          always: [\n            {\n              target: \"Error\",\n              guard: \"hasError\",\n            },\n            {\n              target: \"GetOsVersion\",\n            },\n          ],\n        },\n        GetOsVersion: {\n          invoke: {\n            id: \"getOsVersion\",\n            src: \"getOsVersion\",\n            input: (_) => undefined,\n            onDone: {\n              target: \"GetOsVersionCheck\",\n              actions: assign({\n                _internalState: (_) => {\n                  if (isSuccessCommandResult(_.event.output)) {\n                    const currentState: DeviceSessionState =\n                      getDeviceSessionState();\n                    const isSecureConnectionAllowed =\n                      _.event.output.data.secureElementFlags\n                        .isSecureConnectionAllowed;\n                    if (\n                      currentState.sessionStateType !==\n                      DeviceSessionStateType.Connected\n                    ) {\n                      setDeviceSessionState({\n                        ...currentState,\n                        isSecureConnectionAllowed,\n                      });\n                    }\n                    return {\n                      ..._.context._internalState,\n                      getOsVersionResponse: _.event.output.data,\n                    };\n                  }\n                  return {\n                    ..._.context._internalState,\n                    error: _.event.output.error,\n                  };\n                },\n              }),\n            },\n          },\n        },\n        GetOsVersionCheck: {\n          always: [\n            {\n              target: \"Error\",\n              guard: \"hasError\",\n            },\n            {\n              target: \"GetAppList\",\n            },\n          ],\n        },\n        GetAppList: {\n          invoke: {\n            id: \"getAppList\",\n            src: \"getAppList\",\n            input: (_) => ({\n              deviceInfo: _.context._internalState.getOsVersionResponse!,\n            }),\n            onDone: {\n              target: \"GetAppListCheck\",\n              actions: assign({\n                _internalState: (_) =>\n                  _.event.output.caseOf<InstallAppStateMachineInternalState>({\n                    Right: (appList) => ({\n                      ..._.context._internalState,\n                      appList,\n                    }),\n                    Left: (error) => ({\n                      ..._.context._internalState,\n                      error,\n                    }),\n                  }),\n              }),\n            },\n          },\n        },\n        GetAppListCheck: {\n          always: [\n            {\n              target: \"Error\",\n              guard: \"hasError\",\n            },\n            {\n              target: \"Error\",\n              guard: \"appNotFound\",\n              actions: \"assignAppNotFound\",\n            },\n            {\n              target: \"Error\",\n              guard: \"depAppNotInstalled\",\n              actions: \"assignDepAppNotInstalled\",\n            },\n            {\n              target: \"InstallApp\",\n            },\n          ],\n        },\n        InstallApp: {\n          invoke: {\n            id: \"installApp\",\n            src: \"installApp\",\n            input: (_) => ({\n              deviceInfo: _.context._internalState.getOsVersionResponse!,\n              app: _.context._internalState.appList.find(\n                ({ versionName }) => versionName === _.context.input.appName,\n              )!,\n            }),\n            onSnapshot: {\n              actions: assign({\n                intermediateValue: (_) => {\n                  if (\n                    _.event.snapshot.context?.type ===\n                    SecureChannelEventType.DeviceId\n                  ) {\n                    return {\n                      ..._.context.intermediateValue,\n                      deviceId: _.event.snapshot.context.payload.deviceId,\n                    };\n                  }\n                  if (\n                    _.event.snapshot.context?.type ===\n                    SecureChannelEventType.Progress\n                  ) {\n                    return {\n                      ..._.context.intermediateValue,\n                      progress: _.event.snapshot.context.payload.progress,\n                    };\n                  }\n                  return { ..._.context.intermediateValue };\n                },\n                _internalState: (_) => {\n                  if (\n                    _.event.snapshot.context?.type ===\n                    SecureChannelEventType.Error\n                  ) {\n                    return {\n                      ..._.context._internalState,\n                      error:\n                        _.event.snapshot.context.error.mapInstallDAErrors(),\n                    };\n                  }\n                  return _.context._internalState;\n                },\n              }),\n            },\n            onDone: {\n              target: \"ListInstalledApps\",\n              actions: \"cleanupDeviceState\",\n            },\n            onError: {\n              target: \"Error\",\n              actions: \"assignErrorFromEvent\",\n            },\n          },\n        },\n        Success: {\n          type: \"final\",\n          description: \"App installed successfully\",\n        },\n        Error: {\n          type: \"final\",\n        },\n      },\n      output: ({ context }) =>\n        context._internalState.error\n          ? Left(context._internalState.error)\n          : Right(undefined),\n    });\n  }\n\n  extractDependencies(internalApi: InternalApi): MachineDependencies {\n    const getOsVersion = () =>\n      internalApi.sendCommand(new GetOsVersionCommand());\n\n    const getAppList = ({\n      input,\n    }: Input<{\n      deviceInfo: GetOsVersionResponse;\n    }>) => {\n      const { deviceInfo } = input;\n      return internalApi.getManagerApiService().getAppList(deviceInfo);\n    };\n\n    const installApp = ({\n      input,\n    }: Input<{\n      deviceInfo: GetOsVersionResponse;\n      app: Application;\n    }>) => {\n      const { deviceInfo, app } = input;\n      const eitherConnection = internalApi\n        .getSecureChannelService()\n        .installApp(deviceInfo, app);\n      return new ConnectToSecureChannelTask(internalApi, {\n        connection: eitherConnection,\n      }).run();\n    };\n\n    return {\n      getOsVersion,\n      getAppList,\n      installApp,\n      getDeviceSessionState: () => internalApi.getDeviceSessionState(),\n      setDeviceSessionState: (state) =>\n        internalApi.setDeviceSessionState(state),\n    };\n  }\n}\n"],
  "mappings": "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",
  "names": ["InstallAppDeviceAction_exports", "__export", "InstallAppDeviceAction", "__toCommonJS", "import_purify_ts", "import_xstate", "import_CommandResult", "import_GetOsVersionCommand", "import_UserInteractionRequired", "import_Const", "import_Errors", "import_GoToDashboardDeviceAction", "import_XStateDeviceAction", "import_DeviceSessionState", "import_ListInstalledAppsDeviceAction", "import_ConnectToSecureChannelTask", "import_types", "internalApi", "getOsVersion", "getAppList", "installApp", "getDeviceSessionState", "setDeviceSessionState", "unlockTimeout", "listInstalledAppsMachine", "goToDashboardMachine", "_", "app", "versionName", "appToInstall", "name", "state", "installedApps", "error", "currentState", "isSecureConnectionAllowed", "appList", "context", "input", "deviceInfo", "eitherConnection"]
}
